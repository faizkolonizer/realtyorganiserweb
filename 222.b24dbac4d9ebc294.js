"use strict";(self.webpackChunkCRM=self.webpackChunkCRM||[]).push([[222],{222:(Z,b,s)=>{s.r(b),s.d(b,{DeptModule:()=>W,HttpLoaderFactory:()=>D});var m=s(177),C=s(3141),P=s(2586),O=s(5658),y=s(5400),v=s(5286),f=s(6695),t=s(4438),w=s(4006),j=s(1487),F=s(5794);class c{static isString(e){return"string"==typeof e||e instanceof String}static caseInsensitiveSort(e,n){return c.isString(e)&&c.isString(n)?e.localeCompare(n):c.defaultCompare(e,n)}static defaultCompare(e,n){return e&&e instanceof Date&&(e=e.getTime()),n&&n instanceof Date&&(n=n.getTime()),e===n?0:null==e?1:null==n?-1:e>n?1:-1}static parseExpression(e){return(e=(e=e.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"")).split(".")}static getValue(e,n){for(let i=0,r=n.length;i<r;++i){if(!e)return;const a=n[i];if(!(a in e))return;e="function"==typeof e[a]?e[a]():e[a]}return e}static setValue(e,n,i){let r;for(r=0;r<i.length-1;r++)e=e[i[r]];e[i[r]]=n}transform(e,n,i,r=!1,a){return e&&(Array.isArray(n)?this.multiExpressionTransform(e,n.slice(),i,r,a):Array.isArray(e)?this.sortArray(e.slice(),n,i,r,a):"object"==typeof e?this.transformObject(Object.assign({},e),n,i,r,a):e)}sortArray(e,n,i,r,a){const d=n&&-1!==n.indexOf(".");let p;d&&(n=c.parseExpression(n)),p=a&&"function"==typeof a?a:r?c.caseInsensitiveSort:c.defaultCompare;const l=e.sort((g,h)=>n?d?p(c.getValue(g,n),c.getValue(h,n)):g&&h?p(g[n],h[n]):p(g,h):p(g,h));return i?l.reverse():l}transformObject(e,n,i,r,a){const d=c.parseExpression(n);let p=d.pop(),l=c.getValue(e,d);return Array.isArray(l)||(d.push(p),p=null,l=c.getValue(e,d)),l&&c.setValue(e,this.transform(l,p,i,r),d),e}multiExpressionTransform(e,n,i,r=!1,a){return n.reverse().reduce((d,p)=>this.transform(d,p,i,r,a),e)}}var u=s(2102),I=s(9631),R=s(9217),x=s(668),_=s(1780);function k(o,e){if(1&o){const n=t.RV6();t.j41(0,"button",22),t.bIt("click",function(){t.eBV(n);const r=t.XpG(2);return t.Njj(r.addDeptModal())}),t.j41(1,"span",23)(2,"mat-icon",24),t.EFF(3,"business_center"),t.k0s()(),t.EFF(4),t.nI1(5,"translate"),t.k0s()}2&o&&(t.R7$(4),t.SpI(" ",t.bMT(5,1,"Department.add_dept.Add_Department")," "))}function T(o,e){if(1&o&&(t.qex(0),t.DNE(1,k,6,3,"button",21),t.bVm()),2&o){const n=e.$implicit;t.R7$(),t.Y8G("ngIf",1==n.create)}}function $(o,e){1&o&&(t.j41(0,"p"),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&o&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"Errors_msg.msg6")," "))}function E(o,e){if(1&o){const n=t.RV6();t.j41(0,"button",33),t.bIt("click",function(){t.eBV(n);const r=t.XpG(2).$implicit,a=t.XpG(2);return t.Njj(a.editDeptModal(r.id))}),t.j41(1,"span",34),t.nrm(2,"i",35),t.k0s()()}}function S(o,e){if(1&o&&(t.qex(0),t.j41(1,"td",31),t.DNE(2,E,3,0,"button",32),t.k0s(),t.bVm()),2&o){const n=e.$implicit;t.R7$(2),t.Y8G("ngIf",1==n.update)}}function G(o,e){if(1&o){const n=t.RV6();t.j41(0,"button",33),t.bIt("click",function(){t.eBV(n);const r=t.XpG(3).$implicit,a=t.XpG(2);return t.Njj(a.editDeptModal(r.id))}),t.j41(1,"span",34),t.nrm(2,"i",35),t.k0s()()}}function V(o,e){if(1&o&&(t.j41(0,"td",31),t.DNE(1,G,3,0,"button",32),t.k0s()),2&o){const n=t.XpG().$implicit;t.R7$(),t.Y8G("ngIf",1==n.update)}}function N(o,e){if(1&o&&(t.qex(0),t.DNE(1,V,2,1,"td",36),t.bVm()),2&o){const n=t.XpG(3);t.R7$(),t.Y8G("ngIf",1==n.showCrossicon)}}function B(o,e){if(1&o&&(t.j41(0,"tr",30)(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s(),t.DNE(7,S,3,1,"ng-container",9)(8,N,2,1,"ng-container",9),t.k0s()),2&o){const n=e.$implicit,i=t.XpG(2);t.R7$(2),t.JRh(n.name),t.R7$(2),t.JRh(n.project),t.R7$(2),t.SpI(" ",n.description?n.description:"-"," "),t.R7$(),t.Y8G("ngForOf",i.deptFeature),t.R7$(),t.Y8G("ngForOf",i.deptFeature)}}function A(o,e){if(1&o&&(t.j41(0,"table",25)(1,"thead",26)(2,"tr",27)(3,"th"),t.EFF(4),t.nI1(5,"translate"),t.k0s(),t.j41(6,"th"),t.EFF(7),t.nI1(8,"translate"),t.k0s(),t.j41(9,"th"),t.EFF(10),t.nI1(11,"translate"),t.k0s(),t.nrm(12,"th"),t.k0s()(),t.j41(13,"tbody",28),t.DNE(14,B,9,5,"tr",29),t.k0s()()),2&o){const n=t.XpG();t.Y8G("dtOptions",n.dtOptions),t.R7$(4),t.JRh(t.bMT(5,5,"Buttons.Name")),t.R7$(3),t.SpI(" ",t.bMT(8,7,"Project.Add_Project.project_name_placeholdere")," "),t.R7$(3),t.JRh(t.bMT(11,9,"Department.add_dept.Description")),t.R7$(4),t.Y8G("ngForOf",n.deptDetailFilter)}}const X=[{path:"",component:(()=>{class o{constructor(n,i,r,a){this.dialog=n,this.mainService=i,this.toastr=r,this.orderPipe=a,this.paginator=1,this.animal="nikita",this.name="",this.description="",this.deptDetail=[],this.delete=[],this.Showicon="none",this.showCrossicon=!1,this.order="name",this.reverse=!1,this.sortedCollection=[],this.p=1,this.totalRecords=0,this.perPageRecord=10,this.showName=!0,this.showProject=!0,this.showDesc=!0,this.dtOptions={},this.dtTrigger=new v.B7,this.pass=d=>d,this.deptDetailFilter=[],this.deptDetailPagination=[]}ngOnInit(){this.deptDetail=[],console.log(this.deptDetail),this.dtOptions={searching:!1,processing:!0,order:[],paging:!1,info:!1,columnDefs:[{orderable:!1,targets:3}]},this.getPermission=localStorage.getItem("user_info"),this.logindata=JSON.parse(this.getPermission),this.userId=this.logindata.id,this.mainService.getUser(this.userId).subscribe(n=>{this.userData=n,this.features=this.userData.user.Role.Feature_Access_Permissions,this.deptFeature=this.features.filter(i=>"Departments"==i.Feature.name)}),this.mainService.getDeprtments().subscribe(n=>{this.deptData=n,this.departments=this.deptData.department,this.totalRecords=this.departments.length,this.departments.forEach(i=>{this.deptDetail.push({id:i.id?i.id:null,name:i.name?i.name:null,project:i.Project?i.Project.name:null,description:i.description?i.description:null})}),this.deptDetailPagination=this.deptDetail,this.deptDetailFilter=this.deptDetail.slice(0,10),console.log(this.deptDetailFilter),this.dtTrigger.next()},n=>{})}addDeptModal(){this.dialog.open(P.w,{width:"500px",data:{},autoFocus:!1}).afterClosed().subscribe(i=>{this.deptDetail=[],this.mainService.getDeprtments().subscribe(r=>{this.deptData=r,this.departments=this.deptData.department,this.totalRecords=this.departments.length,this.departments.forEach(a=>{this.deptDetail.push({id:a.id?a.id:null,name:a.name?a.name:null,project:a.Project?a.Project.name:null,description:a.description?a.description:null})}),this.ngOnInit()},r=>{})})}editDeptModal(n){this.mainService.getDepartment(n).subscribe(i=>{this.departmentData=i,this.name=this.departmentData.department.name?this.departmentData.department.name:null,this.description=this.departmentData.department.description?this.departmentData.department.description:null,this.deptId=this.departmentData.department.id?this.departmentData.department.id:null,this.project=this.departmentData.department.Project?this.departmentData.department.Project.name:null,this.projectId=this.departmentData.department.Project?this.departmentData.department.Project.id:null,this.dialog.open(O.p,{width:"500px",data:{name:this.name,description:this.description,id:this.deptId,project:this.project,projectId:this.projectId}}).afterClosed().subscribe(a=>{this.ngOnInit()})})}openDelete(n){this.dialog.open(y.m,{}).afterClosed().subscribe(r=>{"yes"==r&&this.mainService.deleteDepartment(n).subscribe(a=>{this.data=a,this.toastr.success(this.data.message),this.ngOnInit()},a=>{console.log(a)})})}setPage(n){this.deptDetailFilter=this.deptDetailPagination.slice(10*n,10*n+10)}findInArray(n,i,r){return i=RegExp(i,"i"),n.filter(a=>r.map(d=>i.test(a[d])).some(this.pass))}pageEvents(n){this.setPage(this.paginator.pageIndex)}searchText(n){this.deptDetailPagination=this.findInArray(this.deptDetail,n.target.value,["id","name","project","description"]),this.paginator.pageIndex=0,this.setPage(0)}static#t=this.\u0275fac=function(i){return new(i||o)(t.rXU(w.bZ),t.rXU(j.t),t.rXU(F.tw),t.rXU(c))};static#n=this.\u0275cmp=t.VBU({type:o,selectors:[["app-dept"]],viewQuery:function(i,r){if(1&i&&t.GBs(f.iy,5),2&i){let a;t.mGM(a=t.lsd())&&(r.paginator=a.first)}},decls:29,vars:14,consts:[["input",""],[1,"app-main__inner"],[1,"app-page-title"],[1,"page-title-wrapper"],[1,"page-title-heading"],[1,"page-title-icon"],[2,"background","white","color","#68bfbb","font-size","larger","position","relative","left","5px","bottom","5px"],[1,"page-title-actions"],[1,"d-inline-block","dropdown"],[4,"ngFor","ngForOf"],[1,"row"],[1,"col-lg-12"],[1,"main-card","mb-3","card"],[1,"card-body"],[1,"filters"],["appearance","outline",2,"float","right","padding-right","5%"],["matInput","","autocomplete","off",3,"keyup","placeholder"],[1,"card-title"],[4,"ngIf"],["datatable","",3,"dtOptions",4,"ngIf"],["showFirstLastButtons","","aria-label","Select users",3,"page","length","pageSize"],["type","button","aria-haspopup","true","aria-expanded","false","class","btn-shadow btn btn-info",3,"click",4,"ngIf"],["type","button","aria-haspopup","true","aria-expanded","false",1,"btn-shadow","btn","btn-info",3,"click"],[1,"btn-icon-wrapper","pr-2","opacity-7"],[2,"background-color","transparent","color","white","position","relative","top","4px"],["datatable","",3,"dtOptions"],["role","row-group"],["role","row"],["role","rowgroup"],["class","dep",4,"ngFor","ngForOf"],[1,"dep"],[1,"close-td"],["class","pushable close-btn","style","margin-right: 5px",3,"click",4,"ngIf"],[1,"pushable","close-btn",2,"margin-right","5px",3,"click"],[1,"front"],[1,"fas","fa-edit","edit_btn"],["class","close-td",4,"ngIf"]],template:function(i,r){if(1&i){const a=t.RV6();t.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"mat-icon",6),t.EFF(6,"location_city"),t.k0s()(),t.j41(7,"div"),t.EFF(8),t.nI1(9,"translate"),t.k0s()(),t.j41(10,"div",7)(11,"div",8),t.DNE(12,T,2,1,"ng-container",9),t.k0s()()()(),t.j41(13,"div",10)(14,"div",11)(15,"div",12)(16,"div",13)(17,"div",14)(18,"mat-form-field",15)(19,"mat-label"),t.EFF(20),t.nI1(21,"translate"),t.k0s(),t.j41(22,"input",16,0),t.nI1(24,"translate"),t.bIt("keyup",function(p){return t.eBV(a),t.Njj(r.searchText(p))}),t.k0s()()(),t.nrm(25,"h5",17),t.DNE(26,$,3,3,"p",18)(27,A,15,11,"table",19),t.j41(28,"mat-paginator",20),t.bIt("page",function(p){return t.eBV(a),t.Njj(r.pageEvents(p))}),t.k0s()()()()()()}2&i&&(t.R7$(8),t.SpI(" ",t.bMT(9,8,"Department.add_dept.Department")," "),t.R7$(4),t.Y8G("ngForOf",r.deptFeature),t.R7$(8),t.JRh(t.bMT(21,10,"Buttons.Search")),t.R7$(2),t.FS9("placeholder",t.bMT(24,12,"Buttons.Search")),t.R7$(4),t.Y8G("ngIf",0==r.deptDetail.length),t.R7$(),t.Y8G("ngIf",r.deptDetail.length),t.R7$(),t.Y8G("length",r.deptDetailPagination.length)("pageSize",10))},dependencies:[m.Sq,m.bT,u.rl,u.nJ,I.fg,R.An,f.iy,x._,_.D9],styles:['.fa-building[_ngcontent-%COMP%]{font-size:20px;color:#68bfbb}textarea[_ngcontent-%COMP%]:focus, input[_ngcontent-%COMP%]:focus{outline:none!important}.clickable_row[_ngcontent-%COMP%]{cursor:pointer}.close-td[_ngcontent-%COMP%]{display:flex;justify-content:right}.close-btn[_ngcontent-%COMP%]{display:none}.dep[_ngcontent-%COMP%]:hover{box-shadow:0 2px 12px #bfbfbf!important}.dep[_ngcontent-%COMP%]:hover   .close-btn[_ngcontent-%COMP%]{display:block!important}td.details-control[_ngcontent-%COMP%]{background:url(/assets/images/details_open.png) no-repeat center center;cursor:pointer}tr.shown[_ngcontent-%COMP%]   td.details-control[_ngcontent-%COMP%]{background:url(/assets/images/details_close.png) no-repeat center center}table[_ngcontent-%COMP%]{table-layout:auto;width:100%;border-collapse:separate;border-spacing:0 20px}table[_ngcontent-%COMP%]   .details-control[_ngcontent-%COMP%]{padding:22px!important}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:#a1a1a1}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:#fff;font-weight:300;padding:8px 0 7px 20px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{background-color:#fff}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{box-shadow:0 0 8px #00000040;cursor:pointer;border-radius:6px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{min-width:60px;padding:8px 0 7px 20px}.searchBox[_ngcontent-%COMP%]{float:right;position:relative;left:.3rem;padding:8px;border-radius:10px;border:1.9px solid #68bfbb;height:33px;width:190px}td[_ngcontent-%COMP%]:first-child, th[_ngcontent-%COMP%]:first-child{padding:8px 0 7px 52px}tfoot[_ngcontent-%COMP%], th[_ngcontent-%COMP%]:first-child, td[_ngcontent-%COMP%]:first-child, .showNew[_ngcontent-%COMP%], thead[_ngcontent-%COMP%]{border-radius:6px 0 0 6px}tfoot[_ngcontent-%COMP%], th[_ngcontent-%COMP%]:last-child, td[_ngcontent-%COMP%]:last-child, .showNew[_ngcontent-%COMP%], tr[_ngcontent-%COMP%], thead[_ngcontent-%COMP%]{border-radius:0 6px 6px 0}@media only screen and (max-width: 760px),(min-device-width: 768px) and (max-device-width: 1024px){table[_ngcontent-%COMP%], thead[_ngcontent-%COMP%], tbody[_ngcontent-%COMP%], th[_ngcontent-%COMP%], td[_ngcontent-%COMP%], tr[_ngcontent-%COMP%]{display:block}thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{position:absolute;top:-9999px;left:-9999px}tr[_ngcontent-%COMP%]{margin:0 0 1rem}tr[_ngcontent-%COMP%]:nth-child(odd){background:#ccc}td[_ngcontent-%COMP%]{border:none;border-bottom:1px solid #eee;position:relative;padding:7px 0 7px 50%!important}}@media only screen and (max-width: 760px) and (max-width: 384px),only screen and (min-device-width: 768px) and (max-device-width: 1024px) and (max-width: 384px){td[_ngcontent-%COMP%]{padding-left:55%!important}}@media only screen and (max-width: 760px) and (max-width: 340px),only screen and (min-device-width: 768px) and (max-device-width: 1024px) and (max-width: 340px){td[_ngcontent-%COMP%]{padding-left:60%!important}}@media only screen and (max-width: 760px) and (max-width: 314px),only screen and (min-device-width: 768px) and (max-device-width: 1024px) and (max-width: 314px){td[_ngcontent-%COMP%]{padding-left:65%!important}}@media only screen and (max-width: 760px) and (max-width: 296px),only screen and (min-device-width: 768px) and (max-device-width: 1024px) and (max-width: 296px){td[_ngcontent-%COMP%]{padding-left:69%!important}}@media only screen and (max-width: 760px) and (max-width: 242px),only screen and (min-device-width: 768px) and (max-device-width: 1024px) and (max-width: 242px){td[_ngcontent-%COMP%]{padding-left:78%!important}}@media only screen and (max-width: 760px),(min-device-width: 768px) and (max-device-width: 1024px){td[_ngcontent-%COMP%]:before{position:absolute;left:20px;width:45%;padding-right:10px;white-space:nowrap}td[_ngcontent-%COMP%]:nth-of-type(1):before{content:"Name"}td[_ngcontent-%COMP%]:nth-of-type(2):before{content:"Branch"}td[_ngcontent-%COMP%]:nth-of-type(3):before{content:"Description"}}.mat-icon[_ngcontent-%COMP%]{font-size:18px;background-repeat:no-repeat;display:inline-block;color:#fff;height:18px;width:18px;background-color:#d21212;border-radius:50px;margin-left:-9px;margin-top:-12px}  .ngx-pagination .current{background-color:#68bfbb!important;border-radius:50%!important;height:20px;width:20px;position:relative;top:3px}  span.ng-star-inserted{position:inherit;right:4px;bottom:3px}  .ngx-pagination a, .ngx-pagination[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#68bfbb!important}@media only screen and (min-width: 200px) and (max-width: 1024px){.table-margin[_ngcontent-%COMP%]{margin-top:4rem}.td-cross[_ngcontent-%COMP%]{z-index:1;float:right;position:relative;top:3px;left:6px}}.deactive_record[_ngcontent-%COMP%]{border:1px solid #68BFBB;text-align:center;padding-top:6px;padding-left:10px;padding-right:10px;height:36px}.edit-div[_ngcontent-%COMP%]{margin-right:20px}@media only screen and (min-width: 200px) and (max-width: 1024px){.edit-div[_ngcontent-%COMP%]{margin-right:0}.i_edit[_ngcontent-%COMP%]{color:#68bfbb;margin-top:5px!important;font-size:18px}.mat-icon[_ngcontent-%COMP%]{margin-left:0!important}}.i_edit[_ngcontent-%COMP%]{color:#68bfbb;margin-top:-11px;font-size:18px}.SortIcon[_ngcontent-%COMP%]{position:absolute;background-color:#a1a1a1!important;justify-content:center;margin-top:1px;cursor:pointer;margin-left:3px}']})}return o})()}];let Y=(()=>{class o{static#t=this.\u0275fac=function(i){return new(i||o)};static#n=this.\u0275mod=t.$C({type:o});static#e=this.\u0275inj=t.G2t({imports:[C.iI.forChild(X),C.iI]})}return o})();var M=s(9417),z=s(551),J=s(2796),U=s(9159),L=s(8320),H=s(1626),Q=s(3125);function D(o){return new L.s(o)}let W=(()=>{class o{constructor(){}static#t=this.\u0275fac=function(i){return new(i||o)};static#n=this.\u0275mod=t.$C({type:o});static#e=this.\u0275inj=t.G2t({imports:[m.MD,Y,z.G,M.YN,M.X1,f.Ou,U.tP,u.RG,x.H.forRoot(),J.ed,Q.m,_.h.forChild({loader:{provide:_.Wr,useFactory:D,deps:[H.Qq]},defaultLanguage:"en"}),x.H.forRoot()]})}return o})()}}]);