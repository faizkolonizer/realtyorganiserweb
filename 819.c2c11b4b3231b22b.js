"use strict";(self.webpackChunkCRM=self.webpackChunkCRM||[]).push([[819],{819:(ts,N,v)=>{v.r(N),v.d(N,{HttpLoaderFactory:()=>ee,UserModule:()=>Zt});var I=v(177),D=v(3141),b=v(9417),B=v(9759),V=v(3908),R=v(9327),se=v(4800),re=v(1072),e=v(4438),X=v(9214),M=v(4006),j=v(1780),Y=v(1487),L=v(5794),x=v(2102),J=v(2798),ne=v(6600),w=v(9217),G=v(9631),q=v(8834),U=v(1161),z=v(450),H=v(2765),ie=v(9016),ae=v(4215);const le=["readFullTag"],oe=["readFullTag1"],ce=["readFullTag2"],de=["readFullTag3"],he=["readFullTag4"],ue=["readFullTag5"],pe=["readFullTagInventory"],me=["materialDashboardReadAccess"],fe=["propertyDashboardReadAccess"],_e=["materialDashboardFullAccess"],ge=["propertyDashboardFullAccess"],ke=["materialDashboardCreateAccess"],ve=["materialDashboardUpdateAccess"],be=["propertyDashboardCreateAccess"],Ae=["propertyDashboardUpdateAccess"],ye=["createReadAccessInventory"],Fe=["updateReadAccessInventory"],Ce=["allFullAccressForInventory"],Re=["allFullAccressForfinancial"],Ie=["createReadAccess4"],Ee=["updateReadAccess4"],P=c=>({display:c}),xe=()=>({"border-top":"1px solid black"}),Z=()=>({}),De=()=>({"background-color":"#45b545",color:"white"}),je=()=>["Reserve - Stock","For Sale - Stock","Booked","Sold","Purchases","Consumptions"];function Pe(c,_){if(1&c){const t=e.RV6();e.j41(0,"mat-icon",95),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.deleteImg())}),e.EFF(1,"highlight_off"),e.k0s()}}function Me(c,_){if(1&c&&(e.j41(0,"mat-option",105),e.EFF(1),e.k0s()),2&c){const t=_.$implicit;e.FS9("value",t.id),e.Y8G("disabled",t.selected),e.R7$(),e.SpI(" ",t.name," ")}}function Ue(c,_){1&c&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&c&&(e.R7$(),e.JRh(e.bMT(2,1,"Errors_msg.msg43")))}function Te(c,_){if(1&c&&(e.j41(0,"mat-option",111),e.EFF(1),e.k0s()),2&c){const t=_.$implicit;e.FS9("value",t.id),e.R7$(),e.SpI(" ",t.name," ")}}function we(c,_){1&c&&(e.j41(0,"mat-error",56),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&c&&(e.R7$(),e.JRh(e.bMT(2,1,"Errors_msg.msg70")))}function Ge(c,_){if(1&c){const t=e.RV6();e.j41(0,"div",58)(1,"mat-form-field",106),e.bIt("click",function(){e.eBV(t);const s=e.XpG(2).index,r=e.XpG();return e.Njj(r.showMsg(s))}),e.j41(2,"mat-label"),e.EFF(3),e.nI1(4,"translate"),e.j41(5,"span",54),e.EFF(6,"*"),e.k0s()(),e.j41(7,"mat-select",107),e.DNE(8,Te,2,2,"mat-option",108),e.k0s(),e.DNE(9,we,3,3,"mat-error",109),e.k0s(),e.j41(10,"span",110),e.EFF(11),e.nI1(12,"translate"),e.k0s()()}if(2&c){let t;const i=e.XpG(2).index,s=e.XpG();e.R7$(3),e.JRh(e.bMT(4,6,"user.Select_Department")),e.R7$(4),e.Y8G("disabled",s.disabledept[i]),e.R7$(),e.Y8G("ngForOf",s.projects[s.projectIdIndex[i]].Departments),e.R7$(),e.Y8G("ngIf",null==(t=s.addUserForm.get("departments"))?null:t.touched),e.R7$(),e.FS9("id","deptErr"+i),e.R7$(),e.JRh(e.bMT(12,8,"Errors_msg.msg71"))}}function Oe(c,_){if(1&c&&(e.j41(0,"mat-option",111),e.EFF(1),e.k0s()),2&c){const t=_.$implicit;e.FS9("value",t.id),e.R7$(),e.SpI(" ",t.name," ")}}function Se(c,_){1&c&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&c&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"Errors_msg.msg70"),""))}function Ne(c,_){if(1&c){const t=e.RV6();e.j41(0,"div",91)(1,"mat-form-field",112),e.bIt("click",function(){e.eBV(t);const s=e.XpG(2).index,r=e.XpG();return e.Njj(r.showMsg(s,"parentUserErr"))}),e.j41(2,"mat-label"),e.EFF(3),e.nI1(4,"translate"),e.k0s(),e.j41(5,"mat-select",113)(6,"mat-option"),e.EFF(7,"Select Parent Role"),e.k0s(),e.DNE(8,Oe,2,2,"mat-option",108),e.k0s(),e.DNE(9,Se,3,3,"mat-error",98),e.k0s(),e.j41(10,"span",110),e.EFF(11),e.nI1(12,"translate"),e.k0s()()}if(2&c){let t;const i=e.XpG(2).index,s=e.XpG();e.R7$(3),e.JRh(e.bMT(4,6,"user.Select_Parent_Role")),e.R7$(2),e.Y8G("disabled",s.disabledept[i]),e.R7$(3),e.Y8G("ngForOf",s.projects[s.projectIdIndex[i]].Users),e.R7$(),e.Y8G("ngIf",null==(t=s.addUserForm.get("department_id"))?null:t.touched),e.R7$(),e.FS9("id","parentUserErr"+i),e.R7$(),e.JRh(e.bMT(12,8,"Errors_msg.msg71"))}}function $e(c,_){if(1&c){const t=e.RV6();e.j41(0,"div",114)(1,"button",115),e.bIt("click",function(){e.eBV(t);const s=e.XpG(2).index,r=e.XpG();return e.Njj(r.removeField(s))}),e.j41(2,"mat-icon"),e.EFF(3,"clear"),e.k0s()()()}}function Be(c,_){if(1&c){const t=e.RV6();e.qex(0),e.j41(1,"div",58)(2,"mat-form-field",99)(3,"mat-label"),e.EFF(4),e.nI1(5,"translate"),e.j41(6,"span",54),e.EFF(7,"*"),e.k0s()(),e.j41(8,"mat-select",100),e.bIt("selectionChange",function(s){e.eBV(t);const r=e.XpG().index,n=e.XpG();return e.Njj(n.GetProject(s,r))}),e.DNE(9,Me,2,3,"mat-option",101),e.k0s(),e.DNE(10,Ue,3,3,"mat-error",98),e.k0s()(),e.DNE(11,Ge,13,10,"div",102)(12,Ne,13,10,"div",103)(13,$e,4,0,"div",104),e.bVm()}if(2&c){let t;const i=e.XpG().index,s=e.XpG();e.R7$(4),e.JRh(e.bMT(5,6,"user.Select_Project")),e.R7$(5),e.Y8G("ngForOf",s.projects),e.R7$(),e.Y8G("ngIf",null==(t=s.addUserForm.get("projects"))?null:t.invalid),e.R7$(),e.Y8G("ngIf",i<s.projects.length),e.R7$(),e.Y8G("ngIf",i<s.projects.length),e.R7$(),e.Y8G("ngIf",0!=i)}}function Ve(c,_){if(1&c&&(e.qex(0,96),e.j41(1,"div",97),e.DNE(2,Be,14,8,"ng-container",98),e.k0s(),e.bVm()),2&c){const t=_.index,i=e.XpG();e.Y8G("formGroupName",t),e.R7$(2),e.Y8G("ngIf",t<(null==i.projects?null:i.projects.length))}}function Xe(c,_){if(1&c&&(e.j41(0,"mat-option",116),e.EFF(1),e.k0s()),2&c){const t=_.$implicit,i=e.XpG();e.FS9("value",t.id),e.Y8G("disabled",!i.disableRole),e.R7$(),e.SpI("",t.name," ")}}function Ye(c,_){if(1&c){const t=e.RV6();e.j41(0,"div",149)(1,"input",150,1),e.bIt("change",function(s){const r=e.eBV(t).$implicit,n=e.XpG(2);return e.Njj(n.getFeature(r.key,s))}),e.k0s(),e.j41(3,"label",151),e.EFF(4),e.k0s(),e.nrm(5,"br"),e.k0s()}if(2&c){const t=_.$implicit,i=e.XpG(2);e.R7$(),e.FS9("value",i.module.id),e.Y8G("id",t.key)("checked",t.value),e.R7$(2),e.Y8G("for",t.key),e.R7$(),e.SpI(" ","financial_management"==t.key?"Financial Management":"inventory_module"==t.key?"Inventory Management":t.key," ")}}function Le(c,_){if(1&c){const t=e.RV6();e.j41(0,"tr",158)(1,"td",159)(2,"button",160),e.bIt("click",function(){e.eBV(t);const s=e.XpG(3);return e.Njj(s.openPropertyDialog())}),e.EFF(3,"Limited Access"),e.k0s()()()}if(2&c){const t=e.XpG(3);e.R7$(2),e.Y8G("ngStyle",null!=t.propertyResult&&t.propertyResult.checkedAllProperty||(null==t.propertyResult?null:t.propertyResult.propertyIdsForPermission.length)>0?e.lJ4(1,De):e.lJ4(2,Z))}}function Je(c,_){if(1&c){const t=e.RV6();e.qex(0),e.j41(1,"tr",136)(2,"td",152),e.EFF(3),e.k0s(),e.j41(4,"td",126)(5,"mat-slide-toggle",153),e.bIt("change",function(s){const r=e.eBV(t),n=r.$implicit,o=r.index,a=e.XpG(2);return e.Njj(a.getCreate(s,n.id,o))}),e.k0s()(),e.j41(6,"td",126)(7,"mat-slide-toggle",154),e.bIt("change",function(s){const r=e.eBV(t).$implicit,n=e.XpG(2);return e.Njj(n.getRead(s,r.id))}),e.k0s()(),e.j41(8,"td",126)(9,"mat-slide-toggle",155),e.bIt("change",function(s){const r=e.eBV(t).$implicit,n=e.XpG(2);return e.Njj(n.getUpdate(s,r.id))}),e.k0s()(),e.j41(10,"td",126)(11,"mat-slide-toggle",156),e.bIt("change",function(s){const r=e.eBV(t).$implicit,n=e.XpG(2);return e.Njj(n.getFullAccess(s,r.id))}),e.k0s()()(),e.DNE(12,Le,4,3,"tr",157),e.bVm()}if(2&c){const t=_.$implicit,i=e.XpG(2);e.R7$(),e.Y8G("ngStyle","Properties"==t.name?e.lJ4(11,xe):e.lJ4(12,Z)),e.R7$(2),e.JRh("Project Property Types"==t.name?"Project Block":t.name&&"Property Types"==t.name?"Product Type":t.name&&"Properties"==t.name?"Property Unit Details":t.name),e.R7$(2),e.Y8G("checked",t.create)("disabled",((null==i.propertyResult?null:i.propertyResult.checkedAllProperty)||(null==i.propertyResult?null:i.propertyResult.propertyIdsForPermission.length)>0)&&"Properties"==t.name),e.R7$(2),e.Y8G("checked",t.read)("disabled",((null==i.propertyResult?null:i.propertyResult.checkedAllProperty)||(null==i.propertyResult?null:i.propertyResult.propertyIdsForPermission.length)>0)&&"Properties"==t.name),e.R7$(2),e.Y8G("checked",t.update)("disabled",((null==i.propertyResult?null:i.propertyResult.checkedAllProperty)||(null==i.propertyResult?null:i.propertyResult.propertyIdsForPermission.length)>0)&&"Properties"==t.name),e.R7$(2),e.Y8G("checked",t.full)("disabled",((null==i.propertyResult?null:i.propertyResult.checkedAllProperty)||(null==i.propertyResult?null:i.propertyResult.propertyIdsForPermission.length)>0)&&"Properties"==t.name),e.R7$(),e.Y8G("ngIf","Properties"==t.name)}}function qe(c,_){if(1&c){const t=e.RV6();e.j41(0,"tr")(1,"td",152),e.EFF(2),e.k0s(),e.j41(3,"td",126)(4,"mat-slide-toggle",161),e.bIt("change",function(s){const r=e.eBV(t),n=r.$implicit,o=r.index,a=e.XpG(2);return e.Njj(a.getCreate(s,n.id,o))}),e.k0s()(),e.j41(5,"td",126)(6,"mat-slide-toggle",162),e.bIt("change",function(s){const r=e.eBV(t).$implicit,n=e.XpG(2);return e.Njj(n.getRead(s,r.id))}),e.k0s()(),e.j41(7,"td",126)(8,"mat-slide-toggle",129),e.bIt("change",function(s){const r=e.eBV(t).$implicit,n=e.XpG(2);return e.Njj(n.getUpdate(s,r.id))}),e.k0s()(),e.j41(9,"td",126)(10,"mat-slide-toggle",163),e.bIt("change",function(s){const r=e.eBV(t).$implicit,n=e.XpG(2);return e.Njj(n.getFullAccess(s,r.id))}),e.k0s()()()}if(2&c){const t=_.$implicit,i=_.index;e.R7$(2),e.JRh(t.name),e.R7$(2),e.FS9("id",t.id+i),e.Y8G("checked",t.create),e.R7$(2),e.Y8G("checked",t.read),e.R7$(2),e.Y8G("checked",t.update),e.R7$(2),e.Y8G("checked",t.full)}}function ze(c,_){if(1&c){const t=e.RV6();e.j41(0,"tr")(1,"td",152),e.EFF(2),e.k0s(),e.j41(3,"td",126)(4,"mat-slide-toggle",127),e.bIt("change",function(s){const r=e.eBV(t),n=r.$implicit,o=r.index,a=e.XpG(2);return e.Njj(a.getCreate(s,n.id,o))}),e.k0s()(),e.j41(5,"td",126)(6,"mat-slide-toggle",162),e.bIt("change",function(s){const r=e.eBV(t).$implicit,n=e.XpG(2);return e.Njj(n.getRead(s,r.id))}),e.k0s()(),e.j41(7,"td",126)(8,"mat-slide-toggle",129),e.bIt("change",function(s){const r=e.eBV(t).$implicit,n=e.XpG(2);return e.Njj(n.getUpdate(s,r.id))}),e.k0s()(),e.j41(9,"td",126)(10,"mat-slide-toggle",163),e.bIt("change",function(s){const r=e.eBV(t).$implicit,n=e.XpG(2);return e.Njj(n.getFullAccess(s,r.id))}),e.k0s()()()}if(2&c){const t=_.$implicit;e.R7$(2),e.JRh(t.name),e.R7$(2),e.Y8G("checked",t.create),e.R7$(2),e.Y8G("checked",t.read),e.R7$(2),e.Y8G("checked",t.update),e.R7$(2),e.Y8G("checked",t.full)}}function He(c,_){if(1&c){const t=e.RV6();e.j41(0,"tr")(1,"td",152),e.EFF(2),e.k0s(),e.j41(3,"td",126)(4,"mat-slide-toggle",127),e.bIt("change",function(s){const r=e.eBV(t),n=r.$implicit,o=r.index,a=e.XpG(3);return e.Njj(a.getCreate(s,n.id,o))}),e.k0s()(),e.j41(5,"td",126)(6,"mat-slide-toggle",162),e.bIt("change",function(s){const r=e.eBV(t).$implicit,n=e.XpG(3);return e.Njj(n.getRead(s,r.id))}),e.k0s()(),e.j41(7,"td",126)(8,"mat-slide-toggle",129),e.bIt("change",function(s){const r=e.eBV(t).$implicit,n=e.XpG(3);return e.Njj(n.getUpdate(s,r.id))}),e.k0s()(),e.j41(9,"td",126)(10,"mat-slide-toggle",163),e.bIt("change",function(s){const r=e.eBV(t).$implicit,n=e.XpG(3);return e.Njj(n.getFullAccess(s,r.id))}),e.k0s()()()}if(2&c){const t=_.$implicit;e.R7$(2),e.JRh(t.name),e.R7$(2),e.Y8G("checked",t.create),e.R7$(2),e.Y8G("checked",t.read),e.R7$(2),e.Y8G("checked",t.update),e.R7$(2),e.Y8G("checked",t.full)}}function Ze(c,_){if(1&c){const t=e.RV6();e.j41(0,"div",164)(1,"table",123)(2,"tr"),e.nrm(3,"th"),e.j41(4,"th",132),e.EFF(5),e.nI1(6,"translate"),e.k0s(),e.j41(7,"th",132),e.EFF(8),e.nI1(9,"translate"),e.k0s(),e.j41(10,"th",132),e.EFF(11),e.nI1(12,"translate"),e.k0s(),e.j41(13,"th",132),e.EFF(14),e.nI1(15,"translate"),e.k0s()(),e.j41(16,"tr",124)(17,"td",125),e.EFF(18),e.nI1(19,"translate"),e.k0s(),e.j41(20,"td",126)(21,"mat-slide-toggle",127,22),e.bIt("change",function(s){e.eBV(t);const r=e.sdS(28),n=e.XpG(2);return e.Njj(n.clickOnModule(s,n.newCollectionArr,"create","collection",r.checked))}),e.k0s()(),e.j41(23,"td",126)(24,"mat-slide-toggle",165,23),e.bIt("change",function(s){e.eBV(t);const r=e.XpG(2);return e.Njj(r.clickOnModule(s,r.newCollectionArr,"read"))}),e.k0s()(),e.j41(26,"td",126)(27,"mat-slide-toggle",129,24),e.bIt("change",function(s){e.eBV(t);const r=e.sdS(22),n=e.XpG(2);return e.Njj(n.clickOnModule(s,n.newCollectionArr,"update","collection",r.checked))}),e.k0s()(),e.j41(29,"td",126)(30,"mat-slide-toggle",130,25),e.bIt("change",function(s){e.eBV(t);const r=e.XpG(2);return e.Njj(r.clickOnModule(s,r.newCollectionArr,"full","collection"))}),e.k0s()()(),e.DNE(32,He,11,5,"tr",131),e.k0s()()}if(2&c){const t=e.sdS(31),i=e.XpG(2);e.R7$(5),e.SpI(" ",e.bMT(6,8,"role.add_role.Create")," "),e.R7$(3),e.SpI(" ",e.bMT(9,10,"role.add_role.Read")," "),e.R7$(3),e.SpI(" ",e.bMT(12,12,"role.add_role.Update")," "),e.R7$(3),e.SpI(" ",e.bMT(15,14,"role.add_role.Full_Access")," "),e.R7$(4),e.SpI(" ",e.bMT(19,16,"Offer.All")," "),e.R7$(3),e.Y8G("checked",t.checked),e.R7$(6),e.Y8G("checked",t.checked),e.R7$(5),e.Y8G("ngForOf",i.newCollectionArr)}}function We(c,_){if(1&c){const t=e.RV6();e.j41(0,"input",169),e.bIt("change",function(s){e.eBV(t);const r=e.XpG().$implicit,n=e.XpG(2);return e.Njj(n.getCreateFinancial(s,r.id))}),e.k0s()}if(2&c){const t=e.XpG().$implicit;e.Y8G("disabled",t.isDisabled)("checked",t.create)}}function Qe(c,_){if(1&c){const t=e.RV6();e.j41(0,"input",169),e.bIt("change",function(s){e.eBV(t);const r=e.XpG().$implicit,n=e.XpG(2);return e.Njj(n.getReadFinancial(s,r.id,r.name))}),e.k0s()}if(2&c){const t=e.XpG().$implicit;e.Y8G("disabled",t.isDisabled)("checked",t.read)}}function Ke(c,_){if(1&c){const t=e.RV6();e.j41(0,"input",169),e.bIt("change",function(s){e.eBV(t);const r=e.XpG().$implicit,n=e.XpG(2);return e.Njj(n.getUpdateFinancial(s,r.id,r.name))}),e.k0s()}if(2&c){const t=e.XpG().$implicit;e.Y8G("disabled",t.isDisabled)("checked",t.update)}}function et(c,_){if(1&c){const t=e.RV6();e.qex(0),e.j41(1,"div",166)(2,"div",167),e.EFF(3),e.k0s(),e.j41(4,"div",144),e.DNE(5,We,1,2,"input",168),e.k0s(),e.j41(6,"div",146),e.DNE(7,Qe,1,2,"input",168),e.k0s(),e.j41(8,"div"),e.DNE(9,Ke,1,2,"input",168),e.k0s(),e.j41(10,"div")(11,"input",169),e.bIt("change",function(s){const r=e.eBV(t).$implicit,n=e.XpG(2);return e.Njj(n.getFullAccessFinancial(s,r.id))}),e.k0s()()(),e.bVm()}if(2&c){const t=_.$implicit;e.R7$(3),e.JRh("Cash Flow"==t.name?"Cash Health Report":"Voucher"==t.name?"Journal voucher":t.name),e.R7$(2),e.Y8G("ngIf","All Transactions"!=t.name&&"Cash Health Report"!=t.name&&"Cheque Statement"!=t.name&&"Customer Payment Status"!=t.name&&"Sales"!=t.name&&"Received From Customers"!=t.name&&"Receivables From Customers"!=t.name&&"Only Bank Entries"!=t.name),e.R7$(2),e.Y8G("ngIf","Backdated Entries"!=t.name&&"Only Bank Entries"!=t.name),e.R7$(2),e.Y8G("ngIf","Cash Health Report"!=t.name&&"Customer Payment Status"!=t.name&&"Sales"!=t.name&&"Receivables From Customers"!=t.name&&"Only Bank Entries"!=t.name),e.R7$(2),e.Y8G("disabled",t.isDisabled)("checked",t.fullAccess)}}function tt(c,_){if(1&c){const t=e.RV6();e.j41(0,"input",169),e.bIt("change",function(s){e.eBV(t);const r=e.XpG(2).$implicit,n=e.XpG(2);return e.Njj(n.getCreateInventory(s,r.id,r.name))}),e.k0s()}if(2&c){const t=e.XpG(2).$implicit;e.Y8G("disabled",t.isDisabledCreate)("checked",t.create)}}function st(c,_){if(1&c){const t=e.RV6();e.j41(0,"input",145),e.bIt("change",function(s){e.eBV(t);const r=e.XpG(2).$implicit,n=e.XpG(2);return e.Njj(n.getReadInventory(s,r.id,r.name))}),e.k0s()}if(2&c){const t=e.XpG(2).$implicit;e.Y8G("checked",t.read)}}function rt(c,_){if(1&c){const t=e.RV6();e.j41(0,"input",169),e.bIt("change",function(s){e.eBV(t);const r=e.XpG(2).$implicit,n=e.XpG(2);return e.Njj(n.getUpdateInventory(s,r.id,r.name))}),e.k0s()}if(2&c){const t=e.XpG(2).$implicit;e.Y8G("disabled",t.isDisabledUpdate)("checked",t.update)}}function nt(c,_){if(1&c){const t=e.RV6();e.j41(0,"div",166)(1,"div",171),e.EFF(2),e.k0s(),e.j41(3,"div",144),e.DNE(4,tt,1,2,"input",168),e.k0s(),e.j41(5,"div",146),e.DNE(6,st,1,1,"input",172),e.k0s(),e.j41(7,"div"),e.DNE(8,rt,1,2,"input",168),e.k0s(),e.j41(9,"div")(10,"input",169),e.bIt("change",function(s){e.eBV(t);const r=e.XpG().$implicit,n=e.XpG(2);return e.Njj(n.getFullAccessInventory(s,r.id,r.name))}),e.k0s()()()}if(2&c){const t=e.XpG().$implicit;e.R7$(2),e.JRh("Backdated Entries"==t.name?"Backdated Entries (Purchase and Consumption)":t.name),e.R7$(2),e.Y8G("ngIf","Expenses Consumed"!=t.name),e.R7$(2),e.Y8G("ngIf","Backdated Entries"!=t.name),e.R7$(2),e.Y8G("ngIf","Expenses Consumed"!=t.name),e.R7$(2),e.Y8G("disabled",t.isDisabledFullaccess)("checked",t.fullAccess)}}function it(c,_){if(1&c){const t=e.RV6();e.j41(0,"div",178),e.bIt("click",function(){e.eBV(t);const s=e.XpG(4);return e.Njj(s.toggleMaterialExpansion())}),e.j41(1,"mat-icon"),e.EFF(2,"expand_more"),e.k0s()()}}function at(c,_){if(1&c){const t=e.RV6();e.j41(0,"div",178),e.bIt("click",function(){e.eBV(t);const s=e.XpG(4);return e.Njj(s.toggleMaterialExpansion())}),e.j41(1,"mat-icon"),e.EFF(2,"expand_less"),e.k0s()()}}function lt(c,_){if(1&c){const t=e.RV6();e.j41(0,"div",180)(1,"div",181),e.EFF(2),e.k0s(),e.j41(3,"div",144)(4,"input",182),e.bIt("change",function(s){const r=e.eBV(t).$implicit,n=e.XpG(5);return e.Njj(n.getCreateInventory(s,r.id,"materialDashboard"))}),e.k0s()(),e.j41(5,"div",146)(6,"input",145),e.bIt("change",function(s){const r=e.eBV(t).$implicit,n=e.XpG(5);return e.Njj(n.getReadInventory(s,r.id,"materialDashboard",!0))}),e.k0s()(),e.j41(7,"div")(8,"input",145),e.bIt("change",function(s){const r=e.eBV(t).$implicit,n=e.XpG(5);return e.Njj(n.getUpdateInventory(s,r.id,"materialDashboard",!0))}),e.k0s()(),e.j41(9,"div")(10,"input",145),e.bIt("change",function(s){const r=e.eBV(t).$implicit,n=e.XpG(5);return e.Njj(n.getFullAccessInventory(s,r.id,r.name,!0))}),e.k0s()()()}if(2&c){const t=_.$implicit,i=e.XpG(5);e.AVh("slide",i.isExpandedMaterial),e.R7$(2),e.JRh(t.name),e.R7$(2),e.Y8G("checked",t.create),e.R7$(2),e.Y8G("checked",t.read),e.R7$(2),e.Y8G("checked",t.update),e.R7$(2),e.Y8G("checked",t.fullAccess)}}function ot(c,_){if(1&c&&(e.j41(0,"div"),e.DNE(1,lt,11,7,"div",179),e.k0s()),2&c){const t=e.XpG(4);e.R7$(),e.Y8G("ngForOf",t.materialDashboard)}}function ct(c,_){if(1&c){const t=e.RV6();e.qex(0),e.j41(1,"div",166)(2,"div",143),e.EFF(3,"Material Dashboard"),e.k0s(),e.j41(4,"div",144)(5,"input",173,26),e.bIt("change",function(s){e.eBV(t);const r=e.sdS(12),n=e.XpG(3);return e.Njj(n.clickOnMaterialDashboardModule(s,n.newInventoryArr,"create","inventoryMaterial",r.checked))}),e.k0s()(),e.j41(7,"div",146)(8,"input",174,27),e.bIt("change",function(s){e.eBV(t);const r=e.XpG(3);return e.Njj(r.clickOnMaterialDashboardModule(s,r.newInventoryArr,"read","inventoryMaterial"))}),e.k0s()(),e.j41(10,"div")(11,"input",145,28),e.bIt("change",function(s){e.eBV(t);const r=e.sdS(6),n=e.XpG(3);return e.Njj(n.clickOnMaterialDashboardModule(s,n.newInventoryArr,"update","inventoryMaterial",r.checked))}),e.k0s()(),e.j41(13,"div",175)(14,"input",176,29),e.bIt("change",function(s){e.eBV(t);const r=e.XpG(3);return e.Njj(r.clickOnMaterialDashboardModule(s,r.newInventoryArr,"fullAccess","inventoryMaterial"))}),e.k0s(),e.DNE(16,it,3,0,"div",177)(17,at,3,0,"div",177),e.k0s()(),e.DNE(18,ot,2,1,"div",98),e.bVm()}if(2&c){const t=e.sdS(15),i=e.XpG(3);e.R7$(5),e.Y8G("checked",t.checked),e.R7$(6),e.Y8G("checked",t.checked),e.R7$(5),e.Y8G("ngIf",!i.isExpandedMaterial),e.R7$(),e.Y8G("ngIf",i.isExpandedMaterial),e.R7$(),e.Y8G("ngIf",i.isExpandedMaterial)}}function dt(c,_){if(1&c){const t=e.RV6();e.j41(0,"mat-icon",178),e.bIt("click",function(){e.eBV(t);const s=e.XpG(4);return e.Njj(s.togglePropertyExpansion())}),e.EFF(1,"expand_more"),e.k0s()}}function ht(c,_){if(1&c){const t=e.RV6();e.j41(0,"mat-icon",178),e.bIt("click",function(){e.eBV(t);const s=e.XpG(4);return e.Njj(s.togglePropertyExpansion())}),e.EFF(1,"expand_less"),e.k0s()}}function ut(c,_){if(1&c){const t=e.RV6();e.j41(0,"div",180)(1,"div",181),e.EFF(2),e.k0s(),e.j41(3,"div",144)(4,"input",182),e.bIt("change",function(s){const r=e.eBV(t).$implicit,n=e.XpG(5);return e.Njj(n.getCreateInventory(s,r.id,"propertyDashboard"))}),e.k0s()(),e.j41(5,"div",146)(6,"input",145),e.bIt("change",function(s){const r=e.eBV(t).$implicit,n=e.XpG(5);return e.Njj(n.getReadInventory(s,r.id,"propertyDashboard"))}),e.k0s()(),e.j41(7,"div")(8,"input",145),e.bIt("change",function(s){const r=e.eBV(t).$implicit,n=e.XpG(5);return e.Njj(n.getUpdateInventory(s,r.id,"propertyDashboard"))}),e.k0s()(),e.j41(9,"div")(10,"input",145),e.bIt("change",function(s){const r=e.eBV(t).$implicit,n=e.XpG(5);return e.Njj(n.getFullAccessInventory(s,r.id,"propertyDashboard"))}),e.k0s()()()}if(2&c){const t=_.$implicit,i=e.XpG(5);e.AVh("slide",i.isExpandedProperty),e.R7$(2),e.JRh(t.name),e.R7$(2),e.Y8G("checked",t.create),e.R7$(2),e.Y8G("checked",t.read),e.R7$(2),e.Y8G("checked",t.update),e.R7$(2),e.Y8G("checked",t.fullAccess)}}function pt(c,_){if(1&c&&(e.j41(0,"div"),e.DNE(1,ut,11,7,"div",179),e.k0s()),2&c){const t=e.XpG(4);e.R7$(),e.Y8G("ngForOf",t.propertyDashboard)}}function mt(c,_){if(1&c){const t=e.RV6();e.qex(0),e.j41(1,"div",166)(2,"div",143),e.EFF(3,"Property Dashboard"),e.k0s(),e.j41(4,"div",144)(5,"input",183,30),e.bIt("change",function(s){e.eBV(t);const r=e.sdS(12),n=e.XpG(3);return e.Njj(n.clickOnMaterialDashboardModule(s,n.newInventoryArr,"create","inventoryProperty",r.checked))}),e.k0s()(),e.j41(7,"div",146)(8,"input",184,31),e.bIt("change",function(s){e.eBV(t);const r=e.XpG(3);return e.Njj(r.clickOnMaterialDashboardModule(s,r.newInventoryArr,"read","inventoryProperty"))}),e.k0s()(),e.j41(10,"div")(11,"input",185,32),e.bIt("change",function(s){e.eBV(t);const r=e.sdS(6),n=e.XpG(3);return e.Njj(n.clickOnMaterialDashboardModule(s,n.newInventoryArr,"update","inventoryProperty",r.checked))}),e.k0s()(),e.j41(13,"div",186)(14,"input",147,33),e.bIt("change",function(s){e.eBV(t);const r=e.XpG(3);return e.Njj(r.clickOnMaterialDashboardModule(s,r.newInventoryArr,"fullAccess","inventoryProperty"))}),e.k0s(),e.DNE(16,dt,2,0,"mat-icon",177)(17,ht,2,0,"mat-icon",177),e.k0s()(),e.DNE(18,pt,2,1,"div",98),e.bVm()}if(2&c){const t=e.sdS(15),i=e.XpG(3);e.R7$(5),e.Y8G("checked",t.checked),e.R7$(6),e.Y8G("checked",t.checked),e.R7$(5),e.Y8G("ngIf",!i.isExpandedProperty),e.R7$(),e.Y8G("ngIf",i.isExpandedProperty),e.R7$(),e.Y8G("ngIf",i.isExpandedProperty)}}function ft(c,_){if(1&c&&(e.qex(0),e.DNE(1,nt,11,6,"div",170)(2,ct,19,5,"ng-container",98)(3,mt,19,5,"ng-container",98),e.bVm()),2&c){const t=_.$implicit;e.R7$(),e.Y8G("ngIf",!e.lJ4(3,je).includes(t.name.trim())),e.R7$(),e.Y8G("ngIf","Material Category"===t.name),e.R7$(),e.Y8G("ngIf","Property"===t.name)}}function _t(c,_){if(1&c){const t=e.RV6();e.j41(0,"div",117)(1,"h4",118),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.nrm(4,"hr"),e.j41(5,"h4",118),e.EFF(6),e.nI1(7,"translate"),e.k0s(),e.j41(8,"div",43),e.DNE(9,Ye,6,5,"div",119),e.nI1(10,"keyvalue"),e.k0s(),e.j41(11,"div",120)(12,"div",121)(13,"h4",118),e.EFF(14),e.nI1(15,"translate"),e.k0s()()(),e.j41(16,"div",122)(17,"table",123)(18,"tr"),e.nrm(19,"th"),e.j41(20,"th"),e.EFF(21),e.nI1(22,"translate"),e.k0s(),e.j41(23,"th"),e.EFF(24),e.nI1(25,"translate"),e.k0s(),e.j41(26,"th"),e.EFF(27),e.nI1(28,"translate"),e.k0s(),e.j41(29,"th"),e.EFF(30),e.nI1(31,"translate"),e.k0s()(),e.j41(32,"tr",124)(33,"td",125),e.EFF(34),e.nI1(35,"translate"),e.k0s(),e.j41(36,"td",126)(37,"mat-slide-toggle",127,2),e.bIt("change",function(s){e.eBV(t);const r=e.sdS(44),n=e.XpG();return e.Njj(n.clickOnModule(s,n.newMasterArr,"create","master",r.checked))}),e.k0s()(),e.j41(39,"td",126)(40,"mat-slide-toggle",128,3),e.bIt("change",function(s){e.eBV(t);const r=e.XpG();return e.Njj(r.clickOnModule(s,r.newMasterArr,"read"))}),e.k0s()(),e.j41(42,"td",126)(43,"mat-slide-toggle",129,4),e.bIt("change",function(s){e.eBV(t);const r=e.sdS(38),n=e.XpG();return e.Njj(n.clickOnModule(s,n.newMasterArr,"update","master",r.checked))}),e.k0s()(),e.j41(45,"td",126)(46,"mat-slide-toggle",130,5),e.bIt("change",function(s){e.eBV(t);const r=e.XpG();return e.Njj(r.clickOnModule(s,r.newMasterArr,"full","master"))}),e.k0s()()(),e.DNE(48,Je,13,13,"ng-container",131),e.k0s()(),e.j41(49,"div",122)(50,"table",123)(51,"tr"),e.nrm(52,"th"),e.j41(53,"th",132),e.EFF(54),e.nI1(55,"translate"),e.k0s(),e.j41(56,"th",132),e.EFF(57),e.nI1(58,"translate"),e.k0s(),e.j41(59,"th",132),e.EFF(60),e.nI1(61,"translate"),e.k0s(),e.j41(62,"th",132),e.EFF(63),e.nI1(64,"translate"),e.k0s()(),e.j41(65,"tr",124)(66,"td",125),e.EFF(67),e.nI1(68,"translate"),e.k0s(),e.j41(69,"td",126)(70,"mat-slide-toggle",127,6),e.bIt("change",function(s){e.eBV(t);const r=e.sdS(77),n=e.XpG();return e.Njj(n.clickOnModule(s,n.newLeadArr,"create","lead",r.checked))}),e.k0s()(),e.j41(72,"td",126)(73,"mat-slide-toggle",133,7),e.bIt("change",function(s){e.eBV(t);const r=e.XpG();return e.Njj(r.clickOnModule(s,r.newLeadArr,"read"))}),e.k0s()(),e.j41(75,"td",126)(76,"mat-slide-toggle",129,8),e.bIt("change",function(s){e.eBV(t);const r=e.sdS(71),n=e.XpG();return e.Njj(n.clickOnModule(s,n.newLeadArr,"update","lead",r.checked))}),e.k0s()(),e.j41(78,"td",126)(79,"mat-slide-toggle",130,9),e.bIt("change",function(s){e.eBV(t);const r=e.XpG();return e.Njj(r.clickOnModule(s,r.newLeadArr,"full","lead"))}),e.k0s()()(),e.DNE(81,qe,11,6,"tr",131),e.k0s()(),e.j41(82,"div",122)(83,"table",123)(84,"tr"),e.nrm(85,"th"),e.j41(86,"th",132),e.EFF(87),e.nI1(88,"translate"),e.k0s(),e.j41(89,"th",132),e.EFF(90),e.nI1(91,"translate"),e.k0s(),e.j41(92,"th",132),e.EFF(93),e.nI1(94,"translate"),e.k0s(),e.j41(95,"th",132),e.EFF(96),e.nI1(97,"translate"),e.k0s()(),e.j41(98,"tr",124)(99,"td",125),e.EFF(100),e.nI1(101,"translate"),e.k0s(),e.j41(102,"td",126)(103,"mat-slide-toggle",127,10),e.bIt("change",function(s){e.eBV(t);const r=e.sdS(110),n=e.XpG();return e.Njj(n.clickOnModule(s,n.newSaleArr,"create","sale",r.checked))}),e.k0s()(),e.j41(105,"td",126)(106,"mat-slide-toggle",134,11),e.bIt("change",function(s){e.eBV(t);const r=e.XpG();return e.Njj(r.clickOnModule(s,r.newSaleArr,"read"))}),e.k0s()(),e.j41(108,"td",126)(109,"mat-slide-toggle",129,12),e.bIt("change",function(s){e.eBV(t);const r=e.sdS(104),n=e.XpG();return e.Njj(n.clickOnModule(s,n.newSaleArr,"update","sale",r.checked))}),e.k0s()(),e.j41(111,"td",126)(112,"mat-slide-toggle",130,13),e.bIt("change",function(s){e.eBV(t);const r=e.XpG();return e.Njj(r.clickOnModule(s,r.newSaleArr,"full","sale"))}),e.k0s()()(),e.DNE(114,ze,11,5,"tr",131),e.k0s()(),e.DNE(115,Ze,33,18,"div",135),e.j41(116,"div",136)(117,"mat-accordion")(118,"mat-expansion-panel")(119,"mat-expansion-panel-header")(120,"mat-panel-title")(121,"span",137),e.EFF(122," Financial Management"),e.k0s()()(),e.j41(123,"div",138)(124,"div",139),e.EFF(125,"Permissions"),e.k0s(),e.j41(126,"div",140),e.EFF(127,"Create"),e.k0s(),e.j41(128,"div",141),e.EFF(129,"Read"),e.k0s(),e.j41(130,"div",141),e.EFF(131,"Update Delete"),e.k0s(),e.j41(132,"div",141),e.EFF(133,"Full Access"),e.k0s()(),e.j41(134,"div",142)(135,"div",143),e.EFF(136,"All"),e.k0s(),e.j41(137,"div",144)(138,"input",145,14),e.bIt("change",function(s){e.eBV(t);const r=e.XpG();return e.Njj(r.clickOnModule(s,r.newFinanCialArr,"create","financial"))}),e.k0s()(),e.j41(140,"div",146)(141,"input",145,15),e.bIt("change",function(s){e.eBV(t);const r=e.XpG();return e.Njj(r.clickOnModule(s,r.newFinanCialArr,"read","financial"))}),e.k0s()(),e.j41(143,"div")(144,"input",145,16),e.bIt("change",function(s){e.eBV(t);const r=e.XpG();return e.Njj(r.clickOnModule(s,r.newFinanCialArr,"update","financial"))}),e.k0s()(),e.j41(146,"div")(147,"input",147,17),e.bIt("change",function(s){e.eBV(t);const r=e.XpG();return e.Njj(r.clickOnModule(s,r.newFinanCialArr,"full","financial"))}),e.k0s()()(),e.DNE(149,et,12,6,"ng-container",131),e.k0s()()(),e.j41(150,"div",136)(151,"mat-accordion")(152,"mat-expansion-panel")(153,"mat-expansion-panel-header")(154,"mat-panel-title")(155,"span",137),e.EFF(156," Inventory Management "),e.k0s()()(),e.j41(157,"div",138)(158,"div",139),e.EFF(159,"Permissions"),e.k0s(),e.j41(160,"div",140),e.EFF(161,"Create"),e.k0s(),e.j41(162,"div",141),e.EFF(163,"Read"),e.k0s(),e.j41(164,"div",141),e.EFF(165,"Update Delete"),e.k0s(),e.j41(166,"div",141),e.EFF(167,"Full Access"),e.k0s()(),e.j41(168,"div",142)(169,"div",143),e.EFF(170,"All"),e.k0s(),e.j41(171,"div",144)(172,"input",145,18),e.bIt("change",function(s){e.eBV(t);const r=e.sdS(179),n=e.XpG();return e.Njj(n.clickOnModule(s,n.newInventoryArr,"create","inventory",r.checked))}),e.k0s()(),e.j41(174,"div",146)(175,"input",148,19),e.bIt("change",function(s){e.eBV(t);const r=e.XpG();return e.Njj(r.clickOnModule(s,r.newInventoryArr,"read","inventory"))}),e.k0s()(),e.j41(177,"div")(178,"input",145,20),e.bIt("change",function(s){e.eBV(t);const r=e.sdS(173),n=e.XpG();return e.Njj(n.clickOnModule(s,n.newInventoryArr,"update","inventory",r.checked))}),e.k0s()(),e.j41(180,"div")(181,"input",147,21),e.bIt("change",function(s){e.eBV(t);const r=e.XpG();return e.Njj(r.clickOnModule(s,r.newInventoryArr,"full","inventory"))}),e.k0s()()(),e.DNE(183,ft,4,4,"ng-container",131),e.k0s()()()()}if(2&c){const t=e.sdS(47),i=e.sdS(80),s=e.sdS(113),r=e.sdS(139),n=e.sdS(142),o=e.sdS(145),a=e.sdS(148),l=e.sdS(173),u=e.sdS(179),m=e.sdS(182),f=e.XpG();e.R7$(2),e.SpI(" ",e.bMT(3,41,"role.add_role.Permissions")," "),e.R7$(4),e.SpI(" ",e.bMT(7,43,"role.add_role.Module")," "),e.R7$(3),e.Y8G("ngForOf",e.bMT(10,45,f.module)),e.R7$(5),e.SpI(" ",e.bMT(15,47,"role.add_role.Feature_Access:")," "),e.R7$(2),e.Y8G("ngStyle",e.eq3(79,P,f.isMaster?"block":"none")),e.R7$(5),e.JRh(e.bMT(22,49,"role.add_role.Create")),e.R7$(3),e.JRh(e.bMT(25,51,"role.add_role.Read")),e.R7$(3),e.JRh(e.bMT(28,53,"role.add_role.Update")),e.R7$(3),e.JRh(e.bMT(31,55,"role.add_role.Full_Access")),e.R7$(4),e.SpI(" ",e.bMT(35,57,"Offer.All")," "),e.R7$(3),e.Y8G("checked",t.checked),e.R7$(6),e.Y8G("checked",t.checked),e.R7$(5),e.Y8G("ngForOf",f.newMasterArr),e.R7$(),e.Y8G("ngStyle",e.eq3(81,P,f.isLead?"block":"none")),e.R7$(5),e.SpI(" ",e.bMT(55,59,"role.add_role.Create")," "),e.R7$(3),e.SpI(" ",e.bMT(58,61,"role.add_role.Read")," "),e.R7$(3),e.SpI(" ",e.bMT(61,63,"role.add_role.Update")," "),e.R7$(3),e.SpI(" ",e.bMT(64,65,"role.add_role.Full_Access")," "),e.R7$(4),e.SpI(" ",e.bMT(68,67,"Offer.All")," "),e.R7$(3),e.Y8G("checked",i.checked),e.R7$(6),e.Y8G("checked",i.checked),e.R7$(5),e.Y8G("ngForOf",f.newLeadArr),e.R7$(),e.Y8G("ngStyle",e.eq3(83,P,f.isSale?"block":"none")),e.R7$(5),e.SpI(" ",e.bMT(88,69,"role.add_role.Create")," "),e.R7$(3),e.SpI(" ",e.bMT(91,71,"role.add_role.Read")," "),e.R7$(3),e.SpI(" ",e.bMT(94,73,"role.add_role.Update")," "),e.R7$(3),e.SpI(" ",e.bMT(97,75,"role.add_role.Full_Access")," "),e.R7$(4),e.SpI(" ",e.bMT(101,77,"Offer.All")," "),e.R7$(3),e.Y8G("checked",s.checked),e.R7$(6),e.Y8G("checked",s.checked),e.R7$(5),e.Y8G("ngForOf",f.newSaleArr),e.R7$(),e.Y8G("ngIf",f.isCollection),e.R7$(),e.Y8G("ngStyle",e.eq3(85,P,f.isFinancial?"block":"none")),e.R7$(22),e.Y8G("checked",a.checked||r.checked),e.R7$(3),e.Y8G("checked",r.checked||o.checked||n.checked),e.R7$(3),e.Y8G("checked",a.checked||o.checked),e.R7$(5),e.Y8G("ngForOf",f.newFinanCialArr),e.R7$(),e.Y8G("ngStyle",e.eq3(87,P,f.isInventory?"block":"none")),e.R7$(22),e.Y8G("checked",m.checked||l.checked),e.R7$(6),e.Y8G("checked",m.checked||u.checked),e.R7$(5),e.Y8G("ngForOf",f.newInventoryArr)}}let gt=(()=>{class c{constructor(t,i,s,r,n,o,a,l){this.auth=t,this.dialog=i,this.formbuilder=s,this.translateService=r,this.mainService=n,this.route=o,this.toastr=a,this.breakpointObserver=l,this.valueText="",this.hide=!0,this.cityValue="",this.stateValue="",this.countryValue="",this.postalCodeData=[],this.LoginErr="",this.postalError=!1,this.postalMsg="",this.filesToUpload=[],this.putValue="",this.address=[],this.userErr="",this.newerr="",this.departments=[],this.newDepts=[],this.disabledept=[!0],this.disabled=!0,this.isField=!1,this.projectIdIndex=[0],this.isAddDisabled=!1,this.errorMsg2=!1,this.showSelectBox=!0,this.disabledBtn=!0,this.users=[],this.panelOpenStates=!1,this.module={},this.isLead=!1,this.isMaster=!1,this.isCollection=!1,this.isSale=!1,this.isCreate=!1,this.isRead=!1,this.isUpdate=!1,this.isDelete=!1,this.isFullAccess=!1,this.featureArray=[],this.autoSelectIds=[],this.newMasterArr=[],this.newLeadArr=[],this.newCollectionArr=[],this.newSaleArr=[],this.defaultleadArr=[],this.defaultMasterArr=[],this.defaultCollectionArr=[],this.defaultSaleArr=[],this.masterFeature=!1,this.finalfeatureArray=[],this.isExpanded=!1,this.isExpandedMaterial=!1,this.isExpandedProperty=!1,this.isFinancial=!1,this.isInventory=!1,this.newFinanCialArr=[],this.newInventoryArr=[],this.defaultInventoryArr=[],this.defaultFinancialArr=[],this.selectedProjects=[],this.materialDashboard=[],this.checkedPermission=!1,this.propertyDashboard=[],this.enableDisableCheckBox=!0,this.disableRole=!1,this.count=0,this.selectedElementId=[],this.showPermissionDiv=!1,this.nameErrorData={requiredErrorMessage:"Errors_msg.msg90",patternErrorMessage:"Errors_msg.msg94"},this.emailErrorData={requiredErrorMessage:"user.Email_is_required",patternErrorMessage:"Errors_msg.msg95"},this.phoneErrorData={requiredErrorMessage:"user.PhoneRequired",patternErrorMessage:"Errors_msg.msg96"},this.genderErrorData={requiredErrorMessage:"Errors_msg.msg78"},this.passwordErrorData={requiredErrorMessage:"Buttons.You_must_enter_Password",patternErrorMessage:"Buttons.enter_valid_password"},this.projectErrorData={requiredErrorMessage:"Errors_msg.msg43"},this.roleErrorData={requiredErrorMessage:"Errors_msg.msg69"},this.postalErrorData={requiredErrorMessage:"user.Pin_Code_is_required",minLenthErrorMessage:"user.Pin_Code_length"},this.postalLengthError={},this.areaErrorData={requiredErrorMessage:"Errors_msg.msg57"},this.cityErrorData={requiredErrorMessage:"Buttons.Please_enter_pincode_first"},this.addUserForm=this.formbuilder.group({name:["",[b.k0.required,b.k0.pattern(/[a-zA-Z]+\s[a-zA-Z]/)]],email:["",[b.k0.required,b.k0.email,b.k0.pattern("^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,4}$")]],gender:[null,b.k0.required],phone:[null,[b.k0.required,b.k0.pattern("^((\\+91-?)|0)?[0-9]{10}$")]],alternate_phone:[null,b.k0.pattern("^((\\+91-?)|0)?[0-9]{10}$")],role_id:[null,b.k0.required],reporting_user_id:[null],projects:this.formbuilder.array([this.newFields()],b.k0.required),password:[null,[b.k0.required]],address:this.Address,specialOffer:!1})}changeListener(t){console.log(t)}get Address(){return this.formbuilder.group({address:[null,[b.k0.required]],postal_code:[null,[b.k0.required]],city:[null,[b.k0.required]],area:[null,[b.k0.required]],state:[null,[b.k0.required]],country:[null,[b.k0.required]],district:[null,[b.k0.required]]})}openDialog(){this.dialog.open(B.x,{width:"500px",height:"600px",data:{heading:"Select Project or User"}}).afterClosed().subscribe(i=>{this.ngOnInit()})}resetPermission(){this.moduleRes=null,this.features=null,this.module={},this.isMaster=!1,this.isLead=!1,this.isCollection=!1,this.isSale=!1,this.isFinancial=!1,this.isInventory=!1,this.leadFeature=null,this.masterFeature=null,this.collectionFeature=null,this.saleFeature=null,this.financialFeature=null,this.inventoryFeature=null,this.featureArray=[],this.newMasterArr=[],this.newCollectionArr=[],this.newSaleArr=[],this.newFinanCialArr=[],this.newInventoryArr=[]}onChangeParentRole(t){let i=localStorage.getItem("user_info"),s=JSON.parse(i),r=s.id;console.log(s),this.mainService.getRoleUser(r,t.value).subscribe(n=>{let o=n;console.log(o),this.reportingUser=o.roleuser})}onChangeRole(t){this.resetPermission(),this.enableDisableCheckBox=!1,console.log(t.value),this.selectedProjects=this.projects.filter(s=>s.selected).map(s=>s.id.toString()),this.mainService.checkRoleProjectsPermission({role_id:t.value,projects:this.selectedProjects}).subscribe(s=>{console.log(s.success),1==s.success?(this.mainService.getRole(t.value).subscribe(r=>{this.moduleRes=r.role.Module_Permission,r.role.individual_permission_payload&&(r.role.individual_permission_payload.propertySelectedAll||r.role.individual_permission_payload.propertySelectedId.length)&&(this.propertyResult={propertyIdsForPermission:r.role.individual_permission_payload.propertySelectedId,deSelectedProperty:r.role.individual_permission_payload.propertyUnselectedId,checkedAllProperty:r.role.individual_permission_payload.propertySelectedAll,queryParamData:{project:r.role.individual_permission_payload.project,projectBlocksTypes:r.role.individual_permission_payload.projectBlocksTypes,propertyFeature:r.role.individual_permission_payload.propertyFeature,propertyType:r.role.individual_permission_payload.propertyType,status:r.role.individual_permission_payload.status,subStatus:r.role.individual_permission_payload.subStatus,category:r.role.individual_permission_payload.tag},search:r.role.individual_permission_payload.search,reset:!1},this.defaultPropertyResult={propertyIdsForPermission:r.role.individual_permission_payload.propertySelectedId,deSelectedProperty:r.role.individual_permission_payload.propertyUnselectedId,checkedAllProperty:r.role.individual_permission_payload.propertySelectedAll,queryParamData:{project:r.role.individual_permission_payload.project,projectBlocksTypes:r.role.individual_permission_payload.projectBlocksTypes,propertyFeature:r.role.individual_permission_payload.propertyFeature,propertyType:r.role.individual_permission_payload.propertyType,status:r.role.individual_permission_payload.status,subStatus:r.role.individual_permission_payload.subStatus,category:r.role.individual_permission_payload.tag},search:r.role.individual_permission_payload.search,reset:!1}),this.features=r.role.Feature_Access_Permissions,this.module={lead:this.moduleRes.lead,master:this.moduleRes.master,sale:this.moduleRes.sale,financial_management:this.moduleRes.financial_management,inventory_module:this.moduleRes.inventory_module},1==this.module.master&&(this.isMaster=!0),1==this.module.lead&&(this.isLead=!0),1==this.module.collection&&(this.isCollection=!0),1==this.module.sale&&(this.isSale=!0),1==this.module.financial_management&&(this.isFinancial=!0),1==this.module.inventory_module&&(this.isInventory=!0),this.leadFeature=this.features.filter(n=>"Lead"==n.Feature.Modules[0].name),this.masterFeature=this.features.filter(n=>"Master"==n.Feature.Modules[0].name),this.collectionFeature=this.features.filter(n=>"Collection"==n.Feature.Modules[0].name),this.saleFeature=this.features.filter(n=>"Sale"==n.Feature.Modules[0].name),this.financialFeature=this.features.filter(n=>"financial management"==n.Feature.Modules[0].name),this.inventoryFeature=this.features.filter(n=>"Inventory Module"==n.Feature.Modules[0].name),this.mainService.getModules().subscribe(n=>{this.moduleRes=n,console.log(this.moduleRes),this.modules=this.moduleRes.modules;const o=this.modules.filter(h=>"Master"==h.name),a=this.modules.filter(h=>"Lead"==h.name),l=this.modules.filter(h=>"Sale"==h.name),u=this.modules.filter(h=>"financial management"==h.name);this.modules.filter(h=>"Inventory Module"==h.name).map(h=>h.Features)[0].forEach(h=>{this.newInventoryArr.push({id:h.id,name:h.name,create:this.isCreate,read:this.isRead,update:this.isUpdate,fullAccess:this.isFullAccess,moduleName:"Inventory Module"}),this.defaultInventoryArr.push({id:h.id,name:h.name,create:this.isCreate,read:this.isRead,update:this.isUpdate,fullAccess:this.isFullAccess,moduleName:"Inventory Module"})}),this.newInventoryArr.forEach(h=>this.inventoryFeature.forEach(A=>{h.name==A.Feature.name&&(h.create=A.create,h.read=A.read,h.update=A.update,h.delete=A.delete,h.fullAccess=A.full_access)}));const F=["Purchases","Consumptions","Purchase Voucher","Consumption Voucher"];let C=!0,d=!0;console.log(this.newInventoryArr),this.newInventoryArr=this.newInventoryArr.map(h=>(F.includes(h.name)&&(h.create&&(C=!1),h.update&&(d=!1)),"Backdated Entries"==h.name&&"Inventory Module"==h.moduleName&&(h.isDisabledCreate=C,h.isDisabledUpdate=d,h.isDisabledFullaccess=!(!C&&!d)),h)),this.materialDashboard=this.newInventoryArr.filter(h=>"Purchases"===h.name||"Consumptions"===h.name),this.propertyDashboard=this.newInventoryArr.filter(h=>["Reserve - Stock","For Sale - Stock","Booked","Sold"].includes(h.name.trim())),this.materialDashboard.forEach(h=>{"Purchases"===h.name&&(1==h.read&&(h.readCheckbox=!0),1==h.update&&(h.updateCheckbox=!0),1==h.fullAccess&&(h.fullAccessCheckbox=!0))});const y=this.newInventoryArr.filter(h=>!["Reserve - Stock","For Sale - Stock","Booked","Sold","Purchases","Consumptions"].includes(h.name)).every(h=>h.create),p=this.newInventoryArr.every(h=>h.update),Wt=(this.newInventoryArr.every(h=>h.read),this.newInventoryArr.every(h=>"Reserve - Stock"===h.name||"For Sale - Stock"===h.name||"Booked"===h.name||"Sold"===h.name||"Purchases"===h.name||"Consumptions"===h.name?h.read&&h.update:h.read&&h.update&&h.create));console.log("allUpdatePermissionsTrue"),console.log(p),setTimeout(()=>{Wt&&(this.allFullAccressForInventory.nativeElement.checked=!0,this.readFullTagInventory.nativeElement.checked=!0),y?(this.createReadAccessInventory.nativeElement.checked=!0,this.readFullTagInventory.nativeElement.checked=!0):(this.createReadAccessInventory.nativeElement.checked=!1,1!=p&&(this.readFullTagInventory.nativeElement.checked=!1)),p?(this.updateReadAccessInventory.nativeElement.checked=!0,this.readFullTagInventory.nativeElement.checked=!0):(this.updateReadAccessInventory.nativeElement.checked=!1,1!=y&&(this.readFullTagInventory.nativeElement.checked=!1));const h=this.materialDashboard.every(E=>E.read&&E.update&&E.delete);h?(this.materialDashboardFullAccess.nativeElement.checked=!0,this.materialDashboardReadAccess.nativeElement.checked=!0):(this.materialDashboardFullAccess.nativeElement.checked=!1,this.materialDashboardReadAccess.nativeElement.checked=!1),h?(this.materialDashboardFullAccess.nativeElement.checked=!0,this.materialDashboardReadAccess.nativeElement.checked=!0):(this.materialDashboardFullAccess.nativeElement.checked=!1,this.materialDashboardReadAccess.nativeElement.checked=!1),this.propertyDashboard.every(E=>E.read&&E.update&&E.delete)?(this.propertyDashboardFullAccess.nativeElement.checked=!0,this.propertyDashboardReadAccess.nativeElement.checked=!0):(this.propertyDashboardFullAccess.nativeElement.checked=!1,this.propertyDashboardReadAccess.nativeElement.checked=!1)},1e3),u.map(h=>h.Features)[0].forEach(h=>{this.newFinanCialArr.push({id:h.id,name:h.name,create:this.isCreate,read:this.isRead,update:this.isUpdate,fullAccess:this.isFullAccess,moduleName:"financial management"}),this.defaultFinancialArr.push({id:h.id,name:h.name,create:this.isCreate,read:this.isRead,update:this.isUpdate,fullAccess:this.isFullAccess,moduleName:"financial management"})}),this.newFinanCialArr.forEach(h=>this.financialFeature.forEach(A=>{h.name==A.Feature.name&&(h.create=A.create,h.read=A.read,h.update=A.update,h.delete=A.delete,h.fullAccess=A.full_access)}));const Qt=["Received Voucher","Payment Voucher","Contra Voucher","Expense Voucher","Journal Voucher","All Transactions"];let S=!0;this.newFinanCialArr=this.newFinanCialArr.map(h=>(Qt.includes(h.name)&&(h.create||h.read||h.update||h.delete)&&(S=!1),"Backdated Entries"==h.name&&"financial management"==h.moduleName&&(h.isDisabled=S,console.log("check toggle",S)),h));const Kt=a.map(h=>h.Features);this.newLeadArr=[],this.defaultleadArr=[],Kt[0].forEach(h=>{this.newLeadArr.push({id:h.id,name:h.name,create:this.isCreate,read:this.isRead,delete:this.isDelete,update:this.isUpdate,fullAccess:this.isFullAccess}),this.defaultleadArr.push({id:h.id,name:h.name,create:this.isCreate,read:this.isRead,delete:this.isDelete,update:this.isUpdate,fullAccess:this.isFullAccess})}),this.newLeadArr.forEach(h=>this.leadFeature.forEach(A=>{h.name==A.Feature.name&&(h.create=A.create,h.read=A.read,h.update=A.update,h.delete=A.delete,h.fullAccess=A.fullAccess)}));const te=l.map(h=>h.Features);console.log(te),this.newSaleArr=[],this.defaultSaleArr=[],te[0].forEach(h=>{this.newSaleArr.push({id:h.id,name:h.name,create:this.isCreate,read:this.isRead,delete:this.isDelete,update:this.isUpdate,fullAccess:this.isFullAccess}),this.defaultSaleArr.push({id:h.id,name:h.name,create:this.isCreate,read:this.isRead,delete:this.isDelete,update:this.isUpdate,fullAccess:this.isFullAccess})}),this.newSaleArr.forEach(h=>this.saleFeature.forEach(A=>{h.name==A.Feature.name&&(h.create=A.create,h.read=A.read,h.update=A.update,h.delete=A.delete,h.fullAccess=A.fullAccess)}));const es=o.map(h=>h.Features);this.newMasterArr=[],this.defaultMasterArr=[],es[0].forEach(h=>{this.newMasterArr.push({id:h.id,name:h.name,create:this.isCreate,read:this.isRead,delete:this.isDelete,update:this.isUpdate,fullAccess:this.isFullAccess}),this.defaultMasterArr.push({id:h.id,name:h.name,create:this.isCreate,read:this.isRead,delete:this.isDelete,update:this.isUpdate,fullAccess:this.isFullAccess})}),this.newMasterArr.forEach(h=>this.masterFeature.forEach(A=>{h.name==A.Feature.name&&(h.create=A.create,h.read=A.read,h.update=A.update,h.delete=A.delete,h.fullAccess=A.fullAccess)})),this.newCollectionArr=[],this.defaultCollectionArr=[],this.featureArray=this.newLeadArr.concat(this.newMasterArr).concat(this.newCollectionArr).concat(this.newSaleArr).concat(this.newFinanCialArr).concat(this.newInventoryArr),console.log(this.featureArray)})}),setTimeout(()=>{this.newFinanCialArr.every(l=>"Only Bank Entries"==l.name||l.read&&l.update&&l.delete&&l.create)&&(this.allFullAccressForfinancial.nativeElement.checked=!0,this.readFullTag5.nativeElement.checked=!0),this.newFinanCialArr.every(l=>"All Transactions"===l.name||"Cash Health Report"===l.name||"Cheque Statement"===l.name||"Customer Payment Status"===l.name||"Sales"===l.name||"Received From Customers"===l.name||"Only Bank Entries"===l.name||"Receivables From Customers"===l.name||l.create)&&(this.createReadAccess4.nativeElement.checked=!0,this.readFullTag5.nativeElement.checked=!0);const o=this.newFinanCialArr.every(l=>"Cash Health Report"===l.name||"Customer Payment Status"===l.name||"Sales"===l.name||"Only Bank Entries"===l.name||"Receivables From Customers"===l.name||l.update);console.log(o),console.log(this.newFinanCialArr),o&&(this.updateReadAccess4.nativeElement.checked=!0,this.readFullTag5.nativeElement.checked=!0),this.newFinanCialArr.every(l=>l.read)&&(this.readFullTag5.nativeElement.checked=!0)},2e3)):this.openErrorDialog(s.message)})}getFeature(t,i){this.moduleName=t,0==i.target.checked&&"lead"==this.moduleName?this.isLead=!1:0==i.target.checked&&"master"==this.moduleName?this.isMaster=!1:1==i.target.checked&&"lead"==this.moduleName?this.isLead=!0:1==i.target.checked&&"master"==this.moduleName?this.isMaster=!0:0==i.target.checked&&"collection"==this.moduleName?this.isCollection=!1:1==i.target.checked&&"sale"==this.moduleName?this.isSale=!0:0==i.target.checked&&"sale"==this.moduleName?this.isSale=!1:1==i.target.checked&&"financial_management"==this.moduleName?this.isFinancial=!0:0==i.target.checked&&"financial_management"==this.moduleName?this.isFinancial=!1:1==i.target.checked&&"inventory_module"==this.moduleName?this.isInventory=!0:0==i.target.checked&&"inventory_module"==this.moduleName&&(this.isInventory=!1)}handleLeadChecked(t,i,s=[],r){15==i&&(console.log("check funtion first"),this.featureArray.map(r?n=>(!n[t]&&s.includes(n.id)&&(n[t]=!0,this.autoSelectIds.push(n.id),console.log("check lead checked")),n):n=>(s.includes(n.id)&&(n[t]=!1,this.autoSelectIds=this.autoSelectIds.filter(o=>o.id!==n.id)),n)))}handleCustomerChecked(t,i,s=[],r){13==i&&this.featureArray.map(r?n=>(!n[t]&&s.includes(n.id)&&(n[t]=!0,this.autoSelectIds.push(n.id),console.log("check cusotmer checked"),this.finalfeatureArray=this.getArrayFromFatures(this.finalfeatureArray,n)),n):n=>(s.includes(n.id)&&(n[t]=!1,this.autoSelectIds=this.autoSelectIds.filter(o=>o.id!==n.id)),n))}handleSaleChecked(t,i,s=[],r){18==i&&this.featureArray.map(r?n=>(!n[t]&&s.includes(n.id)&&(n[t]=!0,this.autoSelectIds.push(n.id)),n):n=>(s.includes(n.id)&&(n[t]=!1,this.autoSelectIds=this.autoSelectIds.filter(o=>o.id!==n.id)),n))}getArrayFromFatures(t,i){let r,s=!1;for(let n=0;n<t.length;n++)t[n].id===i.id&&(s=!0,r=n);return s&&t.splice(r,1),!s&&t.push({id:i.id,name:i.name,create:i.create,read:i.read}),t}handleCustomPermission(){let t=[];this.featureArray.forEach(i=>{if(this.features.forEach(s=>{if(i.id==s.Feature.id){let r=JSON.parse(JSON.stringify(i));delete r.create,delete r.read,delete r.update,delete r.delete,i.found=!0,i.create!=s.create&&(r.isUpdated=!0,r.create=i.create),i.update!=s.update&&(r.isUpdated=!0,r.update=i.update),i.delete!=s.delete&&(r.isUpdated=!0,r.delete=i.delete),i.read!=s.read&&(r.isUpdated=!0,r.read=i.read),r.isUpdated&&t.push(r)}}),!i.found){console.log("in item not found");let s=JSON.parse(JSON.stringify(i));delete s.create,delete s.read,delete s.update,delete s.delete,i.create&&(s.isUpdated=!0,s.create=i.create),i.update&&(s.isUpdated=!0,s.update=i.update),i.delete&&(s.isUpdated=!0,s.delete=i.delete),i.read&&(s.isUpdated=!0,s.read=i.read),s.isUpdated&&t.push(s)}})}getCreate(t,i,s){this.handleLeadChecked("create",i,[14],t.checked),this.handleLeadChecked("read",i,[1,3,5,8,4,6,14,7,15,19,12],t.checked),this.handleCustomerChecked("read",i,[1,4,3,7,6,8,9,10,11,12,13,14,15,16,17],t.checked),this.handleCustomerChecked("create",i,[10,11,12,14,15,16,17],t.checked),this.isCreate=t.checked,this.isRead=t.checked,this.featureArray.map(r=>(r.id==i&&(r.create=this.isCreate,r.read=this.isRead,this.finalfeatureArray=this.getArrayFromFatures(this.finalfeatureArray,r),console.log(this.finalfeatureArray)),r))}getCreateFinancial(t,i){const s=t.target.checked;this.isCreate=s,this.isRead=s;const r=["Received Voucher","Payment Voucher","Contra Voucher","Expense Voucher","Journal Voucher"];let n=!0;this.featureArray.map(d=>(d.id==i&&(s?(d.create=this.isCreate,d.read=this.isRead,1==d.update&&(d.fullAccess=!0)):(d.create=this.isCreate,d.fullAccess=!1,1!=d.update&&(d.read=this.isRead,this.readFullTag5.nativeElement.checked=s),this.createReadAccess4.nativeElement.checked=s,this.allFullAccressForfinancial.nativeElement.checked=s)),r.includes(d.name)&&(d.create||d.read||d.update||d.delete)&&(n=!1),d)),this.newFinanCialArr.every(d=>d.create&&d.read&&d.update&&d.delete);const a=this.newFinanCialArr.every(d=>d.update),l=this.newFinanCialArr.every(d=>d.create);l&&(this.createReadAccess4.nativeElement.checked=!0),a&&(this.updateReadAccess4.nativeElement.checked=!0),a&&l&&(this.allFullAccressForfinancial.nativeElement.checked=!0);const u=this.featureArray.findIndex(d=>"Received Voucher"===d.name),m=this.featureArray.findIndex(d=>"Payment Voucher"===d.name),f=this.featureArray.findIndex(d=>"Contra Voucher"===d.name),F=this.featureArray.findIndex(d=>"Expense Voucher"===d.name),C=this.featureArray.findIndex(d=>"Journal Voucher"===d.name);this.featureArray=this.featureArray.map(d=>("Backdated Entries"==d.name&&"financial management"==d.moduleName&&(d.isDisabled=n,console.log("check toggle",n),this.featureArray[u].create||this.featureArray[m].create||this.featureArray[f].create||this.featureArray[F].create||this.featureArray[C].create||(d.create=!1)),d))}getRead(t,i){console.log("in read"),this.isRead=t.checked,this.featureArray.map(s=>(s.id==i&&(s.read=this.isRead),s))}getUpdate(t,i){this.handleLeadChecked("read",i,[1,3,5,8,4,6,14,7,15,19,12],t.checked),this.handleLeadChecked("create",i,[14],t.checked),this.isUpdate=t.checked,this.isRead=t.checked,this.featureArray.map(s=>(s.id==i&&(s.update=this.isUpdate,s.read=this.isRead),s))}getDelete(t,i){this.isDelete=t.checked,this.featureArray.map(s=>(s.id==i&&(s.delete=this.isDelete),s))}getFullAccess(t,i){this.isFullAccess=t.checked,this.featureArray.map(s=>(s.id==i&&(s.fullAccess=this.isFullAccess,s.create=this.isFullAccess,s.read=this.isFullAccess,s.update=this.isFullAccess,s.delete=this.isFullAccess),s))}getFullAccessFinancial(t,i){this.isFullAccess=t.target.checked;const r=["Received Voucher","Payment Voucher","Contra Voucher","Expense Voucher","Journal Voucher","All Transactions"];let n=!0;this.featureArray.map(a=>(a.id==i&&(a.fullAccess=this.isFullAccess,a.create=this.isFullAccess,a.read=this.isFullAccess,a.update=this.isFullAccess,a.delete=this.isFullAccess),console.log(a),r.includes(a.name)&&(a.create||a.read||a.update||a.delete)&&(n=!1),a)),this.featureArray=this.featureArray.map(a=>("Backdated Entries"==a.name&&"financial management"==a.moduleName&&(a.isDisabled=n,1==n&&(a.fullAccess=!1,a.create=!1,a.read=!1,a.update=!1,a.delete=!1),console.log("check toggle",n)),a)),this.newFinanCialArr.every(a=>"Only Bank Entries"==a.name||a.create&&a.read&&a.update&&a.delete)?(this.allFullAccressForfinancial.nativeElement.checked=!0,this.readFullTag5.nativeElement.checked=!0):(this.allFullAccressForfinancial.nativeElement.checked=!1,this.readFullTag5.nativeElement.checked=!1,this.updateReadAccess4.nativeElement.checked=!1,this.createReadAccess4.nativeElement.checked=!1),67==i&&this.handlePurchases(t,"full access")}clickOnModule(t,i,s,r="",n=!1,o=15){if("read"!=s&&"master"==r)this.readFullTag.checked=t.checked||n;else if("read"!=s&&"lead"==r)this.readFullTag1.checked=t.checked||n;else if("read"!=s&&"collection"==r)this.readFullTag2.checked=t.checked||n;else if("read"!=s&&"sale"==r)this.readFullTag3.checked=t.checked||n;else if("read"!=s&&"financial"==r);else if("read"!=s&&"inventory"==r){const a=t.target.checked;console.log(a,"isChecked"),this.readFullTagInventory.nativeElement.checked=a||n}if("create"==s&&"master"==r)this.handleCustomerChecked("read",13,[1,4,3,7,6,8,9,10,11,12,13,14,15,16,17],t.checked),this.handleCustomerChecked("create",13,[10,11,12,14,15,16,17],t.checked),i.map(a=>{console.log(a),a.create=t.checked,1!=a.update&&(a.read=t.checked);const l=this.featureArray.findIndex(u=>"Properties"===u.name);this.propertyResult&&(this.featureArray[l].create=!1,this.featureArray[l].update=!1,this.featureArray[l].read=!1,this.featureArray[l].full=!1),console.log("first")});else if("create"==s&&"lead"==r)this.handleLeadChecked("create",15,[14],t.checked),this.handleLeadChecked("read",15,[1,3,5,8,4,6,14,7,15,19,12],t.checked),i.map(a=>{a.create=t.checked,1!=a.update&&(a.read=t.checked),console.log("first")});else if("create"==s&&"sale"==r)this.handleSaleChecked("read",18,[1,4,3,5,7,6,8,9,10,11,12,13,14,15,16,17,19],t.checked),this.handleSaleChecked("create",18,[10,11,12,14,15,16,17],t.checked),i.map(a=>{a.create=t.checked,1!=a.update&&(a.read=t.checked),console.log("first")});else if("create"==s&&"collection"==r)i.map(a=>{a.create=t.checked,1!=a.update&&(a.read=t.checked),console.log("first")});else if("create"==s&&"financial"==r){const a=t.target.checked;i.map(l=>{l.create=a,0==a&&(l.fullAccess=a,this.allFullAccressForfinancial.nativeElement.checked=a),this.updateReadAccess4.nativeElement.checked||(l.read=a,this.readFullTag5.nativeElement.checked=a),"Backdated Entries"==l.name&&"financial management"==l.moduleName&&(l.isDisabled=1!=l.update&&1!=l.create)})}else if("create"==s&&"inventory"==r){const a=t.target.checked;i.map(l=>{l.create=a,0==a&&(l.fullAccess=a,this.allFullAccressForInventory.nativeElement.checked=a),this.materialDashboardCreateAccess.nativeElement.checked=a,this.propertyDashboardCreateAccess.nativeElement.checked=a,1!=l.update&&(l.read=a,this.materialDashboardReadAccess.nativeElement.checked=a,this.propertyDashboardReadAccess.nativeElement.checked=a),"Backdated Entries"==l.name&&"Inventory Module"==l.moduleName&&(1==l.create?l.isDisabledCreate=!1:(l.isDisabledCreate=!0,l.isDisabledFullaccess=!0))}),this.materialDashboard.map(l=>{l.create=a,1!=l.update&&(l.read=a)}),this.propertyDashboard.map(l=>{l.create=a,1!=l.update&&(l.read=a)})}else if("update"==s&&"inventory"==r){const a=t.target.checked;i.map(l=>{l.update=a,l.delete=a,this.materialDashboardUpdateAccess.nativeElement.checked=a,this.propertyDashboardUpdateAccess.nativeElement.checked=a,l.create=a,l.read=a,l.fullAccess=a,this.materialDashboardReadAccess.nativeElement.checked=a,this.propertyDashboardReadAccess.nativeElement.checked=a,this.materialDashboardFullAccess.nativeElement.checked=a,this.propertyDashboardFullAccess.nativeElement.checked=a,this.allFullAccressForInventory.nativeElement.checked=a,this.readFullTagInventory.nativeElement.checked=a,this.createReadAccessInventory.nativeElement.checked=a,console.log("second"),"Backdated Entries"==l.name&&"Inventory Module"==l.moduleName&&(1==l.update?(l.isDisabledUpdate=!1,l.isDisabledCreate=!1,l.isDisabledFullaccess=!1):(l.isDisabledUpdate=!0,l.isDisabledCreate=!0,l.isDisabledFullaccess=!0))}),this.materialDashboard.map(l=>{l.update=a,l.delete=a,l.create=a,l.read=a,l.fullAccess=a,console.log("second")}),this.propertyDashboard.map(l=>{l.update=a,l.delete=a,l.create=a,l.read=a,l.fullAccess=a,console.log("second")})}else if("update"==s&&"financial"==r){const a=t.target.checked;i.map(l=>{("Only Bank Entries"!=l.name||0==a)&&(l.update=a,l.delete=a,l.create=a,l.read=a,l.fullAccess=a),"Backdated Entries"==l.name&&"financial management"==l.moduleName&&(l.isDisabled=1!=l.update&&1!=l.create)}),this.allFullAccressForfinancial.nativeElement.checked=a,this.createReadAccess4.nativeElement.checked=a,this.updateReadAccess4.nativeElement.checked=a,this.readFullTag5.nativeElement.checked=a,this.handlePurchases(t,"update")}else if("update"==s){if(i.map(a=>{console.log(a),a.update=t.checked,1!=a.create&&(a.read=t.checked),console.log("second")}),"master"==r){const a=this.featureArray.findIndex(l=>"Properties"===l.name);this.propertyResult&&(this.featureArray[a].create=!1,this.featureArray[a].update=!1,this.featureArray[a].read=!1,this.featureArray[a].full=!1)}}else if("full"==s&&"master"==r){this.handleCustomerChecked("read",13,[1,4,3,7,6,8,9,10,11,12,13,14,15,16,17],t.checked),this.handleCustomerChecked("create",13,[10,11,12,14,15,16,17],t.checked),i.map(l=>{l[s]=t.checked,l.create=t.checked,l.read=t.checked,l.update=t.checked,l.fullAccess=t.checked,console.log("Third")});const a=this.featureArray.findIndex(l=>"Properties"===l.name);this.propertyResult&&(this.featureArray[a].create=!1,this.featureArray[a].update=!1,this.featureArray[a].read=!1,this.featureArray[a].full=!1)}else if("full"==s&&"lead"==r)this.handleLeadChecked("create",15,[14],t.checked),this.handleLeadChecked("read",15,[1,3,5,8,4,6,14,7,15,19,12],t.checked),i.map(a=>{a[s]=t.checked,a.create=t.checked,a.read=t.checked,a.update=t.checked,console.log("Third")});else if("full"==s&&"collection"==r)i.map(a=>{a[s]=t.checked,a.create=t.checked,a.read=t.checked,a.update=t.checked,console.log("Third")});else if("full"==s&&"sale"==r)this.handleSaleChecked("read",18,[1,4,3,5,7,6,8,9,10,11,12,13,14,15,16,17,19],t.checked),this.handleSaleChecked("create",18,[10,11,12,14,15,16,17],t.checked),i.map(a=>{a[s]=t.checked,a.create=t.checked,a.read=t.checked,a.update=t.checked,console.log("Third")});else if("full"==s&&"financial"==r){const a=t.target.checked;i.map(l=>{"Only Bank Entries"!=l.name?(l.fullAccess=a,l.create=a,l.read=a,l.update=a,l.delete=a):0==a&&(l.update=a,l.delete=a,l.create=a,l.read=a,l.fullAccess=a),"Backdated Entries"==l.name&&"financial management"==l.moduleName&&(l.isDisabled=1!=a)}),a||(this.updateReadAccess4.nativeElement.checked=a,this.readFullTag5.nativeElement.checked=a,this.createReadAccess4.nativeElement.checked=a),this.handlePurchases(t,"full access")}else if("full"==s&&"inventory"==r){const a=t.target.checked;this.materialDashboardFullAccess.nativeElement.checked=a,this.materialDashboardReadAccess.nativeElement.checked=a,this.propertyDashboardFullAccess.nativeElement.checked=a,this.propertyDashboardReadAccess.nativeElement.checked=a,i.map(l=>{l.fullAccess=a,l.create=a,l.read=a,l.update=a,l.delete=a,"Backdated Entries"==l.name&&"Inventory Module"==l.moduleName&&(1==a?(l.isDisabledCreate=!1,l.isDisabledUpdate=!1,l.isDisabledFullaccess=!1):(l.isDisabledCreate=!0,l.isDisabledUpdate=!0,l.isDisabledFullaccess=!0))}),this.materialDashboard.map(l=>{l.fullAccess=a,l.create=a,l.read=a,l.update=a,l.delete=a}),this.propertyDashboard.map(l=>{l.fullAccess=a,l.create=a,l.read=a,l.update=a,l.delete=a}),a||(this.updateReadAccessInventory.nativeElement.checked=a,this.createReadAccessInventory.nativeElement.checked=a)}else if("inventory"==r){const a=t.target.checked;i.map(l=>{a?(l[s]=a,"Backdated Entries"==l.name&&"Inventory Module"==l.moduleName&&(l.read=!1),this.materialDashboardReadAccess.nativeElement.checked=a||n,this.propertyDashboardReadAccess.nativeElement.checked=a||n,console.log("Fourth")):(this.allFullAccressForInventory.nativeElement.checked=a,this.materialDashboardFullAccess.nativeElement.checked=a,this.propertyDashboardFullAccess.nativeElement.checked=a,this.materialDashboardReadAccess.nativeElement.checked=a,this.propertyDashboardReadAccess.nativeElement.checked=a,this.createReadAccessInventory.nativeElement.checked=a,this.updateReadAccessInventory.nativeElement.checked=a,l.fullAccess=a,l.create=a,l.read=a,l.update=a,l.delete=a)}),this.materialDashboard.map(l=>{l[s]=a,console.log("Fourth")}),this.propertyDashboard.map(l=>{l[s]=a,console.log("Fourth")})}else if("financial"==r){const a=t.target.checked;i.map(l=>{a?(l.read=a,console.log("Fourth"),"Backdated Entries"==l.id&&"financial management"==l.moduleName&&(l.read=!1)):(this.allFullAccressForfinancial.nativeElement.checked=a,this.createReadAccess4.nativeElement.checked=a,this.updateReadAccess4.nativeElement.checked=a,l.fullAccess=a,l.create=a,l.read=a,l.update=a,l.delete=a)}),this.handlePurchases(t,"read")}else{const a=t.target.checked;if(i.map(l=>{l[s]=a,l.fullAccess=a,l.create=a,l.read=a,l.update=a,l.delete=a}),"masterFull"==r&&(this.propertyResult=null),"master"==r){const l=this.featureArray.findIndex(u=>"Properties"===u.name);this.propertyResult&&(this.featureArray[l].create=!1,this.featureArray[l].update=!1,this.featureArray[l].read=!1,this.featureArray[l].full=!1)}}}getReadFinancial(t,i,s){const r=t.target.checked;this.isRead=r;let n=!0;const o=["Received Voucher","Payment Voucher","Contra Voucher","Expense Voucher","Journal Voucher","All Transactions"],a=["Cash Health Report","Customer Payment Status","Sales","Receivables From Customers"],l=["All Transactions","Cheque Statement","Received From Customers"];this.featureArray.map(k=>(k.id==i&&(r?(k.read=this.isRead,1==k.create&&1==k.update&&(k.fullAccess=!0),a.includes(k.name)&&(k.fullAccess=!0)):(k.read=this.isRead,k.fullAccess=!1,1==k.create&&(k.create=!1),1==k.update&&(k.update=!1))),o.includes(k.name)&&(k.create||k.update)&&(n=!1),k));const u=this.newFinanCialArr.every(k=>{}),m=this.newFinanCialArr.every(k=>k.read),f=this.newFinanCialArr.every(k=>k.update);a.includes(s)||l.includes(s)?l.includes(s)?(f&&(this.updateReadAccess4.nativeElement.checked=!0),u?(this.readFullTag5.nativeElement.checked=!0,this.createReadAccess4.nativeElement.checked=!0):m&&(this.readFullTag5.nativeElement.checked=!0),this.createReadAccess4.nativeElement.checked&&this.updateReadAccess4.nativeElement.checked&&(this.allFullAccressForfinancial.nativeElement.checked=!0),r||(this.readFullTag5.nativeElement.checked=!1,this.allFullAccressForfinancial.nativeElement.checked=!1,this.updateReadAccess4.nativeElement.checked=!1)):(f&&(this.updateReadAccess4.nativeElement.checked=!0),u?(this.readFullTag5.nativeElement.checked=!0,this.createReadAccess4.nativeElement.checked=!0):m&&(this.readFullTag5.nativeElement.checked=!0),this.createReadAccess4.nativeElement.checked&&this.updateReadAccess4.nativeElement.checked&&(this.allFullAccressForfinancial.nativeElement.checked=!0),r||(this.readFullTag5.nativeElement.checked=!1,this.allFullAccressForfinancial.nativeElement.checked=!1)):(u?(this.readFullTag5.nativeElement.checked=!0,this.createReadAccess4.nativeElement.checked=!0):(this.readFullTag5.nativeElement.checked=!1,this.createReadAccess4.nativeElement.checked=!1,this.updateReadAccess4.nativeElement.checked=!1,this.allFullAccressForfinancial.nativeElement.checked=!1),this.readFullTag5.nativeElement.checked=!!m);const F=this.featureArray.findIndex(k=>"Received Voucher"===k.name),C=this.featureArray.findIndex(k=>"Payment Voucher"===k.name),d=this.featureArray.findIndex(k=>"Contra Voucher"===k.name),g=this.featureArray.findIndex(k=>"Expense Voucher"===k.name),y=this.featureArray.findIndex(k=>"Journal Voucher"===k.name),p=this.featureArray.findIndex(k=>"All Transactions"===k.name);this.featureArray=this.featureArray.map(k=>("Backdated Entries"==k.name&&"financial management"==k.moduleName&&(k.isDisabled=n,console.log("check toggle",n),!this.featureArray[F].create&&!this.featureArray[C].create&&!this.featureArray[d].create&&!this.featureArray[g].create&&!this.featureArray[y].create&&(k.create=!1,k.fullAccess=!1),!this.featureArray[F].update&&!this.featureArray[C].update&&!this.featureArray[d].update&&!this.featureArray[g].update&&!this.featureArray[y].update&&!this.featureArray[p].update&&(k.update=!1,k.fullAccess=!1)),k)),"All Transactions"==s&&this.handlePurchases(t,"read")}getUpdateFinancial(t,i,s){const r=t.target.checked;this.isUpdate=r,this.isRead=r;const n=["Received Voucher","Payment Voucher","Contra Voucher","Expense Voucher","Journal Voucher","All Transactions"];let a=!0;this.featureArray.map(g=>(g.id==i&&(r?(g.update=this.isUpdate,g.delete=this.isUpdate,g.read=this.isRead,g.create=!0,g.fullAccess=!0):(g.update=this.isUpdate,g.delete=this.isUpdate,g.fullAccess=!1,g.create=!1,g.read=this.isRead)),n.includes(g.name)&&(g.create||g.read||g.update||g.delete)&&(a=!1),g));const l=this.featureArray.findIndex(g=>"Received Voucher"===g.name),u=this.featureArray.findIndex(g=>"Payment Voucher"===g.name),m=this.featureArray.findIndex(g=>"Contra Voucher"===g.name),f=this.featureArray.findIndex(g=>"Expense Voucher"===g.name),F=this.featureArray.findIndex(g=>"Journal Voucher"===g.name),C=this.featureArray.findIndex(g=>"All Transactions"===g.name);this.featureArray=this.featureArray.map(g=>("Backdated Entries"==g.name&&"financial management"==g.moduleName&&(g.isDisabled=a,console.log("check toggle",a),this.featureArray[l].update||this.featureArray[u].update||this.featureArray[m].update||this.featureArray[f].update||this.featureArray[F].update||this.featureArray[l].create||this.featureArray[u].create||this.featureArray[m].create||this.featureArray[f].create||this.featureArray[F].create||this.featureArray[C].update||(g.update=!1,g.create=!1,g.delete=!1,g.read=!1,g.fullAccess=!1)),g));const d=this.newFinanCialArr.every(g=>g.create&&g.read&&g.update&&g.delete);["All Transactions","Cash Health Report","Cheque Statement","Customer Payment Status","Sales","Receivables From Customers"].includes(s)||"Backdated Entries"==s?"Backdated Entries"!=s?d?(this.allFullAccressForfinancial.nativeElement.checked=!0,this.readFullTag5.nativeElement.checked=!0):(this.allFullAccressForfinancial.nativeElement.checked=!1,this.readFullTag5.nativeElement.checked=!1,this.updateReadAccess4.nativeElement.checked=!1):d?(this.allFullAccressForfinancial.nativeElement.checked=!0,this.readFullTag5.nativeElement.checked=!0):(this.updateReadAccess4.nativeElement.checked=!1,this.createReadAccess4.nativeElement.checked=!1,this.allFullAccressForfinancial.nativeElement.checked=!1):d?(this.allFullAccressForfinancial.nativeElement.checked=!0,this.readFullTag5.nativeElement.checked=!0):(this.allFullAccressForfinancial.nativeElement.checked=!1,this.readFullTag5.nativeElement.checked=!1,this.updateReadAccess4.nativeElement.checked=!1,this.createReadAccess4.nativeElement.checked=!1),"All Transactions"==s&&this.handlePurchases(t,"update")}onClickModuleForFinancial(t,i,s,r=!1){"read"!=s&&"create"!=s&&(this.readFullTag5.checked=t.checked||r),"create"==s?i.map(n=>{n.create=t.checked}):"read"==s?i.map(n=>{n.readFinancial=t.checked}):"update"==s?i.map(n=>{n.updateFinancial=t.checked,n.readFinancial=t.checked}):"full"==s&&i.map(n=>{n[s]=t.checked,n.create=t.checked,n.readFinancial=t.checked,n.updateFinancial=t.checked})}checkPhoneNo(t){console.log(t),t==this.addUserForm.get("phone")?.value&&this.toastr.warning("Primary and Alternate Contact is Same ")}projectDepts(){return this.addUserForm.get("projects")}getFilterGroupAtIndex(t){return this.projectDepts().at(t)}newFields(t=0){return console.log(t),this.formbuilder.group({id:[,b.k0.required],departments:[,b.k0.required],parents:[,b.k0.required]})}addProject(){this.count++,this.isField=!0,this.projectIdIndex.push(0),this.projectDepts().push(this.newFields(this.projectDepts().length)),this.disabledept.push(!0),this.count==this.projects.length-1&&(this.isAddDisabled=!0)}AlphaOnly(t){const i=t.which?t.which:t.keyCode;return i>64&&i<91||i>96&&i<123||32==i}removeField(t){1==this.projects[this.selectedElementId[t]]?.selected&&(this.addUserForm.get("role_id")?.reset(),this.checkedPermission=!1,this.showPermissionDiv=!1),(this.selectedElementId[t]||0==this.selectedElementId[t])&&(this.projects[this.selectedElementId[t]].selected=!1),this.projectDepts().removeAt(t),this.count--,this.count<this.projects.length-1&&(this.isAddDisabled=!1),this.test()}numberOnly(t){const i=t.which?t.which:t.keyCode;return!(i>31&&(i<48||i>57))}ngOnInit(){this.getRoles(),this.getProjects(),console.log(this.users)}logMessage(t){console.log(t)}getRoles(){this.mainService.getRoles().subscribe(t=>{this.roleData=t,console.log(this.roleData),this.roles=this.roleData.role,this.roles=this.roles.filter(i=>"Admin"!=i.name)})}getProjects(){this.mainService.getProjects().subscribe(t=>{this.projectData=t,console.log(this.projectData),this.projects=this.projectData.projects,console.log(this.projects),this.isAddDisabled=1==this.projects.length},t=>{console.log(t)})}showMsg(t,i="deptErr"){1==this.disabledept[t]&&$("#"+i+t).fadeIn()}test(){let t=!1;this.users=[],console.log(this.projectDepts().controls),this.projectDepts()?.controls?.forEach(i=>{let s=this.projects.map(function(r){return r.id}).indexOf(Number(i.controls.id.value));console.log(s),this.projects[s].Users?.forEach(r=>{console.log(r),this.users.forEach(n=>{r.id==n.id&&(t=!0,n.project=n.project+","+this.projects[s].name)}),t||this.users.push({name:r.name,id:r.id,project:this.projects[s].name}),t=!1})})}GetProject(t,i){if(this.addUserForm.get("role_id")?.reset(),this.checkedPermission=!1,this.showPermissionDiv=!1,this.propertyResult=null,(this.selectedElementId[i]||0==this.selectedElementId[i])&&(this.projects[this.selectedElementId[i]].selected=!1),this.projects[t.source._keyManager._activeItemIndex].selected=!0,this.disableRole=this.projects.some(r=>1==r.selected),this.selectedElementId[i]=t.source._keyManager._activeItemIndex,null!=t.value){this.disabledept[i]=!1,$("#parentUserErr"+i).fadeOut(),$("#deptErr"+i).fadeOut();let r=parseInt(t.value);this.projectIdIndex[i]=this.projects.map(function(n){return n.id}).indexOf(r)}console.log(this.users),this.test()}getUsersByProject(t){console.log(this.users),console.log(this.projects),console.log(t),this.projects[t].Users.forEach(i=>{console.log(i),this.users.length?(this.users.forEach(s=>{i.id==s.id&&this.users.push({name:i.name,id:i.id})}),console.log(this.users)):this.users.push(i)})}userImage(t){this.selectedFile=t.target.files[0],this.filesToUpload.push(this.selectedFile),this.extension=this.selectedFile.name.split(".").pop();var s=new FileReader;("jpg"==this.extension||"png"==this.extension||"jpeg"==this.extension||"gif"==this.extension||"webp"==this.extension)&&(s.onload=r=>{$("#blah").attr("src",r.target.result)}),s.readAsDataURL(this.selectedFile),t.target.value=""}deleteImg(){this.selectedFile=void 0,$("#blah").attr("src","assets/images/PngItem_1503945.png")}getUserFeature(t){console.log(t.target.checked),this.showPermissionDiv=t.target.checked,this.checkedPermission=t.target.checked}adress(){var t=document.getElementById("adress");console.log(t)}submit(t){console.log(t.role_id);let i=[];console.log(this.features),console.log(this.featureArray),this.featureArray.forEach(o=>{o.delete=o.update,1==o.updateFinancial&&1==o.readFinancial?(o.update=!0,o.read=!0,o.delete=!0):1==o.readFinancial?o.read=!0:1==o.updateFinancial&&(o.update=!0,o.delete=!0)}),this.featureArray.forEach(o=>{if(this.features.forEach(a=>{if(o.id==a.Feature.id){let l=JSON.parse(JSON.stringify(o));delete l.create,delete l.read,delete l.update,delete l.delete,o.found=!0,o.create!=a.create&&(l.isUpdated=!0,l.create=o.create),o.update!=a.update&&(l.isUpdated=!0,l.update=o.update,l.delete=o.update),o.delete!=a.delete&&(l.isUpdated=!0,l.delete=o.delete),o.read!=a.read&&(l.isUpdated=!0,l.read=o.read),l.fullAccess=!!(o.create&&o.update&&o.read&&o.delete),("Purchases"==o.name||"Consumptions"==o.name||"Reserve - Stock"==o.name||"For Sale - Stock"==o.name||"Booked"==o.name||"Sold"==o.name||"All Transactions"==o.name||"Cheque Statement"==o.name||"Customer Payment Status"==o.name||"Sales"==o.name||"Received From Customers"==o.name||"Receivables From Customers"==o.name)&&1==o.update&&(l.fullAccess=!0),"Cash Health Report"==o.name&&1==o.read&&(l.fullAccess=!0),l.isUpdated&&i.push(l)}}),!o.found){console.log("in item not found");let a=JSON.parse(JSON.stringify(o));delete a.create,delete a.read,delete a.update,delete a.delete,o.create&&(a.isUpdated=!0,a.create=o.create),o.update&&(a.isUpdated=!0,a.update=o.update,a.delete=o.update),o.read&&(a.isUpdated=!0,a.read=o.read),a.fullAccess=!!(o.create&&o.update&&o.read&&o.delete),("Purchases"==o.name||"Consumptions"==o.name||"Reserve - Stock"==o.name||"For Sale - Stock"==o.name||"Booked"==o.name||"Sold"==o.name||"All Transactions"==o.name||"Cheque Statement"==o.name||"Customer Payment Status"==o.name||"Sales"==o.name||"Received From Customers"==o.name||"Receivables From Customers"==o.name)&&1==o.update&&(a.fullAccess=!0),a.isUpdated&&i.push(a)}});let s={};this.module.lead!=this.isLead&&(s.lead=this.isLead),this.module.master!=this.isMaster&&(s.master=this.isMaster),this.module.sale!=this.isSale&&(s.sale=this.isSale),this.module.collection!=this.isCollection&&(s.collection=this.isCollection),this.module.financial_management!=this.isFinancial&&(s.financial_management=this.isFinancial),this.module.inventory_module!=this.isInventory&&(s.inventory_module=this.isFinancial);let r=i;if(i.length>0&&(r=r.map(o=>{const{fullAccess:a,...l}=o;return{...l,full_access:a}})),!this.addUserForm.valid)return void this.toastr.error("Please Fill All the Mandatory Fields");console.log(t),console.log(t.parents),t.projects.forEach(o=>{null==o.parents&&(o.parents=[])}),null==t.alternate_phone&&delete t.alternate_phone;const n=new FormData;n.append("name",t.name),n.append("email",t.email),n.append("gender",t.gender),n.append("phone",t.phone),t.alternate_phone&&n.append("alternate_phone",t.alternate_phone),n.append("role_id",t.role_id),n.append("user_id",t.reporting_user_id),n.append("projects",JSON.stringify(t.projects)),n.append("password",t.password),n.append("is_applicable",t.specialOffer),n.append("address",JSON.stringify(t.address)),n.append("profile_image",this.selectedFile),this.showPermissionDiv&&(n.append("modulePermission",JSON.stringify(s)),n.append("featureAccessPermission",JSON.stringify(r))),console.log(t),console.log(s),console.log(r),this.mainService.addUser(n).subscribe(o=>{this.succMsg=o,console.log(this.succMsg),this.succMsg.success&&((this.defaultPropertyResult||this.propertyResult)&&this.limitedAccessPermission(this.succMsg.user.id),this.auth.InterValLogin().subscribe(a=>{this.permission=a.user.Role.Feature_Access_Permissions,this.perm=this.permission.map(u=>u.Feature.name),this.auth.setPermission(this.perm),this.auth.setToken(a.token),localStorage.setItem("user_info",JSON.stringify(a.user))},a=>{a.error.error.username?(this.userErr=a.error.error.username,this.newerr=a.error.error.password):this.LoginErr=a.error.error})),this.newMsg=this.succMsg.message,this.toastr.success(this.newMsg),this.route.navigateByUrl("/master/user")},o=>{console.log(o),this.errorShow=o,this.errorMsg=this.errorShow?.error.error.email?this.errorShow.error.error.email:this.errorShow.error.error.phone,this.toastr.error(this.errorMsg)})}limitedAccessPermission(t){this.mainService.setPropertyPermissions({user_id:t,propertySelectedAll:this.propertyResult?this.propertyResult.checkedAllProperty:[],propertyUnselectedId:this.propertyResult?this.propertyResult.deSelectedProperty:[],propertySelectedId:this.propertyResult?this.propertyResult.propertyIdsForPermission:[],project:this.propertyResult?.queryParamData?.project??null,projectBlocksTypes:this.propertyResult?.queryParamData?.projectBlocksTypes??null,propertyFeature:this.propertyResult?.queryParamData?.propertyFeature??null,propertyType:this.propertyResult?.queryParamData?.propertyType??null,status:this.propertyResult?.queryParamData?.status??null,subStatus:this.propertyResult?.queryParamData?.subStatus??null,tag:this.propertyResult?.queryParamData?.category?.length?this.propertyResult?.queryParamData?.category:null,search:this.propertyResult?.search&&""!=this.propertyResult?.search?this.propertyResult.search:null}).subscribe(s=>{},s=>{})}openPropertyDialog(){this.breakpointObserver.observe([R.Rp.XSmall,R.Rp.Small,R.Rp.Medium,R.Rp.Large,R.Rp.XLarge]).subscribe(t=>{let i="1200px",s="700px";t.breakpoints[R.Rp.XSmall]?(i="100%",s="100%"):t.breakpoints[R.Rp.Small]?(i="100%",s="80%"):t.breakpoints[R.Rp.Medium]?(i="80%",s="80%"):t.breakpoints[R.Rp.Large]?(i="60%",s="80%"):t.breakpoints[R.Rp.XLarge]&&(i="50%",s="70%"),this.dialog.open(se.Z,{width:"1200px",height:"700px",data:{forPermission:!0,permissionData:null!=this.propertyResult?JSON.parse(JSON.stringify(this.propertyResult)):this.propertyResult,type:"user",selectedProject:this.selectedProjects,user_id:0}}).afterClosed().subscribe(n=>{if(n)if(this.propertyResult=n,this.propertyResult.reset)this.propertyResult=null;else{const o=this.newMasterArr.find(a=>"Properties"===a.name);console.log(o),o&&(o.create=!1,o.read=!1,o.update=!1,o.full=!1,o.fullAccess=!1)}})})}openErrorDialog(t){this.dialog.open(re.w,{width:"500px",data:{msg:t,fromUser:!0}}).afterClosed().subscribe(s=>{this.addUserForm.get("role_id")?.reset(),this.checkedPermission=!1,this.showPermissionDiv=!1})}toggleExpansion(){this.isExpanded=!this.isExpanded}toggleMaterialExpansion(){this.isExpandedMaterial=!this.isExpandedMaterial}togglePropertyExpansion(){this.isExpandedProperty=!this.isExpandedProperty}handlePurchases(t,i){const s=t.target.checked;let r=0;switch(this.featureArray.forEach(n=>{"Purchases"==n.name&&(r=n.id)}),s&&(this.module.inventory_module=!0,this.isInventory=!0),i){case"read":(1==s||1!=this.materialDashboard[0]?.readCheckbox&&1!=this.materialDashboard[0]?.updateCheckbox&&1!=this.materialDashboard[0]?.fullAccessCheckbox)&&this.getReadInventory(t,r,"materialDashboard");break;case"update":1==s?this.getUpdateInventory(t,r,"materialDashboard",!1):1!=this.materialDashboard[0]?.updateCheckbox&&1!=this.materialDashboard[0]?.fullAccessCheckbox&&this.getUpdateInventory(t,r,"materialDashboard");break;case"full access":1==s?this.getFullAccessInventory(t,r,"materialDashboard"):(console.log(this.materialDashboard[0]?.fullAccessCheckbox),1!=this.materialDashboard[0]?.fullAccessCheckbox&&1!=this.materialDashboard[0]?.updateCheckbox&&this.getFullAccessInventory(t,r,"materialDashboard"))}s||this.newInventoryArr.some(o=>o.read||o.create||o.update)||(this.module.inventory_module=!1,this.isInventory=!1)}clickOnMaterialDashboardModule(t,i,s,r="",n=!1){const o=t.target.checked;if("inventoryMaterial"==r){const a=t.target.checked;if("read"!=s&&"inventoryMaterial"==r){const l=t.target.checked;console.log(l,"isChecked"),this.materialDashboardReadAccess.nativeElement.checked=l||n}if("create"==s&&"inventoryMaterial"==r){const l=t.target.checked;i.forEach(u=>{this.materialDashboard.some(m=>m.id===u.id)&&(u.create=l,1!=u.update&&(u.read=l))})}else if("update"==s&&"inventoryMaterial"==r)i.forEach(u=>{this.materialDashboard.some(m=>m.id===u.id)&&(u.update=a,u.delete=a,u.fullAccess=a,u.read=a,this.materialDashboardReadAccess.nativeElement.checked=a,this.materialDashboardFullAccess.nativeElement.checked=a)}),this.newInventoryArr.every(u=>u.read&&u.update)&&a&&(this.readFullTagInventory.nativeElement.checked=a,this.updateReadAccessInventory.nativeElement.checked=a,this.allFullAccressForInventory.nativeElement.checked=a),a||(this.readFullTagInventory.nativeElement.checked=a,this.updateReadAccessInventory.nativeElement.checked=a,this.allFullAccressForInventory.nativeElement.checked=a);else if("read"==s&&"inventoryMaterial"==r){const l=t.target.checked;i.forEach(m=>{this.materialDashboard.some(f=>f.id===m.id)&&(m.read=l,l||(m.update=l,m.fullAccess=l))}),l||(this.materialDashboardUpdateAccess.nativeElement.checked=l,this.materialDashboardFullAccess.nativeElement.checked=l);const u=this.newInventoryArr.every(m=>m.read);console.log(u),u&&l&&(this.readFullTagInventory.nativeElement.checked=l),l||(this.readFullTagInventory.nativeElement.checked=l,this.updateReadAccessInventory.nativeElement.checked=l,this.allFullAccressForInventory.nativeElement.checked=l)}else i.forEach(u=>{this.materialDashboard.some(m=>m.id===u.id)&&(u[s]=a,u.read=a,u.update=a,u.delete=a)}),this.newInventoryArr.every(u=>u.create&&u.read&&u.update&&u.delete)&&a&&(this.readFullTagInventory.nativeElement.checked=a,this.updateReadAccessInventory.nativeElement.checked=a,this.allFullAccressForInventory.nativeElement.checked=a),a||(this.readFullTagInventory.nativeElement.checked=a,this.updateReadAccessInventory.nativeElement.checked=a,this.allFullAccressForInventory.nativeElement.checked=a);if("read"!=s){const l=["Purchases","Consumptions","Purchase Voucher","Consumption Voucher"];let u=!0;i.forEach(m=>{("Purchases"==m.name||"Consumptions"==m.name)&&(m.create=!1),l.includes(m.name)&&m.update&&(u=!1),"Backdated Entries"==m.name&&"Inventory Module"==m.moduleName&&(console.log(u),m.isDisabledUpdate=u,m.isDisabledFullaccess=u,u&&(m.fullAccess=!1,m.create=!1,m.read=!1,m.update=!1),m.isDisabledFullaccess=!(!m.isDisabledCreate&&!m.isDisabledUpdate))})}else{const l=["Purchases","Consumptions","Purchase Voucher","Consumption Voucher"];let u=!0;i.forEach(m=>{("Purchases"==m.name||"Consumptions"==m.name)&&(m.create=!1),l.includes(m.name)&&m.update&&(u=!1),"Backdated Entries"==m.name&&"Inventory Module"==m.moduleName&&(console.log(u),m.isDisabledUpdate=u,u&&(m.fullAccess=!1,m.create=!1,m.read=!1,m.update=!1),m.isDisabledFullaccess=!(!m.isDisabledCreate&&!m.isDisabledUpdate))})}}else{if("read"!=s&&"inventoryProperty"==r){const a=t.target.checked;console.log(a,"isChecked"),this.propertyDashboardReadAccess.nativeElement.checked=a||n}if("create"==s&&"inventoryProperty"==r){const a=t.target.checked;i.forEach(l=>{this.propertyDashboard.some(u=>u.id===l.id)&&(l.create=a,1!=l.update&&(l.read=a))})}else if("update"==s&&"inventoryProperty"==r){const a=t.target.checked;i.forEach(u=>{this.propertyDashboard.some(m=>m.id===u.id)&&(u.update=a,u.delete=a,u.fullAccess=a,u.read=a,this.propertyDashboardReadAccess.nativeElement.checked=a,this.propertyDashboardFullAccess.nativeElement.checked=a)}),this.newInventoryArr.every(u=>u.read&&u.update)&&a&&(this.readFullTagInventory.nativeElement.checked=a,this.updateReadAccessInventory.nativeElement.checked=a,this.allFullAccressForInventory.nativeElement.checked=a),a||(this.readFullTagInventory.nativeElement.checked=a,this.updateReadAccessInventory.nativeElement.checked=a,this.allFullAccressForInventory.nativeElement.checked=a)}else if("read"==s&&"inventoryProperty"==r){const a=t.target.checked;i.forEach(u=>{this.propertyDashboard.some(m=>m.id===u.id)&&(u.read=a,a||(u.update=a,u.fullAccess=a))}),a||(this.propertyDashboardUpdateAccess.nativeElement.checked=a,this.propertyDashboardFullAccess.nativeElement.checked=a);const l=this.newInventoryArr.every(u=>u.read);console.log(l),l&&a&&(this.readFullTagInventory.nativeElement.checked=a),a||(this.readFullTagInventory.nativeElement.checked=a,this.updateReadAccessInventory.nativeElement.checked=a,this.allFullAccressForInventory.nativeElement.checked=a)}else i.forEach(l=>{this.propertyDashboard.some(u=>u.id===l.id)&&(l[s]=o,l.read=o,l.update=o,l.delete=o)}),this.newInventoryArr.every(l=>l.create&&l.read&&l.update&&l.delete)&&o&&(this.readFullTagInventory.nativeElement.checked=o,this.updateReadAccessInventory.nativeElement.checked=o,this.allFullAccressForInventory.nativeElement.checked=o),o||(this.readFullTagInventory.nativeElement.checked=o,this.updateReadAccessInventory.nativeElement.checked=o,this.allFullAccressForInventory.nativeElement.checked=o)}}getCreateInventory(t,i,s){const r=t.target.checked;this.isCreate=r,this.isRead=r,this.handleInventoryChecked("create",s,["Materials"],r),this.handleFacilityChecked("create",s,["Property"],r);const n=["Purchase Voucher","Consumption Voucher","Purchases","Consumptions"];let o=!0;this.featureArray=this.featureArray.map(f=>(f.id==i&&(r?(f.create=this.isCreate,f.read=this.isRead,1==f.update&&(f.fullAccess=!0)):(f.create=this.isCreate,f.fullAccess=!1,1!=f.update&&(f.read=this.isRead),this.createReadAccessInventory.nativeElement.checked=r,this.allFullAccressForInventory.nativeElement.checked=r)),n.includes(f.name)&&(("Purchases"==f.name||"Consumptions"==f.name)&&(f.create=!1),(f.create||f.read)&&(o=!1)),f));const a=this.newInventoryArr.every(f=>f.create);console.log("allFullPermission"),console.log(a),a&&(this.createReadAccessInventory.nativeElement.checked=!0);const l=this.newInventoryArr.every(f=>f.update);console.log("allFullPermission"),console.log(a),l&&(this.updateReadAccessInventory.nativeElement.checked=!0),l&&a&&(this.allFullAccressForInventory.nativeElement.checked=!0);const u=this.featureArray.findIndex(f=>"Purchase Voucher"===f.name),m=this.featureArray.findIndex(f=>"Consumption Voucher"===f.name);this.featureArray=this.featureArray.map(f=>("Backdated Entries"==f.name&&"Inventory Module"==f.moduleName&&!this.featureArray[u].create&&!this.featureArray[m].create&&(f.fullAccess=!1,f.create=!1),"Backdated Entries"!=f.name||"Inventory Module"!=f.moduleName||this.featureArray[u].create||this.featureArray[m].create?"Backdated Entries"==f.name&&"Inventory Module"==f.moduleName&&(f.isDisabledCreate=o,console.log("check toggle",o)):(f.isDisabledCreate=!0,f.isDisabledFullaccess=!0,f.fullAccess=!1,f.create=!1,f.read=!1,console.log("check toggle for data.id 42:",o)),f.isDisabledFullaccess=!(!f.isDisabledCreate&&!f.isDisabledUpdate),f))}handleInventoryChecked(t,i,s=[],r){if("Material Category"==i)r?(console.log(t),this.featureArray.map(n=>(!n[t]&&s.includes(n.name)&&(n[t]=!0,("create"==t||"update"==t)&&(n.read=!0),"update"==t&&(n.create=!0,n.delete=!0),1==n.create&&1==n.update&&(n.fullAccess=!0),this.autoSelectIds.push(n.id)),n))):this.featureArray.map(n=>(s.includes(n.name)&&(n[t]=!1,n.fullAccess=!1,"create"==t?1!=n.update&&(n.read=r):"update"==t?(n.read=r,n.create=r,n.delete=r):"read"==t&&(1==n.create&&(n.create=!1),1==n.update&&(n.update=!1,n.delete=!1)),this.autoSelectIds=this.autoSelectIds.filter(o=>o.id!==n.id)),console.log(n),n));else if("Materials"==i){const n=this.featureArray.findIndex(o=>"Material Category"==o.name);r||("create"==t?(this.featureArray[n].fullAccess=!1,this.featureArray[n].create=!1,this.featureArray[n].fullAccess=!1,1!=this.featureArray[n].update&&(this.featureArray[n].read=r)):"update"==t?(this.featureArray[n].fullAccess=!1,this.featureArray[n].create=!1,this.featureArray[n].read=!1,this.featureArray[n].update=!1):"read"==t&&(1==this.featureArray[n].create&&(this.featureArray[n].create=!1,this.featureArray[n].read=!1),1==this.featureArray[n].update?(this.featureArray[n].update=!1,this.featureArray[n].read=!1):(this.featureArray[n].fullAccess=!1,this.featureArray[n].read=!1)))}}handleFacilityChecked(t,i,s=[],r){if("Facilities"==i)r?(console.log("check if"),this.featureArray.map(n=>(!n[t]&&s==n.name&&(n[t]=!0,("create"==t||"update"==t)&&(n.read=!0),"update"==t&&(n.create=!0),1==n.create&&1==n.update&&(n.fullAccess=!0),this.autoSelectIds.push(n.id)),n))):(console.log("check else"),this.featureArray.map(n=>(s==n.name&&(n[t]=!1,n.fullAccess=!1,"create"==t?1!=n.update&&(n.read=r):"update"==t?(n.read=r,n.create=r):"read"==t&&(1==n.create&&(n.create=!1),1==n.update&&(n.update=!1)),this.autoSelectIds=this.autoSelectIds.filter(o=>o.id!==n.id)),n)));else if("Property"==i){const n=this.featureArray.findIndex(o=>"Facilities"==o.name);r||("create"==t?(this.featureArray[n].create=!1,this.featureArray[n].fullAccess=!1,1!=this.featureArray[n].update&&(this.featureArray[n].read=r)):"update"==t?(this.featureArray[n].fullAccess=!1,this.featureArray[n].create=!1,this.featureArray[n].read=!1,this.featureArray[n].update=!1):"read"==t&&(1==this.featureArray[n].create&&(this.featureArray[n].create=!1,this.featureArray[n].read=!1),1==this.featureArray[n].update?(this.featureArray[n].update=!1,this.featureArray[n].read=!1):this.featureArray[n].read=!1))}}handleInventoryFullChecked(t,i,s=[],r){if("Material Category"==i)this.featureArray.map(r?n=>(!n[t]&&s.includes(n.name)&&(n.fullAccess=!0,n.create=!0,n.read=!0,n.update=!0,n.delete=!0,this.autoSelectIds.push(n.id)),n):n=>(s.includes(n.name)&&(n.fullAccess=!1,n.create=!1,n.read=!1,n.update=!1,n.delete=!1,this.autoSelectIds=this.autoSelectIds.filter(o=>o.id!==n.id)),console.log(n),n));else if("Materials"==i){const n=this.featureArray.findIndex(o=>"Material Category"==o.name);r||(this.featureArray[n].fullAccess=!1,this.featureArray[n].create=!1,this.featureArray[n].read=!1,this.featureArray[n].update=!1)}}handleFacilityFullChecked(t,i,s=[],r){if("Facilities"==i)this.featureArray.map(r?n=>(!n[t]&&n.name==s&&(n.fullAccess=!0,n.create=!0,n.read=!0,n.update=!0,n.delete=!0,this.autoSelectIds.push(n.id)),n):n=>(n.name==s&&(n.fullAccess=!1,n.create=!1,n.read=!1,n.update=!1,n.delete=!1,this.autoSelectIds=this.autoSelectIds.filter(o=>o.id!==n.id)),console.log(n),n));else if("Property"==i){const n=this.featureArray.findIndex(o=>"Facilities"==o.name);r||(this.featureArray[n].fullAccess=!1,this.featureArray[n].create=!1,this.featureArray[n].read=!1,this.featureArray[n].update=!1)}}getReadInventory(t,i,s,r=!1){const n=t.target.checked;this.isRead=n,this.handleInventoryChecked("read",s,["Materials"],n),this.handleFacilityChecked("read",s,["Property"],n);const o=["Purchases","Consumptions","Purchase Voucher","Consumption Voucher"],a=["Expenses Consumed"];let l=!0;this.featureArray.map(d=>(d.id==i&&(n?(d.read=this.isRead,"materialDashboard"==s||"propertyDashboard"==s?1==d.update&&(d.fullAccess=!0):(1==d.create&&1==d.update&&(d.fullAccess=!0),a.includes(d.name)&&(d.fullAccess=!0))):(d.read=this.isRead,d.fullAccess=!1,1==d.create&&(d.create=!1),1==d.update&&(d.update=!1),this.allFullAccressForInventory.nativeElement.checked=!1,this.readFullTagInventory.nativeElement.checked=!1,this.updateReadAccessInventory.nativeElement.checked=!1,"materialDashboard"!=s&&"propertyDashboard"!=s&&(this.createReadAccessInventory.nativeElement.checked=!1))),o.includes(d.name)&&(d.create||d.update)&&(l=!1),d));const u=this.featureArray.findIndex(d=>"Purchase Voucher"===d.name),m=this.featureArray.findIndex(d=>"Consumption Voucher"===d.name),f=this.featureArray.findIndex(d=>"Purchases"===d.name),F=this.featureArray.findIndex(d=>"Consumptions"===d.name);if(this.featureArray=this.featureArray.map(d=>("Backdated Entries"!=d.name||"Inventory Module"!=d.moduleName||this.featureArray[u].create||this.featureArray[u].update||this.featureArray[m].create||this.featureArray[m].update||this.featureArray[f].update||this.featureArray[F].update?"Backdated Entries"!=d.name||"Inventory Module"!=d.moduleName||this.featureArray[u].update||this.featureArray[m].update||this.featureArray[f].update||this.featureArray[F].update?"Backdated Entries"!=d.name||"Inventory Module"!=d.moduleName||this.featureArray[u].create||this.featureArray[m].create?"Backdated Entries"==d.name&&"Inventory Module"==d.moduleName&&(d.isDisabledUpdate=l,d.isDisabledFullaccess=l,"materialDashboard"!=s&&(d.isDisabledCreate=l),console.log("check toggle for data.id 42:",l)):(d.isDisabledCreate=!0,d.isDisabledFullaccess=!0,d.create=!1,console.log("check toggle for data.id 42:",l)):(d.isDisabledUpdate=!0,d.isDisabledFullaccess=!0,d.update=!1,console.log("check toggle for data.id 42:",l)):(d.isDisabledCreate=!0,d.isDisabledUpdate=!0,d.isDisabledFullaccess=!0,d.fullAccess=!1,d.create=!1,d.read=!1,d.update=!1,console.log("check toggle for data.id 42:",l)),d)),this.newInventoryArr.every(d=>d.read)&&(this.readFullTagInventory.nativeElement.checked=!0),"materialDashboard"==s){const d=this.materialDashboard.every(y=>y.read);console.log(d),d?this.materialDashboardReadAccess&&(this.materialDashboardReadAccess.nativeElement.checked=!0):this.materialDashboardReadAccess&&(this.materialDashboardReadAccess.nativeElement.checked=!1),this.materialDashboard.every(y=>y.read&&y.update&&y.delete)?this.materialDashboardFullAccess&&(this.materialDashboardFullAccess.nativeElement.checked=!0):this.materialDashboardFullAccess&&(this.materialDashboardFullAccess.nativeElement.checked=!1),r&&this.materialDashboard.forEach(y=>{1==y.read?y.readCheckbox=r:(y.updateCheckbox=!1,y.readCheckbox=!1,y.fullAccessCheckbox=!1)})}if("propertyDashboard"==s){this.propertyDashboardReadAccess.nativeElement.checked=!!this.propertyDashboard.every(y=>y.read);const g=this.propertyDashboard.every(y=>y.read&&y.update&&y.delete);console.log("allPermissionsTrueFull"),console.log(g),this.propertyDashboardFullAccess.nativeElement.checked=!!g}}getUpdateInventory(t,i,s,r=!1){const n=t.target.checked;this.isUpdate=n,this.isRead=n,this.handleInventoryChecked("update",s,["Materials"],n),this.handleFacilityChecked("update",s,["Property"],n),console.log(s);const o=["Purchases","Consumptions","Purchase Voucher","Consumption Voucher"];let a=!0;this.featureArray.map(d=>(d.id==i&&(n?"materialDashboard"==s||"propertyDashboard"==s?(d.update=this.isUpdate,d.delete=this.isUpdate,d.read=this.isRead,d.fullAccess=!0):(d.update=this.isUpdate,d.delete=this.isUpdate,d.read=this.isRead,d.create=!0,d.fullAccess=!0):("materialDashboard"==s||"propertyDashboard"==s?(d.update=this.isUpdate,d.delete=this.isUpdate,d.read=this.isRead,d.fullAccess=!1):(d.update=this.isUpdate,d.delete=this.isUpdate,d.fullAccess=!1,d.create=!1,d.read=this.isRead),this.allFullAccressForInventory.nativeElement.checked=n,this.updateReadAccessInventory.nativeElement.checked=n,"Backdated Entries"!=s&&(this.readFullTagInventory.nativeElement.checked=n),this.createReadAccessInventory.nativeElement.checked=n)),"materialDashboard"==s?(o.includes(d.name)&&d.update&&(a=!1),r&&this.materialDashboard.forEach(g=>{1==g.update?g.updateCheckbox=r:(g.updateCheckbox=!1,g.readCheckbox=!1,g.fullAccessCheckbox=!1)})):(("Purchases"==d.name||"Consumptions"==d.name)&&(d.create=!1),o.includes(d.name)&&d.update&&(a=!1)),d));const l=this.featureArray.findIndex(d=>"Purchase Voucher"===d.name),u=this.featureArray.findIndex(d=>"Consumption Voucher"===d.name),m=this.featureArray.findIndex(d=>"Purchases"===d.name),f=this.featureArray.findIndex(d=>"Consumptions"===d.name);this.featureArray=this.featureArray.map(d=>("Backdated Entries"!=d.name||"Inventory Module"!=d.moduleName||this.featureArray[l].update||this.featureArray[u].update||this.featureArray[m].update||this.featureArray[f].update||this.featureArray[l].create||this.featureArray[u].create?"Backdated Entries"!=d.name||"Inventory Module"!=d.moduleName||this.featureArray[l].update||this.featureArray[u].update||this.featureArray[m].update||this.featureArray[f].update?"Backdated Entries"!=d.name||"Inventory Module"!=d.moduleName||this.featureArray[l].create||this.featureArray[u].create||"materialDashboard"==s?"Backdated Entries"==d.name&&"Inventory Module"==d.moduleName&&(d.isDisabledUpdate=a,console.log("check toggle for data.id 41:",a),"materialDashboard"!=s&&(d.isDisabledCreate=a),console.log("check toggle for data.id 42:",a),d.isDisabledFullaccess=!(!d.isDisabledUpdate&&!d.isDisabledCreate)):(d.isDisabledCreate=!0,d.isDisabledFullaccess=!0,d.create=!1,d.fullAccess=!1,console.log("check toggle for data.id 42:",a)):(console.log("check toggle for data.id 42:",a),d.isDisabledUpdate=!0,d.isDisabledFullaccess=!0,d.fullAccess=!1,d.update=!1):(d.isDisabledCreate=!0,d.isDisabledUpdate=!0,d.isDisabledFullaccess=!0,d.fullAccess=!1,d.create=!1,d.update=!1,console.log("check toggle for data.id 42:",a)),d));const F=this.newInventoryArr.every(d=>d.create);F&&(this.createReadAccessInventory.nativeElement.checked=!0,this.readFullTagInventory.nativeElement.checked=!0);const C=this.newInventoryArr.every(d=>d.update);if(C&&(this.updateReadAccessInventory.nativeElement.checked=!0,this.readFullTagInventory.nativeElement.checked=!0),C&&F&&(this.allFullAccressForInventory.nativeElement.checked=!0),"materialDashboard"==s){const d=this.materialDashboard.every(y=>y.read),g=this.materialDashboard.every(y=>y.update);d?(this.materialDashboardFullAccess&&(this.materialDashboardFullAccess.nativeElement.checked=!0),this.materialDashboardReadAccess&&(this.materialDashboardReadAccess.nativeElement.checked=!0)):this.readFullTagInventory&&(this.materialDashboardReadAccess.nativeElement.checked=!1,this.materialDashboardFullAccess.nativeElement.checked=!1),g?(this.materialDashboardReadAccess.nativeElement.checked=!0,this.materialDashboardUpdateAccess.nativeElement.checked=!0):(this.materialDashboardUpdateAccess.nativeElement.checked=!1,this.materialDashboardFullAccess.nativeElement.checked=!1)}if("propertyDashboard"==s){const d=this.propertyDashboard.every(y=>y.read),g=this.propertyDashboard.every(y=>y.update);this.propertyDashboardReadAccess.nativeElement.checked=!!d,g?(this.propertyDashboardUpdateAccess.nativeElement.checked=!0,this.propertyDashboardReadAccess.nativeElement.checked=!0):this.propertyDashboardUpdateAccess.nativeElement.checked=!1,this.propertyDashboardFullAccess.nativeElement.checked=!(!d||!g)}}getFullAccessInventory(t,i,s,r=!1){const n=t.target.checked;this.isFullAccess=n,this.handleInventoryFullChecked("full",s,["Materials"],n),this.handleFacilityFullChecked("full",s,["Property"],n);const o=["Purchases","Consumptions","Purchase Voucher","Consumption Voucher"];let a=!0;this.featureArray.map(p=>(p.id==i&&(p.fullAccess=this.isFullAccess,p.create=this.isFullAccess,p.read=this.isFullAccess,p.update=this.isFullAccess,p.delete=this.isFullAccess),o.includes(s)&&"Backdated Entries"==p.name&&"Inventory Module"==p.moduleName&&(p.isDisabled=!n),("Purchases"==p.name||"Consumptions"==p.name)&&(p.create=!1),o.includes(p.name)&&(p.create||p.read||p.update||p.delete)&&(a=!1),p));const l=this.featureArray.findIndex(p=>"Purchase Voucher"===p.name),u=this.featureArray.findIndex(p=>"Consumption Voucher"===p.name),m=this.featureArray.findIndex(p=>"Purchases"===p.name),f=this.featureArray.findIndex(p=>"Consumptions"===p.name);this.featureArray=this.featureArray.map(p=>("Backdated Entries"!=p.name||"Inventory Module"!=p.moduleName||this.featureArray[l].create||this.featureArray[l].update||this.featureArray[u].create||this.featureArray[u].update||this.featureArray[m].update||this.featureArray[f].update?"Backdated Entries"!=p.name||"Inventory Module"!=p.moduleName||this.featureArray[l].update||this.featureArray[u].update||this.featureArray[m].update||this.featureArray[f].update?"Backdated Entries"!=p.name||"Inventory Module"!=p.moduleName||this.featureArray[l].create||this.featureArray[u].create||"materialDashboard"==s?"Backdated Entries"==p.name&&"Inventory Module"==p.moduleName&&(p.isDisabledUpdate=a,"materialDashboard"!=s&&(p.isDisabledCreate=a),p.isDisabledFullaccess=!(!p.isDisabledCreate&&!p.isDisabledUpdate),console.log("check toggle for data.id 42:",a)):(p.isDisabledCreate=!0,p.isDisabledFullaccess=!0,p.create=!1,p.fullAccess=!1,console.log("check toggle for data.id 42:",a)):(p.isDisabledUpdate=!0,p.isDisabledFullaccess=!0,p.update=!1,p.fullAccess=!1,console.log("check toggle for data.id 42:",a)):(p.isDisabledCreate=!0,p.isDisabledUpdate=!0,p.isDisabledFullaccess=!0,p.fullAccess=!1,p.create=!1,p.read=!1,p.update=!1,console.log("check toggle for data.id 42:",a)),p)),this.newInventoryArr.every(p=>p.fullAccess)?(this.allFullAccressForInventory.nativeElement.checked=!0,this.readFullTagInventory.nativeElement.checked=!0,this.createReadAccessInventory.nativeElement.checked=!0,this.updateReadAccessInventory.nativeElement.checked=!0):(this.readFullTagInventory.nativeElement.checked=!1,this.allFullAccressForInventory.nativeElement.checked=!1,"Purchases"!=s&&"Consumptions"!=s&&"Reserve - Stock"!=s&&"For Sale - Stock"!=s&&"Booked"!=s&&"Sold"!=s&&(this.createReadAccessInventory.nativeElement.checked=!1),this.updateReadAccessInventory.nativeElement.checked=!1);const C=this.materialDashboard.every(p=>p.read),d=this.materialDashboard.every(p=>p.update);C?(this.materialDashboardFullAccess&&(this.materialDashboardFullAccess.nativeElement.checked=!0),this.materialDashboardReadAccess&&(this.materialDashboardReadAccess.nativeElement.checked=!0)):this.readFullTagInventory&&(this.materialDashboardReadAccess.nativeElement.checked=!1,this.materialDashboardFullAccess.nativeElement.checked=!1),d?(this.materialDashboardReadAccess.nativeElement.checked=!0,this.materialDashboardUpdateAccess.nativeElement.checked=!0):(this.materialDashboardUpdateAccess.nativeElement.checked=!1,this.materialDashboardFullAccess.nativeElement.checked=!1);const g=this.propertyDashboard.every(p=>p.read),y=this.propertyDashboard.every(p=>p.update);y&&g?(this.propertyDashboardUpdateAccess.nativeElement.checked=!0,this.propertyDashboardReadAccess.nativeElement.checked=!0,this.propertyDashboardFullAccess.nativeElement.checked=!0):(this.propertyDashboardReadAccess.nativeElement.checked=!!g,y?(this.propertyDashboardUpdateAccess.nativeElement.checked=!0,this.propertyDashboardReadAccess.nativeElement.checked=!0):this.propertyDashboardUpdateAccess.nativeElement.checked=!1),"materialDashboard"==s&&1==r&&this.materialDashboard.forEach(p=>{"Purchases"==p.name&&(1==p.fullAccess?p.fullAccessCheckbox=r:(p.updateCheckbox=!1,p.readCheckbox=!1,p.fullAccessCheckbox=!1))})}static#e=this.\u0275fac=function(i){return new(i||c)(e.rXU(X.k),e.rXU(M.bZ),e.rXU(b.ok),e.rXU(j.c$),e.rXU(Y.t),e.rXU(D.Ix),e.rXU(L.tw),e.rXU(R.QP))};static#t=this.\u0275cmp=e.VBU({type:c,selectors:[["app-add-user"]],viewQuery:function(i,s){if(1&i&&(e.GBs(V.A,5),e.GBs(B.x,5),e.GBs(le,5),e.GBs(oe,5),e.GBs(ce,5),e.GBs(de,5),e.GBs(he,5),e.GBs(ue,5),e.GBs(pe,5),e.GBs(me,5),e.GBs(fe,5),e.GBs(_e,5),e.GBs(ge,5),e.GBs(ke,5),e.GBs(ve,5),e.GBs(be,5),e.GBs(Ae,5),e.GBs(ye,5),e.GBs(Fe,5),e.GBs(Ce,5),e.GBs(Re,5),e.GBs(Ie,5),e.GBs(Ee,5)),2&i){let r;e.mGM(r=e.lsd())&&(s.addressGlobalcomponent=r.first),e.mGM(r=e.lsd())&&(s.valueText=r.first),e.mGM(r=e.lsd())&&(s.readFullTag=r.first),e.mGM(r=e.lsd())&&(s.readFullTag1=r.first),e.mGM(r=e.lsd())&&(s.readFullTag2=r.first),e.mGM(r=e.lsd())&&(s.readFullTag3=r.first),e.mGM(r=e.lsd())&&(s.readFullTag4=r.first),e.mGM(r=e.lsd())&&(s.readFullTag5=r.first),e.mGM(r=e.lsd())&&(s.readFullTagInventory=r.first),e.mGM(r=e.lsd())&&(s.materialDashboardReadAccess=r.first),e.mGM(r=e.lsd())&&(s.propertyDashboardReadAccess=r.first),e.mGM(r=e.lsd())&&(s.materialDashboardFullAccess=r.first),e.mGM(r=e.lsd())&&(s.propertyDashboardFullAccess=r.first),e.mGM(r=e.lsd())&&(s.materialDashboardCreateAccess=r.first),e.mGM(r=e.lsd())&&(s.materialDashboardUpdateAccess=r.first),e.mGM(r=e.lsd())&&(s.propertyDashboardCreateAccess=r.first),e.mGM(r=e.lsd())&&(s.propertyDashboardUpdateAccess=r.first),e.mGM(r=e.lsd())&&(s.createReadAccessInventory=r.first),e.mGM(r=e.lsd())&&(s.updateReadAccessInventory=r.first),e.mGM(r=e.lsd())&&(s.allFullAccressForInventory=r.first),e.mGM(r=e.lsd())&&(s.allFullAccressForfinancial=r.first),e.mGM(r=e.lsd())&&(s.createReadAccess4=r.first),e.mGM(r=e.lsd())&&(s.updateReadAccess4=r.first)}},hostBindings:function(i,s){1&i&&e.bIt("change",function(n){return s.changeListener(n)})},decls:138,vars:81,consts:[["file",""],["checkboxes",""],["createReadAccess",""],["readFullTag",""],["updateReadAccess",""],["allFullAccress",""],["createReadAccess1",""],["readFullTag1",""],["updateReadAccess1",""],["allFullAccressForLead",""],["createReadAccess3",""],["readFullTag3",""],["updateReadAccess3",""],["allFullAccressForSale",""],["createReadAccess4",""],["readFullTag5",""],["updateReadAccess4",""],["allFullAccressForfinancial",""],["createReadAccessInventory",""],["readFullTagInventory",""],["updateReadAccessInventory",""],["allFullAccressForInventory",""],["createReadAccess2",""],["readFullTag2",""],["updateReadAccess2",""],["allFullAccressForCollection",""],["materialDashboardCreateAccess",""],["materialDashboardReadAccess",""],["materialDashboardUpdateAccess",""],["materialDashboardFullAccess",""],["propertyDashboardCreateAccess",""],["propertyDashboardReadAccess",""],["propertyDashboardUpdateAccess",""],["propertyDashboardFullAccess",""],[1,"app-main__inner"],[1,"app-page-title","add-project-title"],[1,"page-title-wrapper"],[1,"page-title-heading"],[1,"tab-content"],["id","tab-content-0","role","tabpanel",1,"tab-pane","tabs-animation","fade","show","active"],[1,"main-card","mb-3","card"],[1,"card-body"],["appFormFocus","","autocomplete","off",3,"ngSubmit","formGroup"],[1,"row"],[1,"col-md-3","col-sm-12","col-xs-12","profile-col"],[2,"display","grid","place-items","center"],[2,"position","relative"],["class","highlight","style","cursor: pointer; position: absolute; top: 0px;left: 65%;",3,"click",4,"ngIf"],["id","blah","alt","","src","assets/images/PngItem_1503945.png"],["type","file",2,"display","none",3,"change"],["id","camera-icon",1,"camera-icon",3,"click"],[1,"col-md-9","col-sm-12"],[1,"form-group","col-xl-8","col-lg-8","col-md-6","col-sm-12"],["appearance","outline","id","NameField","hideRequiredMarker",""],[1,"starmandatory"],["matInput","","formControlName","name","autocomplete","nope",3,"keypress","placeholder"],[1,"error_margin"],[3,"control","errordata"],[1,"form-group","col-xl-4","col-lg-4","col-md-6","col-sm-12"],["appearance","outline","id","gender","hideRequiredMarker",""],["formControlName","gender"],["value","Male"],["value","Female"],["value","Others"],[1,"form-group","col-xl-6","col-lg-6","col-md-6","col-sm-12"],["appearance","outline","id","PhoneField","hideRequiredMarker",""],["maxlength","10","matInput","","formControlName","phone","autocomplete","nope",3,"keypress","placeholder"],["appearance","outline","id","AltPhoneField"],["maxlength","10","matInput","","formControlName","alternate_phone","autocomplete","nope",3,"keypress","ngModelChange","placeholder"],["appearance","outline","id","EmailField","hideRequiredMarker",""],["matInput","","formControlName","email","autocomplete","nope",3,"placeholder"],["appearance","outline","id","PasswordField","hideRequiredMarker",""],["matInput","","formControlName","password","autocomplete","new-password",3,"type","placeholder"],["matSuffix","",1,"material-icons",3,"click"],["formArrayName","projects"],[1,"col-xl-11","col-lg-11","col-md-12","col-sm-12"],["class","col-11",3,"formGroupName",4,"ngFor","ngForOf"],["id","addProjectIcon",1,"col-xl-1","col-lg-1","col-md-12","col-sm-12"],[1,"d-flex",2,"align-items","end","height","100%"],["mat-mini-fab","","type","button","color","primary","aria-label","Example icon button with a menu icon",3,"click","disabled"],[1,"form-group","col-xl-4","col-lg-6","col-md-6","col-sm-12"],["appearance","outline","id","RoleField","hideRequiredMarker",""],["formControlName","role_id",3,"selectionChange"],[3,"value","disabled",4,"ngFor","ngForOf"],[2,"margin-top","-25px"],[1,"form-group","col-xl-8","col-lg-6","col-md-6","col-sm-12",2,"display","flex","gap","20px","align-items","center"],["type","checkbox",1,"input-class","regular-checkbox",3,"change","disabled","checked"],[1,"module_name",2,"margin-bottom","0px !important"],["class","row","style","margin-bottom: 20px",4,"ngIf"],["id","adress",3,"addressFromParent","isMandate","fromUser"],[1,"col"],[1,"form-group","col-xl-3","col-lg-3","col-md-6","col-sm-12"],[1,"form-group","col-lg-3","col-sm-12","mt-3"],["formControlName","specialOffer",1,"example-margin"],["type","submit",1,"mt-1","btn","btn-primary","button-width",2,"float","right"],[1,"highlight",2,"cursor","pointer","position","absolute","top","0px","left","65%",3,"click"],[1,"col-11",3,"formGroupName"],[1,"row","mb-1"],[4,"ngIf"],["appearance","outline","id","ProjectField","hideRequiredMarker",""],["formControlName","id",3,"selectionChange"],[3,"disabled","value",4,"ngFor","ngForOf"],["class","form-group col-xl-4 col-lg-4 col-md-6 col-sm-12",4,"ngIf"],["class","form-group col-xl-3 col-lg-3 col-md-6 col-sm-12",4,"ngIf"],["id","removeprojectrow","class","col-lg-1 col-xl-1 col-sm-6 col-md-3 col-xs-12",4,"ngIf"],[3,"disabled","value"],["appearance","outline","id","DepartmentField","hideRequiredMarker","",3,"click"],["multiple","","formControlName","departments",3,"disabled"],[3,"value",4,"ngFor","ngForOf"],["class","error_margin",4,"ngIf"],[1,"deptErr",2,"display","none",3,"id"],[3,"value"],["appearance","outline","id","ParentUserField",3,"click"],["formControlName","parents",3,"disabled"],["id","removeprojectrow",1,"col-lg-1","col-xl-1","col-sm-6","col-md-3","col-xs-12"],["mat-mini-fab","","type","button","color","warn","aria-label","Example icon button with a menu icon",3,"click"],[3,"value","disabled"],[1,"row",2,"margin-bottom","20px"],[1,"permission_head"],["class","col-md-4","style","display:flex;align-items:center;gap:15px;",4,"ngFor","ngForOf"],[1,"row","feature-access-row"],[1,"col-md-12"],[1,"back",2,"overflow-y","hidden",3,"ngStyle"],[2,"width","100%"],[2,"background-color","rgba(1, 153, 153, 0.87)"],[1,"feature_name",2,"color","aliceblue","padding-left","5px"],[1,"access_permissions"],["name","create",3,"change","checked"],["name","read","id","readFullTag",3,"change"],["name","update",3,"change","checked"],[3,"change"],[4,"ngFor","ngForOf"],[1,"m-1"],["name","read","id","readFullTag1",3,"change"],["name","read","id","readFullTag3",3,"change"],["class","back",4,"ngIf"],[3,"ngStyle"],[2,"color","#018323"],[1,"permissions-header"],[1,"fontcls",2,"width","100px"],[1,"fontcls",2,"margin-left","15px"],[1,"fontcls"],[1,"permission-row"],[1,"fontclsforlist",2,"width","100px"],[2,"margin-left","20px"],["type","checkbox",3,"change","checked"],[2,"margin-left","10px"],["type","checkbox",3,"change"],["id","readFullTagInventory","type","checkbox",3,"change"],[1,"col-md-4",2,"display","flex","align-items","center","gap","15px"],["type","checkbox",1,"input-class","regular-checkbox",3,"change","id","value","checked"],[1,"module_name",2,"margin-bottom","0px !important",3,"for"],[1,"feature_name"],["name","create",3,"change","checked","disabled"],["name","read",3,"change","checked","disabled"],["name","update",3,"change","checked","disabled"],["name","full",3,"change","checked","disabled"],["style","border-bottom: 1px solid black;",4,"ngIf"],[2,"border-bottom","1px solid black"],[2,"padding-right","10px"],["mat-stroked-button","","type","button",3,"click","ngStyle"],["name","create",3,"change","id","checked"],["name","read",3,"change","checked"],["name","full",3,"change","checked"],[1,"back"],["name","read","id","readFullTag2",3,"change"],[1,"permission-rowTow"],[1,"fontclsforlist","element",2,"width","100"],["type","checkbox",3,"disabled","checked","change",4,"ngIf"],["type","checkbox",3,"change","disabled","checked"],["class","permission-rowTow",4,"ngIf"],[1,"fontclsforlist","element",2,"width","100px"],["type","checkbox",3,"checked","change",4,"ngIf"],["id","materialDashboardCreateAccess","type","checkbox",2,"display","none",3,"change","checked"],["type","checkbox","id","materialDashboardReadAccess",3,"change"],[2,"display","flex","flex-direction","row","text-align","center","padding-right","15px"],["id","materialDashboardFullAccess","type","checkbox",3,"change"],["style","margin-left: 10px;",3,"click",4,"ngIf"],[2,"margin-left","10px",3,"click"],["class","permission-row slide-target",3,"slide",4,"ngFor","ngForOf"],[1,"permission-row","slide-target"],[1,"fontclsforlist","element",2,"width","50"],["type","checkbox",2,"display","none",3,"change","checked"],["type","checkbox","id","propertyDashboardCreateAccess",2,"display","none",3,"change","checked"],["type","checkbox","id","propertyDashboardReadAccess",3,"change"],["type","checkbox","id","propertyDashboardUpdateAccess",3,"change","checked"],[2,"display","flex","flex-direction","row","text-align","center","padding-right","10px"]],template:function(i,s){if(1&i){const r=e.RV6();e.j41(0,"div",34)(1,"div",35)(2,"div",36)(3,"div",37),e.EFF(4),e.nI1(5,"translate"),e.k0s()()(),e.j41(6,"div",38)(7,"div",39)(8,"div",40)(9,"div",41)(10,"form",42),e.bIt("ngSubmit",function(){return e.eBV(r),e.Njj(s.submit(s.addUserForm.value))}),e.j41(11,"div",43)(12,"div",44)(13,"div",45)(14,"div",46),e.DNE(15,Pe,2,0,"mat-icon",47),e.nrm(16,"img",48),e.j41(17,"input",49,0),e.bIt("change",function(o){return e.eBV(r),e.Njj(s.userImage(o))}),e.k0s(),e.j41(19,"mat-icon",50),e.bIt("click",function(){e.eBV(r);const o=e.sdS(18);return e.Njj(o.click())}),e.EFF(20,"camera_enhance"),e.k0s()()()(),e.j41(21,"div",51)(22,"div",43)(23,"div",52)(24,"mat-form-field",53)(25,"mat-label"),e.EFF(26),e.nI1(27,"translate"),e.j41(28,"span",54),e.EFF(29,"*"),e.k0s()(),e.j41(30,"input",55),e.nI1(31,"translate"),e.bIt("keypress",function(o){return e.eBV(r),e.Njj(s.AlphaOnly(o))}),e.k0s(),e.j41(32,"mat-error",56),e.nrm(33,"app-required-and-pattern-error",57),e.k0s()()(),e.j41(34,"div",58)(35,"mat-form-field",59)(36,"mat-label"),e.EFF(37),e.nI1(38,"translate"),e.j41(39,"span",54),e.EFF(40,"*"),e.k0s()(),e.j41(41,"mat-select",60)(42,"mat-option",61),e.EFF(43),e.nI1(44,"translate"),e.k0s(),e.j41(45,"mat-option",62),e.EFF(46),e.nI1(47,"translate"),e.k0s(),e.j41(48,"mat-option",63),e.EFF(49),e.nI1(50,"translate"),e.k0s()(),e.j41(51,"mat-error",56),e.nrm(52,"app-required-and-pattern-error",57),e.k0s()()(),e.j41(53,"div",64)(54,"mat-form-field",65)(55,"mat-label"),e.EFF(56),e.nI1(57,"translate"),e.j41(58,"span",54),e.EFF(59,"*"),e.k0s()(),e.j41(60,"input",66),e.nI1(61,"translate"),e.bIt("keypress",function(o){return e.eBV(r),e.Njj(s.numberOnly(o))}),e.k0s(),e.j41(62,"mat-error",56),e.nrm(63,"app-required-and-pattern-error",57),e.k0s()()(),e.j41(64,"div",64)(65,"mat-form-field",67)(66,"mat-label"),e.EFF(67),e.nI1(68,"translate"),e.k0s(),e.j41(69,"input",68),e.nI1(70,"translate"),e.bIt("keypress",function(o){return e.eBV(r),e.Njj(s.numberOnly(o))})("ngModelChange",function(o){return e.eBV(r),e.Njj(s.checkPhoneNo(o))}),e.k0s(),e.j41(71,"mat-error",56),e.nrm(72,"app-required-and-pattern-error",57),e.k0s()()()(),e.j41(73,"div",43)(74,"div",64)(75,"mat-form-field",69)(76,"mat-label"),e.EFF(77),e.nI1(78,"translate"),e.j41(79,"span",54),e.EFF(80,"*"),e.k0s()(),e.nrm(81,"input",70),e.nI1(82,"translate"),e.j41(83,"mat-error",56),e.nrm(84,"app-required-and-pattern-error",57),e.k0s()()(),e.j41(85,"div",64)(86,"mat-form-field",71)(87,"mat-label"),e.EFF(88),e.nI1(89,"translate"),e.j41(90,"span",54),e.EFF(91,"*"),e.k0s()(),e.nrm(92,"input",72),e.nI1(93,"translate"),e.j41(94,"span",73),e.bIt("click",function(){return e.eBV(r),e.Njj(s.hide=!s.hide)}),e.EFF(95),e.k0s(),e.j41(96,"mat-error",56),e.nrm(97,"app-required-and-pattern-error",57),e.k0s()()()(),e.qex(98,74),e.j41(99,"div",43)(100,"div",75),e.DNE(101,Ve,3,2,"ng-container",76),e.k0s(),e.j41(102,"div",77)(103,"div",78),e.qex(104),e.j41(105,"button",79),e.bIt("click",function(){return e.eBV(r),e.Njj(s.addProject())}),e.j41(106,"mat-icon"),e.EFF(107,"add"),e.k0s()(),e.bVm(),e.k0s()()(),e.bVm(),e.j41(108,"div",43)(109,"div",80)(110,"mat-form-field",81)(111,"mat-label"),e.EFF(112),e.nI1(113,"translate"),e.j41(114,"span",54),e.EFF(115,"*"),e.k0s()(),e.j41(116,"mat-select",82),e.bIt("selectionChange",function(o){return e.eBV(r),e.Njj(s.onChangeRole(o))}),e.DNE(117,Xe,2,3,"mat-option",83),e.k0s(),e.j41(118,"mat-error",84),e.nrm(119,"app-required-and-pattern-error",57),e.k0s()()(),e.j41(120,"div",85)(121,"input",86,1),e.bIt("change",function(o){return e.eBV(r),e.Njj(s.getUserFeature(o))}),e.k0s(),e.j41(123,"label",87),e.EFF(124," Do you want to update your permission ? "),e.k0s()()(),e.DNE(125,_t,184,89,"div",88),e.nrm(126,"app-address",89),e.k0s(),e.j41(127,"div",90),e.qex(128),e.j41(129,"div",43),e.nrm(130,"div",91),e.j41(131,"div",92)(132,"mat-checkbox",93),e.EFF(133),e.nI1(134,"translate"),e.k0s()()(),e.bVm(),e.j41(135,"button",94),e.EFF(136),e.nI1(137,"translate"),e.k0s()()()()()()()()()}if(2&i){let r;e.R7$(4),e.SpI(" ",e.bMT(5,45,"Buttons.Adds_User")," "),e.R7$(6),e.Y8G("formGroup",s.addUserForm),e.R7$(5),e.Y8G("ngIf",s.selectedFile),e.R7$(11),e.JRh(e.bMT(27,47,"Buttons.Name")),e.R7$(4),e.FS9("placeholder",e.bMT(31,49,"user.Enter_User_name")),e.R7$(3),e.Y8G("control",s.addUserForm.get("name"))("errordata",s.nameErrorData),e.R7$(4),e.JRh(e.bMT(38,51,"Contact_information.Gender")),e.R7$(6),e.JRh(e.bMT(44,53,"Customer.Add_Customer.Male")),e.R7$(3),e.JRh(e.bMT(47,55,"Customer.Add_Customer.Female")),e.R7$(3),e.JRh(e.bMT(50,57,"Customer.Add_Customer.Other")),e.R7$(3),e.Y8G("control",s.addUserForm.get("gender"))("errordata",s.genderErrorData),e.R7$(4),e.JRh(e.bMT(57,59,"user.PhoneNo")),e.R7$(4),e.FS9("placeholder",e.bMT(61,61,"user.EnterPhoneNo")),e.R7$(3),e.Y8G("control",s.addUserForm.get("phone"))("errordata",s.phoneErrorData),e.R7$(4),e.JRh(e.bMT(68,63,"user.AlternatePhoneNo")),e.R7$(2),e.FS9("placeholder",e.bMT(70,65,"user.EnterAlternatePhoneNo")),e.R7$(3),e.Y8G("control",s.addUserForm.get("alternate_phone"))("errordata",s.phoneErrorData),e.R7$(5),e.JRh(e.bMT(78,67,"user.email")),e.R7$(4),e.FS9("placeholder",e.bMT(82,69,"user.Enter_Email_Id")),e.R7$(3),e.Y8G("control",s.addUserForm.get("email"))("errordata",s.emailErrorData),e.R7$(4),e.JRh(e.bMT(89,71,"Buttons.Password")),e.R7$(4),e.FS9("placeholder",e.bMT(93,73,"Buttons.Enter_password")),e.Y8G("type",s.hide?"password":"text"),e.R7$(3),e.SpI(" ",s.hide?"visibility_off":"visibility"," "),e.R7$(2),e.Y8G("control",s.addUserForm.get("password"))("errordata",s.passwordErrorData),e.R7$(4),e.Y8G("ngForOf",s.projectDepts().controls),e.R7$(4),e.Y8G("disabled",s.isAddDisabled),e.R7$(7),e.JRh(e.bMT(113,75,"role.add_role.Select_Role")),e.R7$(5),e.Y8G("ngForOf",s.roles),e.R7$(2),e.Y8G("control",s.addUserForm.get("role_id"))("errordata",s.roleErrorData),e.R7$(2),e.Y8G("disabled",!(null!=(r=s.addUserForm.get("role_id"))&&r.value))("checked",s.checkedPermission),e.R7$(4),e.Y8G("ngIf",s.showPermissionDiv),e.R7$(),e.Y8G("addressFromParent",s.addUserForm.get("address"))("isMandate",!0)("fromUser",!0),e.R7$(7),e.JRh(e.bMT(134,77,"user.User_Applicable_For_Special_Offer")),e.R7$(3),e.SpI(" ",e.bMT(137,79,"Buttons.Submit")," ")}},dependencies:[I.Sq,I.bT,I.B3,x.rl,x.nJ,x.TL,x.yw,J.VO,ne.wT,w.An,G.fg,b.qT,b.me,b.BC,b.cb,b.tU,b.j4,b.JD,b.$R,b.v8,q.$z,q.$0,U.BS,U.GK,U.Z2,U.WN,z.sG,H.So,ie.I,V.A,ae.o,I.lG,j.D9],styles:['@charset "UTF-8";.add-project-title[_ngcontent-%COMP%]{padding-bottom:0!important;color:#616161}  .mat-dialog-container{background:#fff;overflow-x:hidden}.close-icon[_ngcontent-%COMP%]{position:absolute;right:0;font-size:28px;cursor:pointer}#hidden_content[_ngcontent-%COMP%]{display:none}mat-form-field[_ngcontent-%COMP%]{width:100%;margin-top:10px}.submit-btn[_ngcontent-%COMP%]{background-color:#68bfbb;color:#00000070}.Intrest-cls[_ngcontent-%COMP%]{display:none}  .mat-step-header .mat-step-icon-selected, .mat-step-header[_ngcontent-%COMP%]   .mat-step-icon-state-done[_ngcontent-%COMP%], .mat-step-header[_ngcontent-%COMP%]   .mat-step-icon-state-edit[_ngcontent-%COMP%]{background-color:#68bfbb!important}  .mat-form-field-appearance-outline .mat-form-field-outline{color:#68bfbb!important}  .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{color:#68bfbb!important}  .mat-form-field-appearance-outline.mat-form-field-invalid.mat-form-field-invalid .mat-form-field-outline-thick{color:red!important;opacity:.8!important}  .mat-input-element{caret-color:#68bfbb!important}  .mat-form-field-invalid .mat-input-element, .mat-warn[_ngcontent-%COMP%]   .mat-input-element[_ngcontent-%COMP%]{caret-color:red!important}  .mat-form-field-label{color:#68bfbb!important}  .mat-form-field.mat-focused .mat-form-field-label{color:#68bfbb!important}  .mat-form-field.mat-form-field-invalid .mat-form-field-label{color:red!important}  .mat-primary .mat-option.mat-selected:not(.mat-option-disabled){color:#68bfbb}  .mat-select-arrow{color:#68bfbb!important}mat-datepicker-toggle[_ngcontent-%COMP%]{color:#68bfbb!important}  .mat-calendar-body-selected{background-color:#68bfbb!important}  .mat-expansion-panel{margin:16px 0!important}  .mat-slide-toggle.mat-checked .mat-slide-toggle-thumb{background-color:#68bfbb}  .mat-slide-toggle.mat-checked .mat-slide-toggle-bar{background-color:#b3dfdc}.mat-radio-button[_ngcontent-%COMP%] ~ .mat-radio-button[_ngcontent-%COMP%]{margin-left:16px}.example-container[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%] + .mat-form-field[_ngcontent-%COMP%]{margin-left:8px}.example-right-align[_ngcontent-%COMP%]{text-align:right}input.example-right-align[_ngcontent-%COMP%]::-webkit-outer-spin-button, input.example-right-align[_ngcontent-%COMP%]::-webkit-inner-spin-button{display:none}input.example-right-align[_ngcontent-%COMP%]{-moz-appearance:textfield}.profile-col[_ngcontent-%COMP%]{padding:0rem 3rem}.fa-user-circle[_ngcontent-%COMP%]{font-size:9rem;color:#a9a9a94f}img[_ngcontent-%COMP%]{height:150px;width:150px;border-radius:50%}.highlight[_ngcontent-%COMP%]{position:absolute;top:45px;left:194px;opacity:.6;border-radius:50px;color:red}@media only screen and (min-width: 200px) and (max-width: 325px){.highlight[_ngcontent-%COMP%]{position:absolute;top:29px;left:186px;opacity:.6;border-radius:50px}}@media only screen and (min-width: 326px) and (max-width: 1000px){.highlight[_ngcontent-%COMP%]{position:relative;top:-13px;left:163px;opacity:.6;border-radius:50px}}@media only screen and (min-width: 1000px) and (max-width: 1115px){.highlight[_ngcontent-%COMP%]{position:relative;top:54px;left:81px;opacity:.6;border-radius:50px}}@media only screen and (min-width: 1115px) and (max-width: 1250px){.highlight[_ngcontent-%COMP%]{position:relative;top:61px;left:78px;opacity:.6;border-radius:50px}}@media only screen and (min-width: 1251px) and (max-width: 1500px){.highlight[_ngcontent-%COMP%]{position:relative;top:59px;left:76px;opacity:.6;border-radius:50px}}@media only screen and (min-width: 1500px) and (max-width: 1551px){.highlight[_ngcontent-%COMP%]{position:absolute;top:24px;left:191px;opacity:.6;border-radius:50px}}@media only screen and (min-width: 1600px) and (max-width: 1700px){.highlight[_ngcontent-%COMP%]{position:absolute;top:24px;left:191px;opacity:.6;border-radius:50px}}@media only screen and (min-width: 1700px) and (max-width: 1820px){.highlight[_ngcontent-%COMP%]{position:absolute;top:24px;left:214px;opacity:.6;border-radius:50px}}@media only screen and (min-width: 1821px) and (max-width: 1825px){.highlight[_ngcontent-%COMP%]{position:absolute;top:24px;left:228px;opacity:.6;border-radius:50px}}@media only screen and (min-width: 1826px) and (max-width: 2049px){.highlight[_ngcontent-%COMP%]{position:absolute;top:24px;left:254px;opacity:.6;border-radius:50px}}@media only screen and (min-width: 2050px) and (max-width: 2735px){.highlight[_ngcontent-%COMP%]{position:absolute;top:24px;left:341px;opacity:.6;border-radius:50px}}@media only screen and (min-width: 2736px) and (max-width: 4100px){.highlight[_ngcontent-%COMP%]{position:absolute;top:24px;left:517px;opacity:.6;border-radius:50px}}@media only screen and (min-width: 4200px) and (max-width: 5478px){.highlight[_ngcontent-%COMP%]{position:absolute;top:24px;left:690px;opacity:.6;border-radius:50px}}.profile-div[_ngcontent-%COMP%]{text-align:center;height:150px;width:100%}  .mat-form-field-infix{padding:.8em!important}@media only screen and (max-width: 1000px){.profile-col[_ngcontent-%COMP%]{max-width:100%}.profile-div[_ngcontent-%COMP%]{margin:0rem 1rem}.button-width[_ngcontent-%COMP%]{width:100%}.row[_ngcontent-%COMP%]{flex-direction:column}.form-group[_ngcontent-%COMP%], .col-lg-4[_ngcontent-%COMP%], .col-md-9[_ngcontent-%COMP%]{max-width:100%}}@media only screen and (max-width: 326px){img[_ngcontent-%COMP%]{height:110px;width:110px}.profile-div[_ngcontent-%COMP%]{height:130px;margin:0rem 1rem}}@media only screen and (max-width: 275px){.profile-col[_ngcontent-%COMP%]{padding:0rem}}.deptErr[_ngcontent-%COMP%]{color:#bb373b;font-size:11px;position:relative;bottom:14px}  .mat-mini-fab.mat-primary{background-color:#68bfbb}#userPassword[_ngcontent-%COMP%]{font-size:smaller!important}@media (min-width: 1000px){div[_ngcontent-%COMP%] > #removeprojectrow[_ngcontent-%COMP%]{padding:0;margin:0}#removeprojectrow[_ngcontent-%COMP%]{align-self:center}#addProjectIcon[_ngcontent-%COMP%]{display:inline-block;align-self:flex-end;margin:0;padding:0 0 25px}}#camera-icon[_ngcontent-%COMP%]{height:30px;width:30px;border-radius:50%;background:#68bfbb;padding:.3rem;font-size:20px;color:#fff;position:absolute!important;top:80%!important;left:66%!important}.input-class[_ngcontent-%COMP%]{margin:16px 0!important}.regular-checkbox[_ngcontent-%COMP%]{-webkit-appearance:none;background-color:#fafafa;border:1px solid #cacece;box-shadow:0 1px 2px #0003000d,inset 0 -15px 10px -12px #0000000d;padding:10px;border-radius:3px;display:inline-block;position:relative}.regular-checkbox[_ngcontent-%COMP%]:active, .regular-checkbox[_ngcontent-%COMP%]:checked:active{box-shadow:0 1px 2px #0000000d,inset 0 1px 3px #0000001a}.regular-checkbox[_ngcontent-%COMP%]:checked{background-color:#32b7b0;border:1px solid #32b7b0;box-shadow:0 1px 2px #0000000d,inset 0 -15px 10px -12px #0000000d,inset 15px 10px -12px #ffffff1a;color:#fff!important}.regular-checkbox[_ngcontent-%COMP%]:checked:after{content:"\\2714";font-size:16px;position:absolute;top:0;left:3px;color:#fff}.feature_name[_ngcontent-%COMP%]{color:#525252;font-weight:400;width:421px}.permissions-container[_ngcontent-%COMP%]{width:300px;border:1px solid #e0e0e0;padding:10px;border-radius:5px}.permissions-header[_ngcontent-%COMP%]{width:100%;border:2px solid green;border-radius:7px;display:grid;grid-template-columns:repeat(5,1fr);align-items:center;padding:5px}.permission-row[_ngcontent-%COMP%]{margin-top:8px;background:#c9e9ca;border-radius:7px;display:grid;grid-template-columns:repeat(5,1fr);align-items:center;padding:7px}.permission-rowTow[_ngcontent-%COMP%]{margin-top:8px;background:#f5f5f5;border-radius:7px;display:grid;grid-template-columns:repeat(5,1fr);align-items:center;padding:7px}.category-header[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr repeat(4,auto);align-items:center;padding:5px}.category-header[_ngcontent-%COMP%]{justify-content:space-between;align-items:center;background-color:#d7f2d7;cursor:pointer;font-weight:700}.permission-row[_ngcontent-%COMP%]{border-bottom:1px solid #e0e0e0}.arrow[_ngcontent-%COMP%]{grid-column:5;text-align:right}.divWidth[_ngcontent-%COMP%]{width:50px}.fontcls[_ngcontent-%COMP%]{font-size:14px;font-family:Roboto;font-weight:700;color:#6e6d6d}.fontclsforlist[_ngcontent-%COMP%]{font-size:14px;font-family:Roboto;font-weight:600;color:#6e6d6d}.chnageCheckboxColor[_ngcontent-%COMP%]{accent-color:blue}input[type=checkbox][_ngcontent-%COMP%]{accent-color:#4caf50!important}.element[_ngcontent-%COMP%]{width:13ch;overflow-wrap:break-word}.slide-target[_ngcontent-%COMP%]{overflow:hidden;max-height:0;opacity:0;transition:max-height .5s ease-out,opacity .5s ease-out}.slide-target.slide[_ngcontent-%COMP%]{max-height:500px;opacity:1;transition:max-height .6s ease-in,opacity .6s ease-in}']})}return c})();var W=v(8002),kt=v(5400),vt=v(5286),O=v(6695),Q=v(2042),T=v(5312);let bt=(()=>{class c{constructor(t,i){this.data=t,this.dialogRef=i,this.status=""}ngOnInit(){this.status=1==this.data.activate?"Activate":"Deactivate"}action(t){console.log(t),this.dialogRef.close(t)}static#e=this.\u0275fac=function(i){return new(i||c)(e.rXU(M.Vh),e.rXU(M.CP))};static#t=this.\u0275cmp=e.VBU({type:c,selectors:[["app-user-deactivate-dialog"]],decls:9,vars:1,consts:[[1,"row",2,"margin-top","10px"],[1,"col"],[1,"btn","btn-primary","ok",3,"click"],[1,"btn","btn-primary",2,"float","right",3,"click"]],template:function(i,s){1&i&&(e.j41(0,"p"),e.EFF(1),e.k0s(),e.j41(2,"div",0)(3,"div",1)(4,"button",2),e.bIt("click",function(){return s.action("true")}),e.EFF(5," Yes "),e.k0s()(),e.j41(6,"div",1)(7,"button",3),e.bIt("click",function(){return s.action("false")}),e.EFF(8," cancel "),e.k0s()()()),2&i&&(e.R7$(),e.SpI("Are you sure? You want to ",s.status," user"))}})}return c})();var At=v(4664),K=v(668),yt=v(6352);function Ft(c,_){1&c&&(e.j41(0,"button",25)(1,"span",26)(2,"mat-icon",27),e.EFF(3,"business_center"),e.k0s()(),e.EFF(4),e.nI1(5,"translate"),e.k0s()),2&c&&(e.R7$(4),e.SpI(" ",e.bMT(5,1,"Buttons.Add_User")," "))}function Ct(c,_){if(1&c&&(e.qex(0),e.DNE(1,Ft,6,3,"button",24),e.bVm()),2&c){const t=_.$implicit;e.R7$(),e.Y8G("ngIf",1==t.create)}}function Rt(c,_){if(1&c){const t=e.RV6();e.j41(0,"mat-icon",28),e.bIt("click",function(s){e.eBV(t);const r=e.XpG();return e.Njj(r.closeFilter(s))}),e.EFF(1,"close"),e.k0s()}}function It(c,_){if(1&c){const t=e.RV6();e.j41(0,"mat-paginator",29),e.bIt("page",function(s){e.eBV(t);const r=e.XpG();return e.Njj(r.pageEvents(s))}),e.k0s()}if(2&c){const t=e.XpG();e.Y8G("length",t.totalLength)("pageSize",10)("pageIndex",t.currentPage)}}function Et(c,_){1&c&&e.nrm(0,"app-no-data-found")}function xt(c,_){1&c&&(e.j41(0,"th"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&c&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"Buttons.Activate_Deactivate")," "))}function Dt(c,_){if(1&c&&(e.qex(0),e.DNE(1,xt,3,3,"th",21),e.bVm()),2&c){const t=_.$implicit;e.R7$(),e.Y8G("ngIf",1==t.update)}}function jt(c,_){if(1&c){const t=e.RV6();e.j41(0,"div",39)(1,"input",40),e.mxI("ngModelChange",function(s){e.eBV(t);const r=e.XpG(3).$implicit;return e.DH7(r.is_active,s)||(r.is_active=s),e.Njj(s)}),e.bIt("change",function(s){e.eBV(t);const r=e.XpG(3),n=r.$implicit,o=r.index,a=e.XpG(2);return e.Njj(a.deActivate(n.id,s,o,n.is_active))}),e.k0s(),e.nrm(2,"label",41),e.k0s()}if(2&c){const t=e.XpG(3).$implicit,i=e.XpG(2);e.R7$(),e.FS9("id",t.id),e.R50("ngModel",t.is_active),e.Y8G("checked",t.is_active)("disabled",t.id==i.logindata.id),e.R7$(),e.FS9("for",t.id)}}function Pt(c,_){if(1&c&&(e.j41(0,"td",37),e.DNE(1,jt,3,5,"div",38),e.k0s()),2&c){const t=e.XpG(2).$implicit,i=e.XpG(2);e.R7$(),e.Y8G("ngIf",t.id!=i.logindata.id)}}function Mt(c,_){if(1&c&&(e.qex(0),e.DNE(1,Pt,2,1,"td",36),e.bVm()),2&c){const t=_.$implicit;e.R7$(),e.Y8G("ngIf",1==t.update)}}function Ut(c,_){if(1&c){const t=e.RV6();e.j41(0,"td")(1,"button",42),e.bIt("click",function(){e.eBV(t);const s=e.XpG(),r=s.$implicit,n=s.index,o=e.XpG(2);return e.Njj(o.openDialog(r.id,n))}),e.j41(2,"span",43),e.nrm(3,"i",44),e.k0s()()()}}function Tt(c,_){if(1&c){const t=e.RV6();e.j41(0,"button",48),e.bIt("click",function(){e.eBV(t);const s=e.XpG(3),r=s.$implicit,n=s.index,o=e.XpG(2);return e.Njj(o.openDialog(r.id,n))}),e.j41(1,"span",43),e.nrm(2,"i",44),e.k0s()()}if(2&c){const t=e.XpG(5);e.Y8G("disabled",t.isAddDisabled)}}function wt(c,_){if(1&c&&(e.j41(0,"td",46),e.DNE(1,Tt,3,1,"button",47),e.k0s()),2&c){const t=e.XpG().$implicit;e.R7$(),e.Y8G("ngIf",1==t.update)}}function Gt(c,_){if(1&c&&(e.qex(0),e.DNE(1,wt,2,1,"td",45),e.bVm()),2&c){const t=e.XpG(3);e.R7$(),e.Y8G("ngIf",1==t.showCrossicon)}}function Ot(c,_){if(1&c&&(e.j41(0,"tr",34)(1,"td",35),e.EFF(2),e.k0s(),e.j41(3,"td",35),e.EFF(4),e.k0s(),e.j41(5,"td",35),e.EFF(6),e.k0s(),e.j41(7,"td",35),e.EFF(8),e.nrm(9,"br"),e.EFF(10),e.k0s(),e.j41(11,"td",35),e.EFF(12),e.k0s(),e.DNE(13,Mt,2,1,"ng-container",8)(14,Ut,4,0,"td",21)(15,Gt,2,1,"ng-container",8),e.k0s()),2&c){const t=_.$implicit,i=e.XpG(2);e.R7$(2),e.JRh(t.name),e.R7$(2),e.JRh(t.email),e.R7$(2),e.JRh(t.gender),e.R7$(2),e.SpI(" ",t.phone,""),e.R7$(2),e.SpI("",t.alternate_phone," "),e.R7$(2),e.JRh(t.role),e.R7$(),e.Y8G("ngForOf",i.userFeature),e.R7$(),e.Y8G("ngIf",0==i.showCrossicon),e.R7$(),e.Y8G("ngForOf",i.userFeature)}}function St(c,_){if(1&c){const t=e.RV6();e.j41(0,"table",30)(1,"thead",31),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.sortData())}),e.j41(2,"tr")(3,"th"),e.EFF(4),e.nI1(5,"translate"),e.k0s(),e.j41(6,"th"),e.EFF(7),e.nI1(8,"translate"),e.k0s(),e.j41(9,"th"),e.EFF(10),e.nI1(11,"translate"),e.k0s(),e.j41(12,"th"),e.EFF(13),e.nI1(14,"translate"),e.k0s(),e.j41(15,"th"),e.EFF(16),e.nI1(17,"translate"),e.k0s(),e.DNE(18,Dt,2,1,"ng-container",8),e.nrm(19,"th"),e.k0s()(),e.j41(20,"tbody",32),e.DNE(21,Ot,16,9,"tr",33),e.k0s()()}if(2&c){const t=e.XpG();e.Y8G("dtOptions",t.dtOptions),e.R7$(4),e.JRh(e.bMT(5,8,"Buttons.Name")),e.R7$(3),e.JRh(e.bMT(8,10,"user.email")),e.R7$(3),e.JRh(e.bMT(11,12,"Contact_information.Gender")),e.R7$(3),e.JRh(e.bMT(14,14,"Contact_information.Phone")),e.R7$(3),e.JRh(e.bMT(17,16,"user.role")),e.R7$(2),e.Y8G("ngForOf",t.userFeature),e.R7$(3),e.Y8G("ngForOf",t.usersDetail)}}function Nt(c,_){if(1&c){const t=e.RV6();e.j41(0,"mat-paginator",49),e.bIt("page",function(s){e.eBV(t);const r=e.XpG();return e.Njj(r.pageEvents(s))}),e.k0s()}if(2&c){const t=e.XpG();e.Y8G("length",t.totalLength)("pageSize",10)("pageIndex",t.currentPage)}}const $t=[{path:"",component:(()=>{class c{constructor(t,i,s,r,n,o,a){this.mainService=t,this.socket=i,this.dialog=s,this.toastr=r,this._location=n,this.router=o,this.auth=a,this.displayedColumns=["position","name","weight","symbol"],this.usersDetail=[],this.userActivate=!0,this.Dept="",this.Project="",this.Role="",this.DefaultImg="../../../assets/images/PngItem_1503945.png",this.showCrossicon=!1,this.p=1,this.sdfs="",this.totalRecords=0,this.perPageRecord=10,this.totalPages=0,this.ascIcon=!0,this.desIcon=!1,this.showName=!0,this.showEmail=!0,this.showGender=!0,this.showPhone=!0,this.showRole=!0,this.showact=!0,this.dtOptions={},this.showSuperadmin="none",this.isLoadingResults=!0,this.totalLength=0,this.userParents=[],this.currentPage=0,this.projectItem=[],this.dataFoundOrNot=!1,this.paginator=1,this.sort=new Q.B4,this.isAddDisabled=!1,this.deactivateUserID=new e.bkB,this.dtTrigger=new vt.B7,"devdreamcity"==window.location.hostname.split(".")[0]?T.c.apiDevURL.split("/master"):"uatdreamcity"==window.location.hostname.split(".")[0]?T.c.apiUatURL.split("/master"):"colonizer"==window.location.hostname.split(".")[0]||"letsplay"==window.location.hostname.split(".")[0]||(window,T.c.apiURL.split("/master"))}ngOnInit(){this.isLoadingResults=!0,this.dtOptions={searching:!1,processing:!0,order:[],paging:!1,info:!1,columnDefs:[{orderable:!1,targets:7}]},this.getPermission=localStorage.getItem("user_info"),this.logindata=JSON.parse(this.getPermission),console.log(this.logindata),this.userId=this.logindata.id,this.userData=this.logindata,this.features=this.userData.Role.Feature_Access_Permissions,this.userFeature=this.features.filter(t=>"Users"==t.Feature.name),this.setPage(this.paginator?.pageIndex?this.paginator.pageIndex+1:1),window.innerWidth<=1024&&(this.showCrossicon=!0)}sortData(){setTimeout(()=>{console.log(JSON.stringify(this.dtOptions.order)),console.log(this.dtOptions.order&&this.dtOptions.order.length?this.dtOptions.order[0]:0);let t=[];t=this.dtOptions.order&&this.dtOptions.order.length?this.dtOptions.order[0]:0,console.log(t[0]);let i="";switch(t[0]){case 0:i="name";break;case 1:i="email";break;case 2:i="gender";break;case 3:i="phone";break;case 4:i="roleName";break;case 5:i="is_active"}let s=t[1].toUpperCase();this.usersDetail=[],this.mainService.getAllUserApi(this.paginator.pageIndex,"",s,i).subscribe(n=>{this.usersDetail=[],this.userData=n,this.dataFoundOrNot=!!this.userData.user.rows.length,this.isLoadingResults=!1,this.totalLength=this.userData.user.totalcountData,this.userData.user.rows.forEach(o=>{this.usersDetail.push({id:o.id,name:o.name?o.name:null,email:o.email?o.email:null,gender:o.gender?o.gender:null,phone:o.phone?o.phone:null,project:o.Project?o.Project.name:null,role:o.Role?o.Role.name:null,alternate_phone:o.alternate_phone?o.alternate_phone:"",is_active:o.is_active})})})},1),console.log(this.usersDetail)}setPage(t){this.isLoadingResults=!0,this.mainService.getAllUserApi(t,"").subscribe(s=>{this.usersDetail=[],this.userData=s,this.dataFoundOrNot=!!this.userData.user.rows.length,1==t&&(this.totalLength=this.userData.user.totalcountData),this.isLoadingResults=!1,this.userData.user.rows.forEach(r=>{this.usersDetail.push({id:r.id,name:r.name?r.name:null,email:r.email?r.email:null,gender:r.gender?r.gender:null,phone:r.phone?r.phone:null,department:r.Department?r.Department.name:"NA",project:r.Project?r.Project.name:null,role:r.Role?r.Role.name:null,alternate_phone:r.alternate_phone?r.alternate_phone:"",is_active:r.is_active})})})}pageEvents(t){this.currentPage=t.pageIndex,this.setPage(t.pageIndex+1)}applyFilter(t){const i=t.target.value;console.log(i),this.mainService.getAllUserApi(null,i).subscribe(s=>{this.usersDetail=[],this.userData=s,this.isLoadingResults=!1,this.totalLength=this.userData.user.totalcountData,this.dataFoundOrNot=!!this.userData.user.rows.length,this.userData.user.rows.forEach(r=>{this.usersDetail.push({id:r.id,name:r.name?r.name:null,email:r.email?r.email:null,gender:r.gender?r.gender:null,phone:r.phone?r.phone:null,department:r.Department?r.Department.name:"NA",project:r.Project?r.Project.name:null,role:r.Role?r.Role.name:null,alternate_phone:r.alternate_phone?r.alternate_phone:"",is_active:r.is_active})}),this.usersDetail.length&&(this.paginator.pageIndex=0)})}closeFilter(t){console.log(this.searchfilter),this.searchfilter="",this.usersDetail.length&&(this.paginator.pageIndex=0),this.ngOnInit()}opernDialogForUserDeactivate(t,i,s,r){this.dialog.open(bt,{data:{activate:i}}).afterClosed().subscribe(o=>{o&&("true"==o?1==i?this.mainService.activateUser(t).subscribe(a=>{console.log(a),this.activateUser=a,this.toastr.success(this.activateUser.message)}):this.mainService.deActivateUser(t).subscribe(a=>{console.log(a),this.activateUser=a,this.toastr.success(this.activateUser.message),this.socket.emitNewEvent("deactivateUser",t)}):this.usersDetail[s].is_active=!r)})}deActivate(t,i,s,r){console.log(i.target.checked),1==i.target.checked?(this.sdfs="Deactivate",console.log(this.sdfs),this.opernDialogForUserDeactivate(t,i.target.checked,s,r)):(this.sdfs="Activate",this.opernDialogForUserDeactivate(t,i.target.checked,s,r))}Logout(){window.clearInterval(localStorage.interval_id);let t=localStorage.getItem("firebaseToken"),i=localStorage.getItem("token");localStorage.clear(),localStorage.setItem("firebaseToken",t),localStorage.setItem("token",i),this.auth.signout().subscribe(s=>{this.router.navigateByUrl("/login"),localStorage.removeItem("token")},s=>{let r=localStorage.getItem("firebaseToken"),n=localStorage.getItem("token");localStorage.clear(),localStorage.setItem("firebaseToken",r),localStorage.setItem("token",n),this.router.navigateByUrl("/login"),localStorage.removeItem("token")})}openDialog(t,i){console.log(t),setTimeout(()=>{this.mainService.getUser(t).subscribe(s=>{this.userData=s,console.log(this.userData);let r=[];r=this.userData.projects,r.map(o=>{this.projectItem=o.departments}),console.log(this.projectItem),this.newUser=this.userData.user,this.id=this.newUser.id?this.newUser.id:null,this.name=this.newUser.name?this.newUser.name:null,this.email=this.newUser.email?this.newUser.email:null,this.isApplicable=this.newUser.is_applicable?this.newUser.is_applicable:null,this.gender=this.newUser.gender?this.newUser.gender:null,this.phone=this.newUser.phone?this.newUser.phone:null,this.address=this.newUser.Address.address?this.newUser.Address.address:null,this.postal_code=this.newUser.Address?this.newUser.Address.postal_code:null,this.city=this.newUser.Address?this.newUser.Address.city:null,this.district=this.newUser.Address?this.newUser.Address.district:null,this.state=this.newUser.Address?this.newUser.Address.state:null,this.country=this.newUser.Address?this.newUser.Address.country:null,this.Dept=this.projectItem,console.log(this.Dept),this.userParents=this.newUser.UserParents?this.newUser.UserParents:[],console.log(s),this.Role=this.newUser.Role?this.newUser.Role.name:null,this.role_id=this.newUser.Role?this.newUser.Role.id:null,this.parent_role_id=this.newUser.Role?this.newUser.parent_role_id:null,this.reporting_user_id=this.newUser.Role?this.newUser.user_id:null,this.alternate_phone=this.newUser.alternate_phone?this.newUser.alternate_phone:null,this.image=this.newUser.Image?this.newUser.Image.src:"",this.projects=this.userData.projects,console.log(this.parent_role_id),console.log(this.reporting_user_id),1==this.features.update&&(this.isAddDisabled=!0),this.userFeaturepermission=this.newUser.Role.Feature_Access_Permissions,this.userModulePermission=this.newUser.Role.Module_Permission,this.dialog.open(W.d,{height:"600px",data:{id:this.id,name:this.name,email:this.email,gender:this.gender,phone:this.phone,address:this.address,DeptName:this.Dept,role:this.role_id,parent_role_id:this.parent_role_id,reporting_user_id:this.reporting_user_id,alternate_phone:this.alternate_phone,image:this.image,postal_code:this.postal_code,city:this.city,state:this.state,country:this.country,district:this.district,roleName:this.Role,projects:this.projects,isApplicable:this.isApplicable,userParents:this.userParents,features:this.userFeaturepermission,module_permission:this.userModulePermission,individual_permission_payload:this.userData.user.individual_permission_payload}}).afterClosed().subscribe(o=>{console.log(o),this.usersDetail[i].id=o.user.id,this.usersDetail[i].name=o.user.name?o.user.name:null,this.usersDetail[i].email=o.user.email?o.user.email:null,this.usersDetail[i].gender=o.user.gender?o.user.gender:null,this.usersDetail[i].phone=o.user.phone?o.user.phone:null,this.usersDetail[i].project=o.user.Project?o.user.Project.name:null,this.usersDetail[i].role=o.user.Role?o.user.Role.name:null,this.usersDetail[i].alternate_phone=o.user.alternate_phone?o.user.alternate_phone:"",this.usersDetail[i].is_active=o.user.is_active})})},0)}openDelete(t){this.dialog.open(kt.m,{}).afterClosed().subscribe(s=>{"yes"==s&&this.mainService.deleteUser(t).subscribe(r=>{this.data=r,this.toastr.success(this.data.message),this.ngOnInit()},r=>{console.log(r)})})}static#e=this.\u0275fac=function(i){return new(i||c)(e.rXU(Y.t),e.rXU(At.L),e.rXU(M.bZ),e.rXU(L.tw),e.rXU(I.aZ),e.rXU(D.Ix),e.rXU(X.k))};static#t=this.\u0275cmp=e.VBU({type:c,selectors:[["app-user"]],viewQuery:function(i,s){if(1&i&&(e.GBs(O.iy,5),e.GBs(Q.B4,5)),2&i){let r;e.mGM(r=e.lsd())&&(s.paginator=r.first),e.mGM(r=e.lsd())&&(s.sort=r.first)}},outputs:{deactivateUserID:"deactivateUserID"},decls:35,vars:16,consts:[[1,"app-main__inner"],[1,"app-page-title"],[1,"page-title-wrapper"],[1,"page-title-heading"],[1,"page-title-icon"],[2,"background","white","color","#68bfbb","font-size","17px","/* position","relative","bottom","13px","right","8px"],[1,"page-title-actions"],[1,"d-inline-block","dropdown"],[4,"ngFor","ngForOf"],[1,"row"],[1,"col-lg-12"],[1,"main-card","mb-1","card"],[1,"card-body"],[1,"kol-12"],[1,"filters"],["appearance","outline",2,"float","right","padding-right","5%"],[1,"col-lg-8"],["matInput","","autocomplete","off",3,"keydown.enter","ngModelChange","ngModel","placeholder"],[1,"col-lg-4"],["class","highlight","style","\n                            color: #68bfbb !important;\n                            margin-left: 20px !important;\n                            position: absolute !important;\n                            right: 12px !important;\n      \n                            cursor: pointer;\n                            bottom: -4px !important;\n                            background-color: transparent !important;\n                          ",3,"click",4,"ngIf"],["showFirstLastButtons","","aria-label","Select page of users","style","float: left",3,"length","pageSize","pageIndex","page",4,"ngIf"],[4,"ngIf"],["datatable","","class","table-margin",3,"dtOptions",4,"ngIf"],["showFirstLastButtons","","aria-label","Select page of users",3,"length","pageSize","pageIndex","page",4,"ngIf"],["type","button","routerLink","add-user","aria-haspopup","true","aria-expanded","false","class","btn-shadow btn btn-info",4,"ngIf"],["type","button","routerLink","add-user","aria-haspopup","true","aria-expanded","false",1,"btn-shadow","btn","btn-info"],[1,"btn-icon-wrapper","pr-2","opacity-7"],[2,"background-color","transparent","color","white","position","relative","top","4px"],[1,"highlight",2,"color","#68bfbb !important","margin-left","20px !important","position","absolute !important","right","12px !important","cursor","pointer","bottom","-4px !important","background-color","transparent !important",3,"click"],["showFirstLastButtons","","aria-label","Select page of users",2,"float","left",3,"page","length","pageSize","pageIndex"],["datatable","",1,"table-margin",3,"dtOptions"],["role","rowgroup",3,"click"],["role","rowgroup"],["role","row","class","user",4,"ngFor","ngForOf"],["role","row",1,"user"],["role","cell"],["class","close-td","role","cell",4,"ngIf"],["role","cell",1,"close-td"],["class","switch",4,"ngIf"],[1,"switch"],["type","checkbox",1,"look",3,"ngModelChange","change","id","ngModel","checked","disabled"],[3,"for"],[1,"pushable","close-btn",3,"click"],[1,"front"],[1,"fas","fa-edit","edit_btn"],["class","mobile-td",4,"ngIf"],[1,"mobile-td"],["class","pushable close-btn",3,"disabled","click",4,"ngIf"],[1,"pushable","close-btn",3,"click","disabled"],["showFirstLastButtons","","aria-label","Select page of users",3,"page","length","pageSize","pageIndex"]],template:function(i,s){1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"mat-icon",5),e.EFF(6,"person"),e.k0s()(),e.j41(7,"div"),e.EFF(8),e.nI1(9,"translate"),e.k0s()(),e.j41(10,"div",6)(11,"div",7),e.DNE(12,Ct,2,1,"ng-container",8),e.k0s()()()(),e.j41(13,"div",9)(14,"div",10)(15,"div",11)(16,"div",12)(17,"div",9)(18,"div",13)(19,"div",14)(20,"mat-form-field",15)(21,"mat-label"),e.EFF(22),e.nI1(23,"translate"),e.k0s(),e.j41(24,"div",9)(25,"div",16)(26,"input",17),e.nI1(27,"translate"),e.bIt("keydown.enter",function(n){return s.applyFilter(n)}),e.mxI("ngModelChange",function(n){return e.DH7(s.searchfilter,n)||(s.searchfilter=n),n}),e.k0s()(),e.j41(28,"div",18),e.DNE(29,Rt,2,0,"mat-icon",19),e.k0s()()(),e.DNE(30,It,1,3,"mat-paginator",20),e.k0s()(),e.j41(31,"div",13),e.DNE(32,Et,1,0,"app-no-data-found",21),e.k0s()(),e.DNE(33,St,22,18,"table",22)(34,Nt,1,3,"mat-paginator",23),e.k0s()()()()()),2&i&&(e.R7$(8),e.SpI(" ",e.bMT(9,10,"Buttons.Users")," "),e.R7$(4),e.Y8G("ngForOf",s.userFeature),e.R7$(10),e.JRh(e.bMT(23,12,"Buttons.search_and_press_enter")),e.R7$(4),e.FS9("placeholder",e.bMT(27,14,"Buttons.search_and_press_enter")),e.R50("ngModel",s.searchfilter),e.R7$(3),e.Y8G("ngIf",s.searchfilter),e.R7$(),e.Y8G("ngIf",s.dataFoundOrNot),e.R7$(2),e.Y8G("ngIf",0==s.usersDetail.length),e.R7$(),e.Y8G("ngIf",s.usersDetail.length),e.R7$(),e.Y8G("ngIf",s.dataFoundOrNot))},dependencies:[I.Sq,I.bT,D.Wk,x.rl,x.nJ,w.An,G.fg,b.me,b.Zm,b.BC,K._,O.iy,yt.p,b.vS,j.D9],styles:['.fa-users[_ngcontent-%COMP%]{font-size:20px;color:#68bfbb}textarea[_ngcontent-%COMP%]:focus, input[_ngcontent-%COMP%]:focus{outline:none!important}.clickable_row[_ngcontent-%COMP%]{cursor:pointer}.close-td[_ngcontent-%COMP%]{display:flex;justify-content:center}.mobile-td[_ngcontent-%COMP%]{display:flex;justify-content:end}.close-btn[_ngcontent-%COMP%]{height:22px;width:20px;display:none!important}.user[_ngcontent-%COMP%]:hover{box-shadow:0 2px 12px #bfbfbf!important}.user[_ngcontent-%COMP%]:hover   .close-btn[_ngcontent-%COMP%]{display:block!important;float:right;margin-right:25px}.switch[_ngcontent-%COMP%]{position:relative}.switch[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:35px;height:13px;background-color:#999;position:absolute;left:0;border-radius:50px}.switch[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{visibility:hidden}.switch[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:after{content:"";width:19px;height:19px;border-radius:50px;position:absolute;top:-3px;left:-1px;transition:.1s;background-color:#f8f8f8;box-shadow:0 1.5px 2px #706a68}.switch[_ngcontent-%COMP%]   .look[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:after{left:20px;background-color:#68bfbb;box-shadow:0 1.5px 2px #706a68}.switch[_ngcontent-%COMP%]   .look[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]{background-color:#b3dfdc}.pushable[_ngcontent-%COMP%]:focus:not(:focus-visible){outline:none}.pushable[_ngcontent-%COMP%]{background:#d2b8c0;border:none;border-radius:52px;padding:0;cursor:pointer;outline-offset:12px}.front[_ngcontent-%COMP%]{border:1px solid #f5eaea;display:block;padding:0 3px;border-radius:50%;background:#fffffe;color:#fff;transform:translateY(-5px)}.pushable[_ngcontent-%COMP%]:active   .front[_ngcontent-%COMP%]{transform:translateY(-3px)}.edit_btn[_ngcontent-%COMP%]{color:#68bfbb;font-size:13px}  .mat-slide-toggle.mat-checked .mat-slide-toggle-thumb{background-color:#68bfbb}  .mat-slide-toggle.mat-checked .mat-slide-toggle-bar{background-color:#b3dfdc}table[_ngcontent-%COMP%]{table-layout:auto;width:100%;border-collapse:separate;border-spacing:0 20px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:#a1a1a1;text-align:center}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:#fff;font-weight:300;padding:7px 7px 7px 15px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{background-color:#fff;text-align:left}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{box-shadow:0 0 8px #00000040;cursor:pointer;border-radius:6px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem 0rem 1rem 1rem;min-width:60px}tfoot[_ngcontent-%COMP%], th[_ngcontent-%COMP%]:first-child, thead[_ngcontent-%COMP%], td[_ngcontent-%COMP%]:first-child{border-radius:6px 0 0 6px}tfoot[_ngcontent-%COMP%], th[_ngcontent-%COMP%]:last-child, tr[_ngcontent-%COMP%], thead[_ngcontent-%COMP%]{border-radius:0 6px 6px 0}.searchBox[_ngcontent-%COMP%]{float:right;position:relative;left:.3rem;padding:8px;border-radius:10px;border:1.9px solid #68bfbb;height:33px;width:190px}@media only screen and (max-width: 760px),(min-device-width: 768px) and (max-device-width: 1024px){table[_ngcontent-%COMP%], thead[_ngcontent-%COMP%], tbody[_ngcontent-%COMP%], th[_ngcontent-%COMP%], td[_ngcontent-%COMP%], tr[_ngcontent-%COMP%]{display:block}thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{position:absolute;top:-9999px;left:-9999px}tr[_ngcontent-%COMP%]{margin:0 0 1rem}tr[_ngcontent-%COMP%]:nth-child(odd){background:#ccc}td[_ngcontent-%COMP%]{border:none;border-bottom:1px solid #eee;position:relative;padding:7px 0 7px 50%!important}}@media only screen and (max-width: 760px) and (max-width: 384px),only screen and (min-device-width: 768px) and (max-device-width: 1024px) and (max-width: 384px){td[_ngcontent-%COMP%]{padding-left:55%!important}}@media only screen and (max-width: 760px) and (max-width: 340px),only screen and (min-device-width: 768px) and (max-device-width: 1024px) and (max-width: 340px){td[_ngcontent-%COMP%]{padding-left:60%!important}}@media only screen and (max-width: 760px) and (max-width: 314px),only screen and (min-device-width: 768px) and (max-device-width: 1024px) and (max-width: 314px){td[_ngcontent-%COMP%]{padding-left:65%!important}}@media only screen and (max-width: 760px) and (max-width: 296px),only screen and (min-device-width: 768px) and (max-device-width: 1024px) and (max-width: 296px){td[_ngcontent-%COMP%]{padding-left:69%!important}}@media only screen and (max-width: 760px) and (max-width: 242px),only screen and (min-device-width: 768px) and (max-device-width: 1024px) and (max-width: 242px){td[_ngcontent-%COMP%]{padding-left:78%!important}}@media only screen and (max-width: 760px),(min-device-width: 768px) and (max-device-width: 1024px){td[_ngcontent-%COMP%]:before{position:absolute;left:20px;width:45%;padding-right:10px;white-space:nowrap}td[_ngcontent-%COMP%]:nth-of-type(1):before{content:"Name"}td[_ngcontent-%COMP%]:nth-of-type(2):before{content:"Email"}td[_ngcontent-%COMP%]:nth-of-type(3):before{content:"Gender"}td[_ngcontent-%COMP%]:nth-of-type(4):before{content:"Phone"}td[_ngcontent-%COMP%]:nth-of-type(5):before{content:"Role"}td[_ngcontent-%COMP%]:nth-of-type(6):before{content:"Activate/Deactivate"}}@media only screen and (min-width: 200px) and (max-width: 1024px){.td-cross[_ngcontent-%COMP%]{z-index:1;float:right;position:relative;top:-1px;left:23px}.table-margin[_ngcontent-%COMP%]{margin-top:4rem}.switch[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:35px;height:13px;background-color:#999;position:absolute;top:4px;left:0;border-radius:50px}}.btn[_ngcontent-%COMP%]{color:#fff;background-color:#68bfbc;border-color:#68bfbb}.example-tooltip-red[_ngcontent-%COMP%]{background:#858585;color:#fff}.deactive_record[_ngcontent-%COMP%]{border:1px solid #68BFBB;text-align:center;padding-top:9px;padding-left:10px;padding-right:10px}.SortIcon[_ngcontent-%COMP%]{position:absolute;background-color:#a1a1a1!important;justify-content:center;margin-top:2px;cursor:pointer;margin-left:3px;font-size:15px}']})}return c})()},{path:"add-user",component:gt},{path:"edit-user/:id",component:W.d}];let Bt=(()=>{class c{static#e=this.\u0275fac=function(i){return new(i||c)};static#t=this.\u0275mod=e.$C({type:c});static#s=this.\u0275inj=e.G2t({imports:[D.iI.forChild($t),D.iI]})}return c})();var Vt=v(5951),Xt=v(551),Yt=v(2796),Lt=v(4823),Jt=v(7358),qt=v(8320),zt=v(1626),Ht=v(3125);function ee(c){return new qt.s(c)}let Zt=(()=>{class c{static#e=this.\u0275fac=function(i){return new(i||c)};static#t=this.\u0275mod=e.$C({type:c});static#s=this.\u0275inj=e.G2t({imports:[I.MD,Bt,Vt.Wk,J.Ve,w.m_,G.fS,b.X1,Xt.G,Yt.ed,Lt.uc,K.H,O.Ou,Jt.jH,H.g7,Ht.m,j.h.forChild({loader:{provide:j.Wr,useFactory:ee,deps:[zt.Qq]},defaultLanguage:"en"}),z.mV,b.YN]})}return c})()}}]);